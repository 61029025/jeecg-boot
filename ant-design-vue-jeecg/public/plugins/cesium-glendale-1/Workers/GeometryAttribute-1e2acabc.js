define(["exports","./when-54c2dc71","./Check-6c0211bc","./Cartographic-83b6e736","./WebGLConstants-76bb35d1","./Matrix4-05541d3e","./Cartesian2-26928b4a","./Transforms-e2084567"],function(t,a,e,E,n,L,M,w){"use strict";var r=Object.freeze({NONE:0,TRIANGLES:1,LINES:2,POLYLINES:3});function g(t,e,n,r){this[0]=a.defaultValue(t,0),this[1]=a.defaultValue(n,0),this[2]=a.defaultValue(e,0),this[3]=a.defaultValue(r,0)}g.packedLength=4,g.pack=function(t,e,n){return n=a.defaultValue(n,0),e[n++]=t[0],e[n++]=t[1],e[n++]=t[2],e[n++]=t[3],e},g.unpack=function(t,e,n){return e=a.defaultValue(e,0),a.defined(n)||(n=new g),n[0]=t[e++],n[1]=t[e++],n[2]=t[e++],n[3]=t[e++],n},g.clone=function(t,e){if(a.defined(t))return a.defined(e)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):new g(t[0],t[2],t[1],t[3])},g.fromArray=function(t,e,n){return e=a.defaultValue(e,0),a.defined(n)||(n=new g),n[0]=t[e],n[1]=t[e+1],n[2]=t[e+2],n[3]=t[e+3],n},g.fromColumnMajorArray=function(t,e){return g.clone(t,e)},g.fromRowMajorArray=function(t,e){return a.defined(e)?(e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3],e):new g(t[0],t[1],t[2],t[3])},g.fromScale=function(t,e){return a.defined(e)?(e[0]=t.x,e[1]=0,e[2]=0,e[3]=t.y,e):new g(t.x,0,0,t.y)},g.fromUniformScale=function(t,e){return a.defined(e)?(e[0]=t,e[1]=0,e[2]=0,e[3]=t,e):new g(t,0,0,t)},g.fromRotation=function(t,e){var n=Math.cos(t),t=Math.sin(t);return a.defined(e)?(e[0]=n,e[1]=t,e[2]=-t,e[3]=n,e):new g(n,-t,t,n)},g.toArray=function(t,e){return a.defined(e)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):[t[0],t[1],t[2],t[3]]},g.getElementIndex=function(t,e){return 2*t+e},g.getColumn=function(t,e,n){var r=2*e,e=t[r],r=t[1+r];return n.x=e,n.y=r,n},g.setColumn=function(t,e,n,r){e*=2;return(r=g.clone(t,r))[e]=n.x,r[1+e]=n.y,r},g.getRow=function(t,e,n){var r=t[e],e=t[e+2];return n.x=r,n.y=e,n},g.setRow=function(t,e,n,r){return(r=g.clone(t,r))[e]=n.x,r[e+2]=n.y,r};var i=new M.Cartesian2;g.getScale=function(t,e){return e.x=M.Cartesian2.magnitude(M.Cartesian2.fromElements(t[0],t[1],i)),e.y=M.Cartesian2.magnitude(M.Cartesian2.fromElements(t[2],t[3],i)),e};var u=new M.Cartesian2;g.getMaximumScale=function(t){return g.getScale(t,u),M.Cartesian2.maximumComponent(u)},g.multiply=function(t,e,n){var r=t[0]*e[0]+t[2]*e[1],a=t[0]*e[2]+t[2]*e[3],i=t[1]*e[0]+t[3]*e[1],e=t[1]*e[2]+t[3]*e[3];return n[0]=r,n[1]=i,n[2]=a,n[3]=e,n},g.add=function(t,e,n){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n},g.subtract=function(t,e,n){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n[3]=t[3]-e[3],n},g.multiplyByVector=function(t,e,n){var r=t[0]*e.x+t[2]*e.y,e=t[1]*e.x+t[3]*e.y;return n.x=r,n.y=e,n},g.multiplyByScalar=function(t,e,n){return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n},g.multiplyByScale=function(t,e,n){return n[0]=t[0]*e.x,n[1]=t[1]*e.x,n[2]=t[2]*e.y,n[3]=t[3]*e.y,n},g.negate=function(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},g.transpose=function(t,e){var n=t[0],r=t[2],a=t[1],t=t[3];return e[0]=n,e[1]=r,e[2]=a,e[3]=t,e},g.abs=function(t,e){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e[3]=Math.abs(t[3]),e},g.equals=function(t,e){return t===e||a.defined(t)&&a.defined(e)&&t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},g.equalsArray=function(t,e,n){return t[0]===e[n]&&t[1]===e[n+1]&&t[2]===e[n+2]&&t[3]===e[n+3]},g.equalsEpsilon=function(t,e,n){return n=a.defaultValue(n,0),t===e||a.defined(t)&&a.defined(e)&&Math.abs(t[0]-e[0])<=n&&Math.abs(t[1]-e[1])<=n&&Math.abs(t[2]-e[2])<=n&&Math.abs(t[3]-e[3])<=n},g.IDENTITY=Object.freeze(new g(1,0,0,1)),g.ZERO=Object.freeze(new g(0,0,0,0)),g.COLUMN0ROW0=0,g.COLUMN0ROW1=1,g.COLUMN1ROW0=2,g.COLUMN1ROW1=3,Object.defineProperties(g.prototype,{length:{get:function(){return g.packedLength}}}),g.prototype.clone=function(t){return g.clone(this,t)},g.prototype.equals=function(t){return g.equals(this,t)},g.prototype.equalsEpsilon=function(t,e){return g.equalsEpsilon(this,t,e)},g.prototype.toString=function(){return"("+this[0]+", "+this[2]+")\n("+this[1]+", "+this[3]+")"};var o={POINTS:n.WebGLConstants.POINTS,LINES:n.WebGLConstants.LINES,LINE_LOOP:n.WebGLConstants.LINE_LOOP,LINE_STRIP:n.WebGLConstants.LINE_STRIP,TRIANGLES:n.WebGLConstants.TRIANGLES,TRIANGLE_STRIP:n.WebGLConstants.TRIANGLE_STRIP,TRIANGLE_FAN:n.WebGLConstants.TRIANGLE_FAN,validate:function(t){return t===o.POINTS||t===o.LINES||t===o.LINE_LOOP||t===o.LINE_STRIP||t===o.TRIANGLES||t===o.TRIANGLE_STRIP||t===o.TRIANGLE_FAN}},s=Object.freeze(o);function f(t){t=a.defaultValue(t,a.defaultValue.EMPTY_OBJECT),this.attributes=t.attributes,this.indices=t.indices,this.primitiveType=a.defaultValue(t.primitiveType,s.TRIANGLES),this.boundingSphere=t.boundingSphere,this.geometryType=a.defaultValue(t.geometryType,r.NONE),this.boundingSphereCV=t.boundingSphereCV,this.offsetAttribute=t.offsetAttribute,this.MaxPoint=t.MaxPoint,this.MinPoint=t.MinPoint}f.computeNumberOfVertices=function(t){var e,n,r=-1;for(e in t.attributes)t.attributes.hasOwnProperty(e)&&a.defined(t.attributes[e])&&a.defined(t.attributes[e].values)&&(r=(n=t.attributes[e]).values.length/n.componentsPerAttribute);return r};var S=new E.Cartographic,A=new E.Cartesian3,O=new L.Matrix4,P=[new E.Cartographic,new E.Cartographic,new E.Cartographic],R=[new M.Cartesian2,new M.Cartesian2,new M.Cartesian2],v=[new M.Cartesian2,new M.Cartesian2,new M.Cartesian2],V=new E.Cartesian3,G=new w.Quaternion,_=new L.Matrix4,W=new g;f._textureCoordinateRotationPoints=function(t,e,n,r){var a=M.Rectangle.center(r,S),i=E.Cartographic.toCartesian(a,n,A),a=w.Transforms.eastNorthUpToFixedFrame(i,n,O),u=L.Matrix4.inverse(a,O),o=R,s=P;s[0].longitude=r.west,s[0].latitude=r.south,s[1].longitude=r.west,s[1].latitude=r.north,s[2].longitude=r.east,s[2].latitude=r.south;for(var f=V,c=0;c<3;c++)E.Cartographic.toCartesian(s[c],n,f),f=L.Matrix4.multiplyByPointAsVector(u,f,f),o[c].x=f.x,o[c].y=f.y;var i=w.Quaternion.fromAxisAngle(E.Cartesian3.UNIT_Z,-e,G),l=L.Matrix3.fromQuaternion(i,_),d=t.length,y=Number.POSITIVE_INFINITY,m=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,p=Number.NEGATIVE_INFINITY;for(c=0;c<d;c++)f=L.Matrix4.multiplyByPointAsVector(u,t[c],f),f=L.Matrix3.multiplyByVector(l,f,f),y=Math.min(y,f.x),m=Math.min(m,f.y),h=Math.max(h,f.x),p=Math.max(p,f.y);var N=g.fromRotation(e,W),I=v;I[0].x=y,I[0].y=m,I[1].x=y,I[1].y=p,I[2].x=h,I[2].y=m;var C=o[0],b=o[2].x-C.x,x=o[1].y-C.y;for(c=0;c<3;c++){var T=I[c];g.multiplyByVector(N,T,T),T.x=(T.x-C.x)/b,T.y=(T.y-C.y)/x}a=I[0],r=I[1],i=I[2],e=new Array(6);return M.Cartesian2.pack(a,e),M.Cartesian2.pack(r,e,2),M.Cartesian2.pack(i,e,4),e},t.Geometry=f,t.GeometryAttribute=function(t){t=a.defaultValue(t,a.defaultValue.EMPTY_OBJECT),this.componentDatatype=t.componentDatatype,this.componentsPerAttribute=t.componentsPerAttribute,this.normalize=a.defaultValue(t.normalize,!1),this.values=t.values},t.GeometryType=r,t.Matrix2=g,t.PrimitiveType=s});
