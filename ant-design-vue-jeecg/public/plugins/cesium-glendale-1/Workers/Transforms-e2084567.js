define(["exports","./when-54c2dc71","./Check-6c0211bc","./Math-fc8cecf5","./Cartographic-83b6e736","./Matrix4-05541d3e","./RuntimeError-2109023a","./Cartesian2-26928b4a"],function(e,M,r,d,b,c,v,o){"use strict";function t(e){this._ellipsoid=M.defaultValue(e,o.Ellipsoid.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Object.defineProperties(t.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),t.prototype.project=function(e,t){var r=this._semimajorAxis,n=e.longitude*r,r=e.latitude*r,e=e.height;return M.defined(t)?(t.x=n,t.y=r,t.z=e,t):new b.Cartesian3(n,r,e)},t.prototype.unproject=function(e,t){var r=this._oneOverSemimajorAxis,n=e.x*r,r=e.y*r,e=e.z;return M.defined(t)?(t.longitude=n,t.latitude=r,t.height=e,t):new b.Cartographic(n,r,e)};var a=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1});function i(e,t){this.start=M.defaultValue(e,0),this.stop=M.defaultValue(t,0)}function T(e,t){this.center=b.Cartesian3.clone(M.defaultValue(e,b.Cartesian3.ZERO)),this.radius=M.defaultValue(t,0)}var q=new b.Cartesian3,I=new b.Cartesian3,D=new b.Cartesian3,P=new b.Cartesian3,U=new b.Cartesian3,N=new b.Cartesian3,F=new b.Cartesian3,z=new b.Cartesian3,V=new b.Cartesian3,B=new b.Cartesian3,L=new b.Cartesian3,j=new b.Cartesian3,n=4/3*d.CesiumMath.PI;T.fromPoints=function(e,t){if(M.defined(t)||(t=new T),!M.defined(e)||0===e.length)return t.center=b.Cartesian3.clone(b.Cartesian3.ZERO,t.center),t.radius=0,t;for(var r=b.Cartesian3.clone(e[0],F),n=b.Cartesian3.clone(r,q),a=b.Cartesian3.clone(r,I),i=b.Cartesian3.clone(r,D),s=b.Cartesian3.clone(r,P),o=b.Cartesian3.clone(r,U),u=b.Cartesian3.clone(r,N),l=e.length,d=1;d<l;d++){b.Cartesian3.clone(e[d],r);var c=r.x,f=r.y,p=r.z;c<n.x&&b.Cartesian3.clone(r,n),c>s.x&&b.Cartesian3.clone(r,s),f<a.y&&b.Cartesian3.clone(r,a),f>o.y&&b.Cartesian3.clone(r,o),p<i.z&&b.Cartesian3.clone(r,i),p>u.z&&b.Cartesian3.clone(r,u)}var h=b.Cartesian3.magnitudeSquared(b.Cartesian3.subtract(s,n,z)),m=b.Cartesian3.magnitudeSquared(b.Cartesian3.subtract(o,a,z)),y=b.Cartesian3.magnitudeSquared(b.Cartesian3.subtract(u,i,z)),C=n,v=s,h=h;h<m&&(h=m,C=a,v=o),h<y&&(h=y,C=i,v=u);var w=V;w.x=.5*(C.x+v.x),w.y=.5*(C.y+v.y),w.z=.5*(C.z+v.z);var g=b.Cartesian3.magnitudeSquared(b.Cartesian3.subtract(v,w,z)),x=Math.sqrt(g),C=B;C.x=n.x,C.y=a.y,C.z=i.z;v=L;v.x=s.x,v.y=o.y,v.z=u.z;var _=b.Cartesian3.midpoint(C,v,j),E=0;for(d=0;d<l;d++){b.Cartesian3.clone(e[d],r);var S=b.Cartesian3.magnitude(b.Cartesian3.subtract(r,_,z));E<S&&(E=S);var O=b.Cartesian3.magnitudeSquared(b.Cartesian3.subtract(r,w,z));g<O&&(g=(x=.5*(x+(S=Math.sqrt(O))))*x,O=S-x,w.x=(x*w.x+O*r.x)/S,w.y=(x*w.y+O*r.y)/S,w.z=(x*w.z+O*r.z)/S)}return x<E?(b.Cartesian3.clone(w,t.center),t.radius=x):(b.Cartesian3.clone(_,t.center),t.radius=E),t};var s=new t,u=new b.Cartesian3,l=new b.Cartesian3,f=new b.Cartographic,p=new b.Cartographic;T.fromRectangle2D=function(e,t,r){return T.fromRectangleWithHeights2D(e,t,0,0,r)},T.fromRectangleWithHeights2D=function(e,t,r,n,a){if(M.defined(a)||(a=new T),!M.defined(e))return a.center=b.Cartesian3.clone(b.Cartesian3.ZERO,a.center),a.radius=0,a;t=M.defaultValue(t,s),o.Rectangle.southwest(e,f),f.height=r,o.Rectangle.northeast(e,p),p.height=n;var i=t.project(f,u),r=t.project(p,l),e=r.x-i.x,n=r.y-i.y,t=r.z-i.z;a.radius=.5*Math.sqrt(e*e+n*n+t*t);r=a.center;return r.x=i.x+.5*e,r.y=i.y+.5*n,r.z=i.z+.5*t,a};var h=[];T.fromRectangle3D=function(e,t,r,n){if(t=M.defaultValue(t,o.Ellipsoid.WGS84),r=M.defaultValue(r,0),M.defined(n)||(n=new T),!M.defined(e))return n.center=b.Cartesian3.clone(b.Cartesian3.ZERO,n.center),n.radius=0,n;r=o.Rectangle.subsample(e,t,r,h);return T.fromPoints(r,n)},T.fromVertices=function(e,t,r,n){if(M.defined(n)||(n=new T),!M.defined(e)||0===e.length)return n.center=b.Cartesian3.clone(b.Cartesian3.ZERO,n.center),n.radius=0,n;t=M.defaultValue(t,b.Cartesian3.ZERO),r=M.defaultValue(r,3);var a=F;a.x=e[0]+t.x,a.y=e[1]+t.y,a.z=e[2]+t.z;for(var i=b.Cartesian3.clone(a,q),s=b.Cartesian3.clone(a,I),o=b.Cartesian3.clone(a,D),u=b.Cartesian3.clone(a,P),l=b.Cartesian3.clone(a,U),d=b.Cartesian3.clone(a,N),c=e.length,f=0;f<c;f+=r){var p=e[f]+t.x,h=e[f+1]+t.y,m=e[f+2]+t.z;a.x=p,a.y=h,a.z=m,p<i.x&&b.Cartesian3.clone(a,i),p>u.x&&b.Cartesian3.clone(a,u),h<s.y&&b.Cartesian3.clone(a,s),h>l.y&&b.Cartesian3.clone(a,l),m<o.z&&b.Cartesian3.clone(a,o),m>d.z&&b.Cartesian3.clone(a,d)}var y=b.Cartesian3.magnitudeSquared(b.Cartesian3.subtract(u,i,z)),C=b.Cartesian3.magnitudeSquared(b.Cartesian3.subtract(l,s,z)),v=b.Cartesian3.magnitudeSquared(b.Cartesian3.subtract(d,o,z)),w=i,g=u,y=y;y<C&&(y=C,w=s,g=l),y<v&&(y=v,w=o,g=d);var x=V;x.x=.5*(w.x+g.x),x.y=.5*(w.y+g.y),x.z=.5*(w.z+g.z);var _=b.Cartesian3.magnitudeSquared(b.Cartesian3.subtract(g,x,z)),E=Math.sqrt(_),w=B;w.x=i.x,w.y=s.y,w.z=o.z;g=L;g.x=u.x,g.y=l.y,g.z=d.z;var S=b.Cartesian3.midpoint(w,g,j),O=0;for(f=0;f<c;f+=r){a.x=e[f]+t.x,a.y=e[f+1]+t.y,a.z=e[f+2]+t.z;var A=b.Cartesian3.magnitude(b.Cartesian3.subtract(a,S,z));O<A&&(O=A);var R=b.Cartesian3.magnitudeSquared(b.Cartesian3.subtract(a,x,z));_<R&&(_=(E=.5*(E+(A=Math.sqrt(R))))*E,R=A-E,x.x=(E*x.x+R*a.x)/A,x.y=(E*x.y+R*a.y)/A,x.z=(E*x.z+R*a.z)/A)}return E<O?(b.Cartesian3.clone(x,n.center),n.radius=E):(b.Cartesian3.clone(S,n.center),n.radius=O),n},T.fromEncodedCartesianVertices=function(e,t,r){if(M.defined(r)||(r=new T),!M.defined(e)||!M.defined(t)||e.length!==t.length||0===e.length)return r.center=b.Cartesian3.clone(b.Cartesian3.ZERO,r.center),r.radius=0,r;var n=F;n.x=e[0]+t[0],n.y=e[1]+t[1],n.z=e[2]+t[2];for(var a=b.Cartesian3.clone(n,q),i=b.Cartesian3.clone(n,I),s=b.Cartesian3.clone(n,D),o=b.Cartesian3.clone(n,P),u=b.Cartesian3.clone(n,U),l=b.Cartesian3.clone(n,N),d=e.length,c=0;c<d;c+=3){var f=e[c]+t[c],p=e[c+1]+t[c+1],h=e[c+2]+t[c+2];n.x=f,n.y=p,n.z=h,f<a.x&&b.Cartesian3.clone(n,a),f>o.x&&b.Cartesian3.clone(n,o),p<i.y&&b.Cartesian3.clone(n,i),p>u.y&&b.Cartesian3.clone(n,u),h<s.z&&b.Cartesian3.clone(n,s),h>l.z&&b.Cartesian3.clone(n,l)}var m=b.Cartesian3.magnitudeSquared(b.Cartesian3.subtract(o,a,z)),y=b.Cartesian3.magnitudeSquared(b.Cartesian3.subtract(u,i,z)),C=b.Cartesian3.magnitudeSquared(b.Cartesian3.subtract(l,s,z)),v=a,w=o,m=m;m<y&&(m=y,v=i,w=u),m<C&&(m=C,v=s,w=l);var g=V;g.x=.5*(v.x+w.x),g.y=.5*(v.y+w.y),g.z=.5*(v.z+w.z);var x=b.Cartesian3.magnitudeSquared(b.Cartesian3.subtract(w,g,z)),_=Math.sqrt(x),v=B;v.x=a.x,v.y=i.y,v.z=s.z;w=L;w.x=o.x,w.y=u.y,w.z=l.z;var E=b.Cartesian3.midpoint(v,w,j),S=0;for(c=0;c<d;c+=3){n.x=e[c]+t[c],n.y=e[c+1]+t[c+1],n.z=e[c+2]+t[c+2];var O=b.Cartesian3.magnitude(b.Cartesian3.subtract(n,E,z));S<O&&(S=O);var A=b.Cartesian3.magnitudeSquared(b.Cartesian3.subtract(n,g,z));x<A&&(x=(_=.5*(_+(O=Math.sqrt(A))))*_,A=O-_,g.x=(_*g.x+A*n.x)/O,g.y=(_*g.y+A*n.y)/O,g.z=(_*g.z+A*n.z)/O)}return _<S?(b.Cartesian3.clone(g,r.center),r.radius=_):(b.Cartesian3.clone(E,r.center),r.radius=S),r},T.fromCornerPoints=function(e,t,r){M.defined(r)||(r=new T);e=b.Cartesian3.midpoint(e,t,r.center);return r.radius=b.Cartesian3.distance(e,t),r},T.fromEllipsoid=function(e,t){return M.defined(t)||(t=new T),b.Cartesian3.clone(b.Cartesian3.ZERO,t.center),t.radius=e.maximumRadius,t};var m=new b.Cartesian3;T.fromBoundingSpheres=function(e,t){if(M.defined(t)||(t=new T),!M.defined(e)||0===e.length)return t.center=b.Cartesian3.clone(b.Cartesian3.ZERO,t.center),t.radius=0,t;var r=e.length;if(1===r)return T.clone(e[0],t);if(2===r)return T.union(e[0],e[1],t);for(var n=[],a=0;a<r;a++)n.push(e[a].center);var i=(t=T.fromPoints(n,t)).center,s=t.radius;for(a=0;a<r;a++)var o=e[a],s=Math.max(s,b.Cartesian3.distance(i,o.center,m)+o.radius);return t.radius=s,t};var y=new b.Cartesian3,C=new b.Cartesian3,w=new b.Cartesian3;T.fromOrientedBoundingBox=function(e,t){M.defined(t)||(t=new T);var r=e.halfAxes,n=c.Matrix3.getColumn(r,0,y),a=c.Matrix3.getColumn(r,1,C),r=c.Matrix3.getColumn(r,2,w);return b.Cartesian3.add(n,a,n),b.Cartesian3.add(n,r,n),t.center=b.Cartesian3.clone(e.center,t.center),t.radius=b.Cartesian3.magnitude(n),t},T.clone=function(e,t){if(M.defined(e))return M.defined(t)?(t.center=b.Cartesian3.clone(e.center,t.center),t.radius=e.radius,t):new T(e.center,e.radius)},T.packedLength=4,T.pack=function(e,t,r){r=M.defaultValue(r,0);var n=e.center;return t[r++]=n.x,t[r++]=n.y,t[r++]=n.z,t[r]=e.radius,t},T.unpack=function(e,t,r){t=M.defaultValue(t,0),M.defined(r)||(r=new T);var n=r.center;return n.x=e[t++],n.y=e[t++],n.z=e[t++],r.radius=e[t],r};var g=new b.Cartesian3,x=new b.Cartesian3;T.union=function(e,t,r){M.defined(r)||(r=new T);var n=e.center,a=e.radius,i=t.center,s=t.radius,o=b.Cartesian3.subtract(i,n,g),i=b.Cartesian3.magnitude(o);if(i+s<=a)return e.clone(r),r;if(i+a<=s)return t.clone(r),r;s=.5*(a+i+s),i=b.Cartesian3.multiplyByScalar(o,(s-a)/i,x);return b.Cartesian3.add(i,n,i),b.Cartesian3.clone(i,r.center),r.radius=s,r};var _=new b.Cartesian3;T.expand=function(e,t,r){r=T.clone(e,r);t=b.Cartesian3.magnitude(b.Cartesian3.subtract(t,r.center,_));return t>r.radius&&(r.radius=t),r},T.intersectPlane=function(e,t){var r=e.center,n=e.radius,e=t.normal,t=b.Cartesian3.dot(e,r)+t.distance;return t<-n?a.OUTSIDE:t<n?a.INTERSECTING:a.INSIDE},T.transform=function(e,t,r){return M.defined(r)||(r=new T),r.center=c.Matrix4.multiplyByPoint(t,e.center,r.center),r.radius=c.Matrix4.getMaximumScale(t)*e.radius,r};var E=new b.Cartesian3;T.distanceSquaredTo=function(e,t){t=b.Cartesian3.subtract(e.center,t,E);return b.Cartesian3.magnitudeSquared(t)-e.radius*e.radius},T.transformWithoutScale=function(e,t,r){return M.defined(r)||(r=new T),r.center=c.Matrix4.multiplyByPoint(t,e.center,r.center),r.radius=e.radius,r};var S=new b.Cartesian3;T.computePlaneDistances=function(e,t,r,n){M.defined(n)||(n=new i);t=b.Cartesian3.subtract(e.center,t,S),t=b.Cartesian3.dot(r,t);return n.start=t-e.radius,n.stop=t+e.radius,n};for(var O=new b.Cartesian3,A=new b.Cartesian3,R=new b.Cartesian3,W=new b.Cartesian3,k=new b.Cartesian3,Y=new b.Cartographic,H=new Array(8),J=0;J<8;++J)H[J]=new b.Cartesian3;var X,G=new t;T.projectTo2D=function(e,t,r){var n=(t=M.defaultValue(t,G)).ellipsoid,a=e.center,i=e.radius,s=b.Cartesian3.equals(a,b.Cartesian3.ZERO)?b.Cartesian3.clone(b.Cartesian3.UNIT_X,O):n.geodeticSurfaceNormal(a,O),o=b.Cartesian3.cross(b.Cartesian3.UNIT_Z,s,A);b.Cartesian3.normalize(o,o);var u=b.Cartesian3.cross(s,o,R);b.Cartesian3.normalize(u,u),b.Cartesian3.multiplyByScalar(s,i,s),b.Cartesian3.multiplyByScalar(u,i,u),b.Cartesian3.multiplyByScalar(o,i,o);var l=b.Cartesian3.negate(u,k),e=b.Cartesian3.negate(o,W),d=H,i=d[0];b.Cartesian3.add(s,u,i),b.Cartesian3.add(i,o,i),i=d[1],b.Cartesian3.add(s,u,i),b.Cartesian3.add(i,e,i),i=d[2],b.Cartesian3.add(s,l,i),b.Cartesian3.add(i,e,i),i=d[3],b.Cartesian3.add(s,l,i),b.Cartesian3.add(i,o,i),b.Cartesian3.negate(s,s),i=d[4],b.Cartesian3.add(s,u,i),b.Cartesian3.add(i,o,i),i=d[5],b.Cartesian3.add(s,u,i),b.Cartesian3.add(i,e,i),i=d[6],b.Cartesian3.add(s,l,i),b.Cartesian3.add(i,e,i),i=d[7],b.Cartesian3.add(s,l,i),b.Cartesian3.add(i,o,i);for(var c=d.length,f=0;f<c;++f){var p=d[f];b.Cartesian3.add(a,p,p);var h=n.cartesianToCartographic(p,Y);t.project(h,p)}l=(a=(r=T.fromPoints(d,r)).center).x,o=a.y,i=a.z;return a.x=i,a.y=l,a.z=o,r},T.isOccluded=function(e,t){return!t.isBoundingSphereVisible(e)},T.equals=function(e,t){return e===t||M.defined(e)&&M.defined(t)&&b.Cartesian3.equals(e.center,t.center)&&e.radius===t.radius},T.prototype.intersectPlane=function(e){return T.intersectPlane(this,e)},T.prototype.distanceSquaredTo=function(e){return T.distanceSquaredTo(this,e)},T.prototype.computePlaneDistances=function(e,t,r){return T.computePlaneDistances(this,e,t,r)},T.prototype.isOccluded=function(e){return T.isOccluded(this,e)},T.prototype.equals=function(e){return T.equals(this,e)},T.prototype.clone=function(e){return T.clone(this,e)},T.prototype.volume=function(){var e=this.radius;return n*e*e*e};var Z,Q,K,$,ee,te,re,ne,ae,ie,se,oe,ue,le,de,ce,fe,pe={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},he={};function me(e){for(var t=e.split("."),r=0,n=t.length;r<n;++r)t[r]=parseInt(t[r],10);return t}function ye(){var e;return M.defined(Q)||(Q=!1,ge()||null!==(e=/ Chrome\/([\.0-9]+)/.exec(Z.userAgent))&&(Q=!0,K=me(e[1]))),Q}function Ce(){var e;return M.defined($)||($=!1,ye()||ge()||!/ Safari\/[\.0-9]+/.test(Z.userAgent)||null!==(e=/ Version\/([\.0-9]+)/.exec(Z.userAgent))&&($=!0,ee=me(e[1]))),$}function ve(){var e;return M.defined(te)||(te=!1,null!==(e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(Z.userAgent))&&(te=!0,(re=me(e[1])).isNightly=!!e[2])),te}function we(){var e;return M.defined(ne)||(ne=!1,"Microsoft Internet Explorer"===Z.appName?null!==(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(Z.userAgent))&&(ne=!0,ae=me(e[1])):"Netscape"===Z.appName&&null!==(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(Z.userAgent))&&(ne=!0,ae=me(e[1]))),ne}function ge(){var e;return M.defined(ie)||(ie=!1,null!==(e=/ Edge\/([\.0-9]+)/.exec(Z.userAgent))&&(ie=!0,se=me(e[1]))),ie}function xe(){var e;return M.defined(oe)||(oe=!1,null!==(e=/Firefox\/([\.0-9]+)/.exec(Z.userAgent))&&(oe=!0,ue=me(e[1]))),oe}function _e(){var e;return M.defined(fe)||((e=document.createElement("canvas")).setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;"),e=e.style.imageRendering,(fe=M.defined(e)&&""!==e)&&(ce=e)),fe}function Ee(){return Ee._result}Object.defineProperties(he,{element:{get:function(){if(he.supportsFullscreen())return document[pe.fullscreenElement]}},changeEventName:{get:function(){if(he.supportsFullscreen())return pe.fullscreenchange}},errorEventName:{get:function(){if(he.supportsFullscreen())return pe.fullscreenerror}},enabled:{get:function(){if(he.supportsFullscreen())return document[pe.fullscreenEnabled]}},fullscreen:{get:function(){if(he.supportsFullscreen())return null!==he.element}}}),he.supportsFullscreen=function(){if(M.defined(X))return X;X=!1;var e=document.body;if("function"==typeof e.requestFullscreen)return pe.requestFullscreen="requestFullscreen",pe.exitFullscreen="exitFullscreen",pe.fullscreenEnabled="fullscreenEnabled",pe.fullscreenElement="fullscreenElement",pe.fullscreenchange="fullscreenchange",pe.fullscreenerror="fullscreenerror",X=!0;for(var t=["webkit","moz","o","ms","khtml"],r=0,n=t.length;r<n;++r){var a,i=t[r];"function"!=typeof e[a=i+"RequestFullscreen"]&&"function"!=typeof e[a=i+"RequestFullScreen"]||(pe.requestFullscreen=a,X=!0),a=i+"ExitFullscreen","function"==typeof document[a]?pe.exitFullscreen=a:(a=i+"CancelFullScreen","function"==typeof document[a]&&(pe.exitFullscreen=a)),a=i+"FullscreenEnabled",void 0!==document[a]?pe.fullscreenEnabled=a:(a=i+"FullScreenEnabled",void 0!==document[a]&&(pe.fullscreenEnabled=a)),a=i+"FullscreenElement",void 0!==document[a]?pe.fullscreenElement=a:(a=i+"FullScreenElement",void 0!==document[a]&&(pe.fullscreenElement=a)),a=i+"fullscreenchange",void 0!==document["on"+a]&&("ms"===i&&(a="MSFullscreenChange"),pe.fullscreenchange=a),a=i+"fullscreenerror",void 0!==document["on"+a]&&("ms"===i&&(a="MSFullscreenError"),pe.fullscreenerror=a)}return X},he.requestFullscreen=function(e,t){he.supportsFullscreen()&&e[pe.requestFullscreen]({vrDisplay:t})},he.exitFullscreen=function(){he.supportsFullscreen()&&document[pe.exitFullscreen]()},he._names=pe,Z="undefined"!=typeof navigator?navigator:{},Ee._promise=void 0,Ee._result=void 0,Ee.initialize=function(){if(M.defined(Ee._promise))return Ee._promise;var e=M.when.defer();if(Ee._promise=e.promise,ge())return Ee._result=!1,e.resolve(Ee._result),e.promise;var t=new Image;return t.onload=function(){Ee._result=0<t.width&&0<t.height,e.resolve(Ee._result)},t.onerror=function(){Ee._result=!1,e.resolve(Ee._result)},t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.promise},Object.defineProperties(Ee,{initialized:{get:function(){return M.defined(Ee._result)}}});var Se=[];"undefined"!=typeof ArrayBuffer&&(Se.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&Se.push(Uint8ClampedArray),"undefined"!=typeof Uint8ClampedArray&&Se.push(Uint8ClampedArray));var Oe={isChrome:ye,chromeVersion:function(){return ye()&&K},isSafari:Ce,safariVersion:function(){return Ce()&&ee},isWebkit:ve,webkitVersion:function(){return ve()&&re},isInternetExplorer:we,internetExplorerVersion:function(){return we()&&ae},isEdge:ge,edgeVersion:function(){return ge()&&se},isFirefox:xe,firefoxVersion:function(){return xe()&&ue},isWindows:function(){return M.defined(le)||(le=/Windows/i.test(Z.appVersion)),le},hardwareConcurrency:M.defaultValue(Z.hardwareConcurrency,3),supportsPointerEvents:function(){return M.defined(de)||(de=!xe()&&"undefined"!=typeof PointerEvent&&(!M.defined(Z.pointerEnabled)||Z.pointerEnabled)),de},supportsImageRenderingPixelated:_e,supportsWebP:Ee,imageRenderingValue:function(){return _e()?ce:void 0},typedArrayTypes:Se};function Ae(e,t,r,n){this.x=M.defaultValue(e,0),this.y=M.defaultValue(t,0),this.z=M.defaultValue(r,0),this.w=M.defaultValue(n,0)}Oe.supportsFullscreen=function(){return he.supportsFullscreen()},Oe.supportsTypedArrays=function(){return"undefined"!=typeof ArrayBuffer},Oe.supportsWebWorkers=function(){return"undefined"!=typeof Worker},Oe.supportsWebAssembly=function(){return"undefined"!=typeof WebAssembly&&!Oe.isEdge()};var Re=new b.Cartesian3;Ae.fromAxisAngle=function(e,t,r){var n=t/2,a=Math.sin(n),t=(Re=b.Cartesian3.normalize(e,Re)).x*a,e=Re.y*a,a=Re.z*a,n=Math.cos(n);return M.defined(r)?(r.x=t,r.y=e,r.z=a,r.w=n,r):new Ae(t,e,a,n)};var Me=[1,2,0],be=new Array(3);Ae.fromRotationMatrix=function(e,t){var r,n,a,i,s=e[c.Matrix3.COLUMN0ROW0],o=e[c.Matrix3.COLUMN1ROW1],u=e[c.Matrix3.COLUMN2ROW2],l=s+o+u,d=0<l?(a=.5*(i=Math.sqrt(l+1)),i=.5/i,r=(e[c.Matrix3.COLUMN1ROW2]-e[c.Matrix3.COLUMN2ROW1])*i,n=(e[c.Matrix3.COLUMN2ROW0]-e[c.Matrix3.COLUMN0ROW2])*i,(e[c.Matrix3.COLUMN0ROW1]-e[c.Matrix3.COLUMN1ROW0])*i):(o=Me[s=Me[u=s<u&&o<u?2:s<o?1:0]],i=Math.sqrt(e[c.Matrix3.getElementIndex(u,u)]-e[c.Matrix3.getElementIndex(s,s)]-e[c.Matrix3.getElementIndex(o,o)]+1),(d=be)[u]=.5*i,i=.5/i,a=(e[c.Matrix3.getElementIndex(o,s)]-e[c.Matrix3.getElementIndex(s,o)])*i,d[s]=(e[c.Matrix3.getElementIndex(s,u)]+e[c.Matrix3.getElementIndex(u,s)])*i,d[o]=(e[c.Matrix3.getElementIndex(o,u)]+e[c.Matrix3.getElementIndex(u,o)])*i,r=-d[0],n=-d[1],-d[2]);return M.defined(t)?(t.x=r,t.y=n,t.z=d,t.w=a,t):new Ae(r,n,d,a)};var Te=new Ae,qe=new Ae,Ie=new Ae,De=new Ae;Ae.fromHeadingPitchRoll=function(e,t){return De=Ae.fromAxisAngle(b.Cartesian3.UNIT_X,e.roll,Te),Ie=Ae.fromAxisAngle(b.Cartesian3.UNIT_Y,-e.pitch,t),t=Ae.multiply(Ie,De,Ie),qe=Ae.fromAxisAngle(b.Cartesian3.UNIT_Z,-e.heading,Te),Ae.multiply(qe,t,t)};var Pe=new b.Cartesian3,Ue=new b.Cartesian3,Ne=new Ae,Fe=new Ae,ze=new Ae;Ae.packedLength=4,Ae.pack=function(e,t,r){return r=M.defaultValue(r,0),t[r++]=e.x,t[r++]=e.y,t[r++]=e.z,t[r]=e.w,t},Ae.unpack=function(e,t,r){return t=M.defaultValue(t,0),M.defined(r)||(r=new Ae),r.x=e[t],r.y=e[t+1],r.z=e[t+2],r.w=e[t+3],r},Ae.packedInterpolationLength=3,Ae.convertPackedArrayForInterpolation=function(e,t,r,n){Ae.unpack(e,4*r,ze),Ae.conjugate(ze,ze);for(var a=0,i=r-t+1;a<i;a++){var s=3*a;Ae.unpack(e,4*(t+a),Ne),Ae.multiply(Ne,ze,Ne),Ne.w<0&&Ae.negate(Ne,Ne),Ae.computeAxis(Ne,Pe);var o=Ae.computeAngle(Ne);M.defined(n)||(n=[]),n[s]=Pe.x*o,n[1+s]=Pe.y*o,n[2+s]=Pe.z*o}},Ae.unpackInterpolationResult=function(e,t,r,n,a){M.defined(a)||(a=new Ae),b.Cartesian3.fromArray(e,0,Ue);e=b.Cartesian3.magnitude(Ue);return Ae.unpack(t,4*n,Fe),0===e?Ae.clone(Ae.IDENTITY,Ne):Ae.fromAxisAngle(Ue,e,Ne),Ae.multiply(Ne,Fe,a)},Ae.clone=function(e,t){if(M.defined(e))return M.defined(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new Ae(e.x,e.y,e.z,e.w)},Ae.conjugate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},Ae.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},Ae.magnitude=function(e){return Math.sqrt(Ae.magnitudeSquared(e))},Ae.normalize=function(e,t){var r=1/Ae.magnitude(e),n=e.x*r,a=e.y*r,i=e.z*r,r=e.w*r;return t.x=n,t.y=a,t.z=i,t.w=r,t},Ae.inverse=function(e,t){var r=Ae.magnitudeSquared(e);return t=Ae.conjugate(e,t),Ae.multiplyByScalar(t,1/r,t)},Ae.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r},Ae.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r},Ae.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},Ae.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},Ae.multiply=function(e,t,r){var n=e.x,a=e.y,i=e.z,s=e.w,o=t.x,u=t.y,l=t.z,d=t.w,c=s*o+n*d+a*l-i*u,e=s*u-n*l+a*d+i*o,t=s*l+n*u-a*o+i*d,l=s*d-n*o-a*u-i*l;return r.x=c,r.y=e,r.z=t,r.w=l,r},Ae.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r},Ae.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r},Ae.computeAxis=function(e,t){var r=e.w;if(Math.abs(r-1)<d.CesiumMath.EPSILON6)return t.x=t.y=t.z=0,t;r=1/Math.sqrt(1-r*r);return t.x=e.x*r,t.y=e.y*r,t.z=e.z*r,t},Ae.computeAngle=function(e){return Math.abs(e.w-1)<d.CesiumMath.EPSILON6?0:2*Math.acos(e.w)};var Ve=new Ae;Ae.lerp=function(e,t,r,n){return Ve=Ae.multiplyByScalar(t,r,Ve),n=Ae.multiplyByScalar(e,1-r,n),Ae.add(Ve,n,n)};var Be=new Ae,Le=new Ae,je=new Ae;Ae.slerp=function(e,t,r,n){var a=Ae.dot(e,t),i=t;if(a<0&&(a=-a,i=Be=Ae.negate(t,Be)),1-a<d.CesiumMath.EPSILON6)return Ae.lerp(e,i,r,n);a=Math.acos(a);return Le=Ae.multiplyByScalar(e,Math.sin((1-r)*a),Le),je=Ae.multiplyByScalar(i,Math.sin(r*a),je),n=Ae.add(Le,je,n),Ae.multiplyByScalar(n,1/Math.sin(a),n)},Ae.log=function(e,t){var r=d.CesiumMath.acosClamped(e.w),n=0;return 0!==r&&(n=r/Math.sin(r)),b.Cartesian3.multiplyByScalar(e,n,t)},Ae.exp=function(e,t){var r=b.Cartesian3.magnitude(e),n=0;return 0!==r&&(n=Math.sin(r)/r),t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=Math.cos(r),t};var We=new b.Cartesian3,ke=new b.Cartesian3,Ye=new Ae,He=new Ae;Ae.computeInnerQuadrangle=function(e,t,r,n){var a=Ae.conjugate(t,Ye);Ae.multiply(a,r,He);r=Ae.log(He,We);Ae.multiply(a,e,He);e=Ae.log(He,ke);return b.Cartesian3.add(r,e,r),b.Cartesian3.multiplyByScalar(r,.25,r),b.Cartesian3.negate(r,r),Ae.exp(r,Ye),Ae.multiply(t,Ye,n)},Ae.squad=function(e,t,r,n,a,i){t=Ae.slerp(e,t,a,Ye),n=Ae.slerp(r,n,a,He);return Ae.slerp(t,n,2*a*(1-a),i)};for(var Je=new Ae,Se=1.9011074535173003,Xe=Oe.supportsTypedArrays()?new Float32Array(8):[],Ge=Oe.supportsTypedArrays()?new Float32Array(8):[],Ze=Oe.supportsTypedArrays()?new Float32Array(8):[],Qe=Oe.supportsTypedArrays()?new Float32Array(8):[],Ke=0;Ke<7;++Ke){var $e=Ke+1,et=2*$e+1;Xe[Ke]=1/($e*et),Ge[Ke]=$e/et}function tt(e,t,r){for(var n,a,i=0,s=e.length-1;i<=s;)if((a=r(e[n=~~((i+s)/2)],t))<0)i=1+n;else{if(!(0<a))return n;s=n-1}return~(s+1)}function rt(e,t,r,n,a){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=r,this.yPoleOffset=n,this.ut1MinusUtc=a}function nt(){function w(e,t,r,n){return r=r||" ",r=e.length>=t?"":Array(1+t-e.length>>>0).join(r),n?e+r:r+e}function g(e,t,r,n,a,i){var s=n-e.length;return 0<s&&(e=r||!a?w(e,n,i,r):e.slice(0,t.length)+w("",s,"0",!0)+e.slice(t.length)),e}function x(e,t,r,n,a,i,s){var o=e>>>0;return e=(r=r&&o&&{2:"0b",8:"0",16:"0x"}[t]||"")+w(o.toString(t),i||0,"0",!1),g(e,r,n,a,s)}function _(e,t,r,n,a,i){return null!=n&&(e=e.slice(0,n)),g(e,"",t,r,a,i)}var E=arguments,S=0,e=E[S++];return e.replace(/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,function(e,t,r,n,a,i,s){var o,u,l,d,c;if("%%"==e)return"%";for(var f=!1,p="",h=!1,m=!1,y=" ",C=r.length,v=0;r&&v<C;v++)switch(r.charAt(v)){case" ":p=" ";break;case"+":p="+";break;case"-":f=!0;break;case"'":y=r.charAt(v+1);break;case"0":h=!0;break;case"#":m=!0}if((n=n?"*"==n?+E[S++]:"*"==n.charAt(0)?+E[n.slice(1,-1)]:+n:0)<0&&(n=-n,f=!0),!isFinite(n))throw new Error("sprintf: (minimum-)width must be finite");switch(i=i?"*"==i?+E[S++]:"*"==i.charAt(0)?+E[i.slice(1,-1)]:+i:-1<"fFeE".indexOf(s)?6:"d"==s?0:void 0,c=t?E[t.slice(0,-1)]:E[S++],s){case"s":return _(String(c),f,n,i,h,y);case"c":return _(String.fromCharCode(+c),f,n,i,h);case"b":return x(c,2,m,f,n,i,h);case"o":return x(c,8,m,f,n,i,h);case"x":return x(c,16,m,f,n,i,h);case"X":return x(c,16,m,f,n,i,h).toUpperCase();case"u":return x(c,10,m,f,n,i,h);case"i":case"d":return o=+c||0,c=(u=(o=Math.round(o-o%1))<0?"-":p)+w(String(Math.abs(o)),i,"0",!1),g(c,u,f,n,h);case"e":case"E":case"f":case"F":case"g":case"G":return u=(o=+c)<0?"-":p,l=["toExponential","toFixed","toPrecision"]["efg".indexOf(s.toLowerCase())],d=["toString","toUpperCase"]["eEfFgG".indexOf(s)%2],c=u+Math.abs(o)[l](i),g(c,u,f,n,h)[d]();default:return e}})}function at(e,t,r,n,a,i,s,o){this.year=e,this.month=t,this.day=r,this.hour=n,this.minute=a,this.second=i,this.millisecond=s,this.isLeapSecond=o}function it(e){return e%4==0&&e%100!=0||e%400==0}function st(e,t){this.julianDate=e,this.offset=t}Xe[7]=Se/136,Ge[7]=8*Se/17,Ae.fastSlerp=function(e,t,r,n){var a,i=Ae.dot(e,t);0<=i?a=1:(a=-1,i=-i);for(var s=i-1,i=1-r,o=r*r,u=i*i,l=7;0<=l;--l)Ze[l]=(Xe[l]*o-Ge[l])*s,Qe[l]=(Xe[l]*u-Ge[l])*s;r=a*r*(1+Ze[0]*(1+Ze[1]*(1+Ze[2]*(1+Ze[3]*(1+Ze[4]*(1+Ze[5]*(1+Ze[6]*(1+Ze[7])))))))),i*=1+Qe[0]*(1+Qe[1]*(1+Qe[2]*(1+Qe[3]*(1+Qe[4]*(1+Qe[5]*(1+Qe[6]*(1+Qe[7]))))))),i=Ae.multiplyByScalar(e,i,Je);return Ae.multiplyByScalar(t,r,n),Ae.add(i,n,n)},Ae.fastSquad=function(e,t,r,n,a,i){t=Ae.fastSlerp(e,t,a,Ye),n=Ae.fastSlerp(r,n,a,He);return Ae.fastSlerp(t,n,2*a*(1-a),i)},Ae.equals=function(e,t){return e===t||M.defined(e)&&M.defined(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},Ae.equalsEpsilon=function(e,t,r){return r=M.defaultValue(r,0),e===t||M.defined(e)&&M.defined(t)&&Math.abs(e.x-t.x)<=r&&Math.abs(e.y-t.y)<=r&&Math.abs(e.z-t.z)<=r&&Math.abs(e.w-t.w)<=r},Ae.ZERO=Object.freeze(new Ae(0,0,0,0)),Ae.IDENTITY=Object.freeze(new Ae(0,0,0,1)),Ae.prototype.clone=function(e){return Ae.clone(this,e)},Ae.prototype.equals=function(e){return Ae.equals(this,e)},Ae.prototype.equalsEpsilon=function(e,t){return Ae.equalsEpsilon(this,e,t)},Ae.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var ot=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),ut=Object.freeze({UTC:0,TAI:1}),lt=new at,dt=[31,28,31,30,31,30,31,31,30,31,30,31];function ct(e,t){return Ot.compare(e.julianDate,t.julianDate)}var ft=new st;function pt(e){ft.julianDate=e;var t=Ot.leapSeconds,r=tt(t,ft,ct);r<0&&(r=~r),r>=t.length&&(r=t.length-1);var n=t[r].offset;0<r&&n<Ot.secondsDifference(t[r].julianDate,e)&&(n=t[--r].offset),Ot.addSeconds(e,n,e)}function ht(e,t){ft.julianDate=e;var r=Ot.leapSeconds,n=tt(r,ft,ct);if(n<0&&(n=~n),0===n)return Ot.addSeconds(e,-r[0].offset,t);if(n>=r.length)return Ot.addSeconds(e,-r[n-1].offset,t);var a=Ot.secondsDifference(r[n].julianDate,e);return 0===a?Ot.addSeconds(e,-r[n].offset,t):a<=1?void 0:Ot.addSeconds(e,-r[--n].offset,t)}function mt(e,t,r){var n=t/ot.SECONDS_PER_DAY|0;return e+=n,(t-=ot.SECONDS_PER_DAY*n)<0&&(e--,t+=ot.SECONDS_PER_DAY),r.dayNumber=e,r.secondsOfDay=t,r}function yt(e,t,r,n,a,i,s){var o=(t-14)/12|0,e=e+4800+o,r=(1461*e/4|0)+(367*(t-2-12*o)/12|0)-(3*((e+100)/100|0)/4|0)+r-32075;(n-=12)<0&&(n+=24);s=i+(n*ot.SECONDS_PER_HOUR+a*ot.SECONDS_PER_MINUTE+s*ot.SECONDS_PER_MILLISECOND);return 43200<=s&&--r,[r,s]}var Ct=/^(\d{4})$/,vt=/^(\d{4})-(\d{2})$/,wt=/^(\d{4})-?(\d{3})$/,gt=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,xt=/^(\d{4})-?(\d{2})-?(\d{2})$/,Se=/([Z+\-])?(\d{2})?:?(\d{2})?$/,_t=/^(\d{2})(\.\d+)?/.source+Se.source,Et=/^(\d{2}):?(\d{2})(\.\d+)?/.source+Se.source,St=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+Se.source;function Ot(e,t,r){this.dayNumber=void 0,this.secondsOfDay=void 0,e=M.defaultValue(e,0),t=M.defaultValue(t,0),r=M.defaultValue(r,ut.UTC);var n=0|e;mt(n,t+=(e-n)*ot.SECONDS_PER_DAY,this),r===ut.UTC&&pt(this)}Ot.fromGregorianDate=function(e,t){e=yt(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return M.defined(t)?(mt(e[0],e[1],t),pt(t),t):new Ot(e[0],e[1],ut.UTC)},Ot.fromDate=function(e,t){e=yt(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return M.defined(t)?(mt(e[0],e[1],t),pt(t),t):new Ot(e[0],e[1],ut.UTC)},Ot.fromIso8601=function(e,t){var r,n,a,i,s,o=(e=e.replace(",",".")).split("T"),u=1,l=1,d=0,c=0,f=0,p=0,h=o[0],e=o[1];if(null!==(o=h.match(xt))?(r=+o[1],u=+o[2],l=+o[3]):null!==(o=h.match(vt))?(r=+o[1],u=+o[2]):null!==(o=h.match(Ct))?r=+o[1]:(null!==(o=h.match(wt))?(r=+o[1],i=+o[2],a=it(r)):null!==(o=h.match(gt))&&(r=+o[1],i=7*+o[2]+(+o[3]||0)-new Date(Date.UTC(r,0,4)).getUTCDay()-3),(n=new Date(Date.UTC(r,0,1))).setUTCDate(i),u=n.getUTCMonth()+1,l=n.getUTCDate()),a=it(r),M.defined(e)){null!==(o=e.match(St))?(d=+o[1],c=+o[2],f=+o[3],p=1e3*+(o[4]||0),s=5):null!==(o=e.match(Et))?(d=+o[1],c=+o[2],f=60*+(o[3]||0),s=4):null!==(o=e.match(_t))&&(d=+o[1],c=60*+(o[2]||0),s=3);var m=o[s],y=+o[s+1],C=+(o[s+2]||0);switch(m){case"+":d-=y,c-=C;break;case"-":d+=y,c+=C;break;case"Z":break;default:c+=new Date(Date.UTC(r,u-1,l,d,c)).getTimezoneOffset()}}m=60===f;for(m&&f--;60<=c;)c-=60,d++;for(;24<=d;)d-=24,l++;for(n=a&&2===u?29:dt[u-1];n<l;)l-=n,12<++u&&(u-=12,r++),n=a&&2===u?29:dt[u-1];for(;c<0;)c+=60,d--;for(;d<0;)d+=24,l--;for(;l<1;)--u<1&&(u+=12,r--),l+=n=a&&2===u?29:dt[u-1];p=yt(r,u,l,d,c,f,p);return M.defined(t)?(mt(p[0],p[1],t),pt(t)):t=new Ot(p[0],p[1],ut.UTC),m&&Ot.addSeconds(t,1,t),t},Ot.now=function(e){return Ot.fromDate(new Date,e)};var At=new Ot(0,0,ut.TAI);function Rt(e){e instanceof Rt?(this.scheme=e.scheme,this.authority=e.authority,this.path=e.path,this.query=e.query,this.fragment=e.fragment):e&&(e=Mt.exec(e),this.scheme=e[1],this.authority=e[2],this.path=e[3],this.query=e[4],this.fragment=e[5])}Ot.toGregorianDate=function(e,t){var r=!1,n=ht(e,At);M.defined(n)||(Ot.addSeconds(e,-1,At),n=ht(At,At),r=!0);var a=n.dayNumber,i=n.secondsOfDay;43200<=i&&(a+=1);var s=a+68569|0,o=4*s/146097|0,u=4e3*(1+(s=s-((146097*o+3)/4|0)|0))/1461001|0,e=80*(s=s-(1461*u/4|0)+31|0)/2447|0,n=s-(2447*e/80|0)|0,a=2+e-12*(s=e/11|0)|0,e=100*(o-49)+u+s|0,o=i/ot.SECONDS_PER_HOUR|0,u=i-o*ot.SECONDS_PER_HOUR,s=u/ot.SECONDS_PER_MINUTE|0,i=0|(u-=s*ot.SECONDS_PER_MINUTE),u=(u-i)/ot.SECONDS_PER_MILLISECOND;return 23<(o+=12)&&(o-=24),r&&(i+=1),M.defined(t)?(t.year=e,t.month=a,t.day=n,t.hour=o,t.minute=s,t.second=i,t.millisecond=u,t.isLeapSecond=r,t):new at(e,a,n,o,s,i,u,r)},Ot.toDate=function(e){var t=Ot.toGregorianDate(e,lt),e=t.second;return t.isLeapSecond&&--e,new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,e,t.millisecond))},Ot.toIso8601=function(e,t){var r=Ot.toGregorianDate(e,lt),n=r.year,a=r.month,i=r.day,s=r.hour,o=r.minute,e=r.second,r=r.millisecond;return 1e4===n&&1===a&&1===i&&0===s&&0===o&&0===e&&0===r&&(n=9999,a=12,i=31,s=24),M.defined(t)||0===r?M.defined(t)&&0!==t?nt("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",n,a,i,s,o,e,(.01*r).toFixed(t).replace(".","").slice(0,t)):nt("%04d-%02d-%02dT%02d:%02d:%02dZ",n,a,i,s,o,e):nt("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",n,a,i,s,o,e,(.01*r).toString().replace(".",""))},Ot.clone=function(e,t){if(M.defined(e))return M.defined(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new Ot(e.dayNumber,e.secondsOfDay,ut.TAI)},Ot.compare=function(e,t){var r=e.dayNumber-t.dayNumber;return 0!=r?r:e.secondsOfDay-t.secondsOfDay},Ot.equals=function(e,t){return e===t||M.defined(e)&&M.defined(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay},Ot.equalsEpsilon=function(e,t,r){return r=M.defaultValue(r,0),e===t||M.defined(e)&&M.defined(t)&&Math.abs(Ot.secondsDifference(e,t))<=r},Ot.totalDays=function(e){return e.dayNumber+e.secondsOfDay/ot.SECONDS_PER_DAY},Ot.secondsDifference=function(e,t){return(e.dayNumber-t.dayNumber)*ot.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)},Ot.daysDifference=function(e,t){return e.dayNumber-t.dayNumber+(e.secondsOfDay-t.secondsOfDay)/ot.SECONDS_PER_DAY},Ot.computeTaiMinusUtc=function(e){ft.julianDate=e;var t=Ot.leapSeconds,e=tt(t,ft,ct);return e<0&&(e=~e,--e<0&&(e=0)),t[e].offset},Ot.addSeconds=function(e,t,r){return mt(e.dayNumber,e.secondsOfDay+t,r)},Ot.addMinutes=function(e,t,r){t=e.secondsOfDay+t*ot.SECONDS_PER_MINUTE;return mt(e.dayNumber,t,r)},Ot.addHours=function(e,t,r){t=e.secondsOfDay+t*ot.SECONDS_PER_HOUR;return mt(e.dayNumber,t,r)},Ot.addDays=function(e,t,r){return mt(e.dayNumber+t,e.secondsOfDay,r)},Ot.lessThan=function(e,t){return Ot.compare(e,t)<0},Ot.lessThanOrEquals=function(e,t){return Ot.compare(e,t)<=0},Ot.greaterThan=function(e,t){return 0<Ot.compare(e,t)},Ot.greaterThanOrEquals=function(e,t){return 0<=Ot.compare(e,t)},Ot.prototype.clone=function(e){return Ot.clone(this,e)},Ot.prototype.equals=function(e){return Ot.equals(this,e)},Ot.prototype.equalsEpsilon=function(e,t){return Ot.equalsEpsilon(this,e,t)},Ot.prototype.toString=function(){return Ot.toIso8601(this)},Ot.leapSeconds=[new st(new Ot(2441317,43210,ut.TAI),10),new st(new Ot(2441499,43211,ut.TAI),11),new st(new Ot(2441683,43212,ut.TAI),12),new st(new Ot(2442048,43213,ut.TAI),13),new st(new Ot(2442413,43214,ut.TAI),14),new st(new Ot(2442778,43215,ut.TAI),15),new st(new Ot(2443144,43216,ut.TAI),16),new st(new Ot(2443509,43217,ut.TAI),17),new st(new Ot(2443874,43218,ut.TAI),18),new st(new Ot(2444239,43219,ut.TAI),19),new st(new Ot(2444786,43220,ut.TAI),20),new st(new Ot(2445151,43221,ut.TAI),21),new st(new Ot(2445516,43222,ut.TAI),22),new st(new Ot(2446247,43223,ut.TAI),23),new st(new Ot(2447161,43224,ut.TAI),24),new st(new Ot(2447892,43225,ut.TAI),25),new st(new Ot(2448257,43226,ut.TAI),26),new st(new Ot(2448804,43227,ut.TAI),27),new st(new Ot(2449169,43228,ut.TAI),28),new st(new Ot(2449534,43229,ut.TAI),29),new st(new Ot(2450083,43230,ut.TAI),30),new st(new Ot(2450630,43231,ut.TAI),31),new st(new Ot(2451179,43232,ut.TAI),32),new st(new Ot(2453736,43233,ut.TAI),33),new st(new Ot(2454832,43234,ut.TAI),34),new st(new Ot(2456109,43235,ut.TAI),35),new st(new Ot(2457204,43236,ut.TAI),36),new st(new Ot(2457754,43237,ut.TAI),37)],Rt.prototype.scheme=null,Rt.prototype.authority=null,Rt.prototype.path="",Rt.prototype.query=null,Rt.prototype.fragment=null;var Mt=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$");Rt.prototype.getScheme=function(){return this.scheme},Rt.prototype.getAuthority=function(){return this.authority},Rt.prototype.getPath=function(){return this.path},Rt.prototype.getQuery=function(){return this.query},Rt.prototype.getFragment=function(){return this.fragment},Rt.prototype.isAbsolute=function(){return!!this.scheme&&!this.fragment},Rt.prototype.isSameDocumentAs=function(e){return e.scheme==this.scheme&&e.authority==this.authority&&e.path==this.path&&e.query==this.query},Rt.prototype.equals=function(e){return this.isSameDocumentAs(e)&&e.fragment==this.fragment},Rt.prototype.normalize=function(){this.removeDotSegments(),this.scheme&&(this.scheme=this.scheme.toLowerCase()),this.authority&&(this.authority=this.authority.replace(qt,Dt).replace(bt,It)),this.path&&(this.path=this.path.replace(bt,It)),this.query&&(this.query=this.query.replace(bt,It)),this.fragment&&(this.fragment=this.fragment.replace(bt,It))};var bt=/%[0-9a-z]{2}/gi,Tt=/[a-zA-Z0-9\-\._~]/,qt=/(.*@)?([^@:]*)(:.*)?/;function It(e){var t=unescape(e);return Tt.test(t)?t:e.toUpperCase()}function Dt(e,t,r,n){return(t||"")+r.toLowerCase()+(n||"")}function Pt(e,t){if(null===e||"object"!=typeof e)return e;t=M.defaultValue(t,!1);var r,n,a=new e.constructor;for(r in e)e.hasOwnProperty(r)&&(n=e[r],t&&(n=Pt(n,t)),a[r]=n);return a}function Ut(e,t,r){r=M.defaultValue(r,!1);var n,a,i,s={},o=M.defined(e),u=M.defined(t);if(o)for(n in e)e.hasOwnProperty(n)&&(a=e[n],u&&r&&"object"==typeof a&&t.hasOwnProperty(n)?(i=t[n],s[n]="object"==typeof i?Ut(a,i,r):a):s[n]=a);if(u)for(n in t)t.hasOwnProperty(n)&&!s.hasOwnProperty(n)&&(i=t[n],s[n]=i);return s}function Nt(e,t){var r;return"undefined"!=typeof document&&(r=document),Nt._implementation(e,t,r)}Rt.prototype.resolve=function(e){var t=new Rt;return this.scheme?(t.scheme=this.scheme,t.authority=this.authority,t.path=this.path,t.query=this.query):(t.scheme=e.scheme,this.authority?(t.authority=this.authority,t.path=this.path,t.query=this.query):(t.authority=e.authority,""==this.path?(t.path=e.path,t.query=this.query||e.query):("/"==this.path.charAt(0)?t.path=this.path:e.authority&&""==e.path?t.path="/"+this.path:t.path=e.path.substring(0,e.path.lastIndexOf("/")+1)+this.path,t.removeDotSegments(),t.query=this.query))),t.fragment=this.fragment,t},Rt.prototype.removeDotSegments=function(){var e,t=this.path.split("/"),r=[],n=""==t[0];n&&t.shift();for(""==t[0]&&t.shift();t.length;)".."==(e=t.shift())?r.pop():"."!=e&&r.push(e);"."!=e&&".."!=e||r.push(""),n&&r.unshift(""),this.path=r.join("/")},Rt.prototype.toString=function(){var e="";return this.scheme&&(e+=this.scheme+":"),this.authority&&(e+="//"+this.authority),e+=this.path,this.query&&(e+="?"+this.query),this.fragment&&(e+="#"+this.fragment),e},Nt._implementation=function(e,t,r){if(!M.defined(t)){if(void 0===r)return e;t=M.defaultValue(r.baseURI,r.location.href)}t=new Rt(t);return new Rt(e).resolve(t).toString()};var Ft,zt=/^blob:/i;function Vt(e){return zt.test(e)}var Bt=/^data:/i;function Lt(e){return Bt.test(e)}var jt=Object.freeze({UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5}),Wt=Object.freeze({TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3});function kt(e){e=M.defaultValue(e,M.defaultValue.EMPTY_OBJECT);var t=M.defaultValue(e.throttleByServer,!1),r=M.defaultValue(e.throttle,!1);this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=M.defaultValue(e.priority,0),this.throttle=r,this.throttleByServer=t,this.type=M.defaultValue(e.type,Wt.OTHER),this.serverKey=void 0,this.state=jt.UNISSUED,this.deferred=void 0,this.cancelled=!1}function Yt(e,t,r){this.statusCode=e,this.response=t,this.responseHeaders=r,"string"==typeof this.responseHeaders&&(this.responseHeaders=function(e){var t={};if(!e)return t;for(var r=e.split("\r\n"),n=0;n<r.length;++n){var a,i=r[n],s=i.indexOf(": ");0<s&&(a=i.substring(0,s),s=i.substring(s+2),t[a]=s)}return t}(this.responseHeaders))}function Ht(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}function Jt(e,t){return t-e}function Xt(e){this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function Gt(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}kt.prototype.cancel=function(){this.cancelled=!0},kt.prototype.clone=function(e){return M.defined(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=this.RequestState.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new kt(this)},Yt.prototype.toString=function(){var e="Request has failed.";return M.defined(this.statusCode)&&(e+=" Status Code: "+this.statusCode),e},Object.defineProperties(Ht.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}}),Ht.prototype.addEventListener=function(e,t){this._listeners.push(e),this._scopes.push(t);var r=this;return function(){r.removeEventListener(e,t)}},Ht.prototype.removeEventListener=function(e,t){for(var r=this._listeners,n=this._scopes,a=-1,i=0;i<r.length;i++)if(r[i]===e&&n[i]===t){a=i;break}return-1!==a&&(this._insideRaiseEvent?(this._toRemove.push(a),r[a]=void 0,n[a]=void 0):(r.splice(a,1),n.splice(a,1)),!0)},Ht.prototype.raiseEvent=function(){this._insideRaiseEvent=!0;for(var e=this._listeners,t=this._scopes,r=e.length,n=0;n<r;n++){var a=e[n];M.defined(a)&&e[n].apply(t[n],arguments)}var i=this._toRemove;if(0<(r=i.length)){for(i.sort(Jt),n=0;n<r;n++){var s=i[n];e.splice(s,1),t.splice(s,1)}i.length=0}this._insideRaiseEvent=!1},Object.defineProperties(Xt.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){var t=this._length;if(e<t){for(var r=this._array,n=e;n<t;++n)r[n]=void 0;this._length=e,r.length=e}this._maximumLength=e}},comparator:{get:function(){return this._comparator}}}),Xt.prototype.reserve=function(e){e=M.defaultValue(e,this._length),this._array.length=e},Xt.prototype.heapify=function(e){e=M.defaultValue(e,0);for(var t=this._length,r=this._comparator,n=this._array,a=-1,i=!0;i;){var s=2*(e+1),o=s-1,a=o<t&&r(n[o],n[e])<0?o:e;s<t&&r(n[s],n[a])<0&&(a=s),a!==e?(Gt(n,a,e),e=a):i=!1}},Xt.prototype.resort=function(){for(var e=this._length,t=Math.ceil(e/2);0<=t;--t)this.heapify(t)},Xt.prototype.insert=function(e){var t,r=this._array,n=this._comparator,a=this._maximumLength,i=this._length++;for(i<r.length?r[i]=e:r.push(e);0!==i;){var s=Math.floor((i-1)/2);if(!(n(r[i],r[s])<0))break;Gt(r,i,s),i=s}return M.defined(a)&&this._length>a&&(t=r[a],this._length=a),t},Xt.prototype.pop=function(e){if(e=M.defaultValue(e,0),0!==this._length){var t=this._array,r=t[e];return Gt(t,e,--this._length),this.heapify(e),t[this._length]=void 0,r}};var Zt={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0},Qt=100,Kt=new Xt({comparator:function(e,t){return e.priority-t.priority}});Kt.maximumLength=Qt,Kt.reserve(Qt);var $t=[],er={},tr="undefined"!=typeof document?new Rt(document.location.href):new Rt,rr=new Ht;function nr(){}function ar(e){M.defined(e.priorityFunction)&&(e.priority=e.priorityFunction())}function ir(e){var t=M.defaultValue(nr.requestsByServer[e],nr.maximumRequestsPerServer);return er[e]<t}function sr(e){return e.state===jt.UNISSUED&&(e.state=jt.ISSUED,e.deferred=M.when.defer()),e.deferred.promise}function or(e){var t,r,n=sr(e);return e.state=jt.ACTIVE,$t.push(e),++Zt.numberOfActiveRequests,++Zt.numberOfActiveRequestsEver,++er[e.serverKey],e.requestFunction().then((r=e,function(e){var t;r.state!==jt.CANCELLED&&(t=r.deferred,--Zt.numberOfActiveRequests,--er[r.serverKey],rr.raiseEvent(),r.state=jt.RECEIVED,r.deferred=void 0,t.resolve(e))})).otherwise((t=e,function(e){t.state!==jt.CANCELLED&&(++Zt.numberOfFailedRequests,--Zt.numberOfActiveRequests,--er[t.serverKey],rr.raiseEvent(e),t.state=jt.FAILED,t.deferred.reject(e))})),n}function ur(e){var t,r=e.state===jt.ACTIVE;e.state=jt.CANCELLED,++Zt.numberOfCancelledRequests,M.defined(e.deferred)&&(t=e.deferred,e.deferred=void 0,t.reject()),r&&(--Zt.numberOfActiveRequests,--er[e.serverKey],++Zt.numberOfCancelledActiveRequests),M.defined(e.cancelFunction)&&e.cancelFunction()}nr.maximumRequests=100,nr.maximumRequestsPerServer=100,nr.requestsByServer={"api.cesium.com:443":18,"assets.cesium.com:443":18},nr.throttleRequests=!0,nr.debugShowStatistics=!1,nr.requestCompletedEvent=rr,Object.defineProperties(nr,{statistics:{get:function(){return Zt}},priorityHeapLength:{get:function(){return Qt},set:function(e){if(e<Qt)for(;Kt.length>e;)ur(Kt.pop());Qt=e,Kt.maximumLength=e,Kt.reserve(e)}}}),nr.update=function(){for(var e,t=0,r=$t.length,n=0;n<r;++n)(e=$t[n]).cancelled&&ur(e),e.state===jt.ACTIVE?0<t&&($t[n-t]=e):++t;$t.length-=t;var a=Kt.internalArray,i=Kt.length;for(n=0;n<i;++n)ar(a[n]);Kt.resort();for(var s=Math.max(nr.maximumRequests-$t.length,0),o=0;o<s&&0<Kt.length;)!(e=Kt.pop()).cancelled&&(!e.throttleByServer||ir(e.serverKey))?(or(e),++o):ur(e);nr.debugShowStatistics&&(0===Zt.numberOfActiveRequests&&0<Zt.lastNumberOfActiveRequests&&(0<Zt.numberOfAttemptedRequests&&(console.log("Number of attempted requests: "+Zt.numberOfAttemptedRequests),Zt.numberOfAttemptedRequests=0),0<Zt.numberOfCancelledRequests&&(console.log("Number of cancelled requests: "+Zt.numberOfCancelledRequests),Zt.numberOfCancelledRequests=0),0<Zt.numberOfCancelledActiveRequests&&(console.log("Number of cancelled active requests: "+Zt.numberOfCancelledActiveRequests),Zt.numberOfCancelledActiveRequests=0),0<Zt.numberOfFailedRequests&&(console.log("Number of failed requests: "+Zt.numberOfFailedRequests),Zt.numberOfFailedRequests=0)),Zt.lastNumberOfActiveRequests=Zt.numberOfActiveRequests)},nr.getServerKey=function(e){var t=new Rt(e).resolve(tr);t.normalize();e=t.authority;/:/.test(e)||(e=e+":"+("https"===t.scheme?"443":"80"));t=er[e];return M.defined(t)||(er[e]=0),e},nr.request=function(e){if(Lt(e.url)||Vt(e.url))return rr.raiseEvent(),e.state=jt.RECEIVED,e.requestFunction();if(++Zt.numberOfAttemptedRequests,M.defined(e.serverKey)||(e.serverKey=nr.getServerKey(e.url)),!nr.throttleRequests||!e.throttleByServer||ir(e.serverKey)){if(!nr.throttleRequests||!e.throttle)return or(e);if(!($t.length>=nr.maximumRequests)){ar(e);var t=Kt.insert(e);if(M.defined(t)){if(t===e)return;ur(t)}return sr(e)}}},nr.clearForSpecs=function(){for(;0<Kt.length;)ur(Kt.pop());for(var e=$t.length,t=0;t<e;++t)ur($t[t]);$t.length=0,er={},Zt.numberOfAttemptedRequests=0,Zt.numberOfActiveRequests=0,Zt.numberOfCancelledRequests=0,Zt.numberOfCancelledActiveRequests=0,Zt.numberOfFailedRequests=0,Zt.numberOfActiveRequestsEver=0,Zt.lastNumberOfActiveRequests=0},nr.numberOfActiveRequestsByServer=function(e){return er[e]},nr.requestHeap=Kt;var lr={},dr={};lr.add=function(e,t){t=e.toLowerCase()+":"+t;M.defined(dr[t])||(dr[t]=!0)},lr.remove=function(e,t){t=e.toLowerCase()+":"+t;M.defined(dr[t])&&delete dr[t]},lr.contains=function(e){e=function(e){var t=new Rt(e);if(t.normalize(),e=t.getAuthority(),M.defined(e)){if(-1!==e.indexOf("@")&&(e=e.split("@")[1]),-1===e.indexOf(":")){t=t.getScheme();if(M.defined(t)||(t=(t=window.location.protocol).substring(0,t.length-1)),"http"===t)e+=":80";else{if("https"!==t)return;e+=":443"}}return e}}(e);return!(!M.defined(e)||!M.defined(dr[e]))},lr.clear=function(){dr={}};var cr,fr=function(){try{var e=new XMLHttpRequest;return e.open("GET","#",!0),(e.responseType="blob")===e.responseType}catch(e){return!1}}();function pr(e,t,r,n){var a,i=e.query;if(!M.defined(i)||0===i.length)return 1;i=-1===i.indexOf("=")?((a={})[i]=void 0,a):function(e){var t={};if(""===e)return t;for(var r=e.replace(/\+/g,"%20").split(/[&;]/),n=0,a=r.length;n<a;++n){var i=r[n].split("="),s=decodeURIComponent(i[0]),o=i[1],o=M.defined(o)?decodeURIComponent(o):"",i=t[s];"string"==typeof i?t[s]=[i,o]:Array.isArray(i)?i.push(o):t[s]=o}return t}(i),t._queryParameters=r?Cr(i,t._queryParameters,n):i,e.query=void 0}function hr(e,t){var r=t._queryParameters,t=Object.keys(r);1!==t.length||M.defined(r[t[0]])?e.query=function(e){var t,r="";for(t in e)if(e.hasOwnProperty(t)){var n=e[t],a=encodeURIComponent(t)+"=";if(Array.isArray(n))for(var i=0,s=n.length;i<s;++i)r+=a+encodeURIComponent(n[i])+"&";else r+=a+encodeURIComponent(n)+"&"}return r=r.slice(0,-1)}(r):e.query=t[0]}function mr(e,t){return M.defined(e)?M.defined(e.clone)?e.clone():Pt(e):t}function yr(e){if(e.state===jt.ISSUED||e.state===jt.ACTIVE)throw new v.RuntimeError("The Resource is already being fetched.");e.state=jt.UNISSUED,e.deferred=void 0}function Cr(e,t,r){if(!r)return Ut(e,t);var n,a,i,s=Pt(e,!0);for(n in t)t.hasOwnProperty(n)&&(a=s[n],i=t[n],M.defined(a)?(Array.isArray(a)||(a=s[n]=[a]),s[n]=a.concat(i)):s[n]=Array.isArray(i)?i.slice():i);return s}function vr(e){"string"==typeof(e=M.defaultValue(e,M.defaultValue.EMPTY_OBJECT))&&(e={url:e}),this._url=void 0,this._templateValues=mr(e.templateValues,{}),this._queryParameters=mr(e.queryParameters,{}),this.headers=mr(e.headers,{}),this.request=M.defaultValue(e.request,new kt),this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=M.defaultValue(e.retryAttempts,0),this._retryCount=0;e=new Rt(e.url);pr(e,this,!0,!0),e.fragment=void 0,this._url=e.toString()}function wr(e){var r=e.resource,n=e.flipY,a=e.preferImageBitmap,i=r.request;i.url=r.url,i.requestFunction=function(){var e=!1;r.isDataUri||r.isBlobUri||(e=r.isCrossOriginUrl);var t=M.when.defer();return vr._Implementations.createImage(i,e,t,n,a),t.promise};e=nr.request(i);if(M.defined(e))return e.otherwise(function(t){return i.state!==jt.FAILED?M.when.reject(t):r.retryOnError(t).then(function(e){return e?(i.state=jt.UNISSUED,i.deferred=void 0,wr({resource:r,flipY:n,preferImageBitmap:a})):M.when.reject(t)})})}vr.createIfNeeded=function(e){return e instanceof vr?e.getDerivedResource({request:e.request}):"string"!=typeof e?e:new vr({url:e})},vr.supportsImageBitmapOptions=function(){if(M.defined(cr))return cr;if("function"!=typeof createImageBitmap)return cr=M.when.resolve(!1);return cr=vr.fetchBlob({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWP4////fwAJ+wP9CNHoHgAAAABJRU5ErkJggg=="}).then(function(e){return createImageBitmap(e,{imageOrientation:"flipY",premultiplyAlpha:"none"})}).then(function(e){return!0}).otherwise(function(){return!1})},Object.defineProperties(vr,{isBlobSupported:{get:function(){return fr}}}),Object.defineProperties(vr.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){return this.getUrlComponent(!0,!0)},set:function(e){e=new Rt(e);pr(e,this,!1),e.fragment=void 0,this._url=e.toString()}},extension:{get:function(){return e=this._url,(t=new Rt(e)).normalize(),e=t.path,-1!==(t=e.lastIndexOf("/"))&&(e=e.substr(t+1)),e=-1===(t=e.lastIndexOf("."))?"":e.substr(t+1);var e,t}},isDataUri:{get:function(){return Lt(this._url)}},isBlobUri:{get:function(){return Vt(this._url)}},isCrossOriginUrl:{get:function(){return function(e){M.defined(Ft)||(Ft=document.createElement("a")),Ft.href=window.location.href;var t=Ft.host,r=Ft.protocol;return Ft.href=e,Ft.href=Ft.href,r!==Ft.protocol||t!==Ft.host}(this._url)}},hasHeaders:{get:function(){return 0<Object.keys(this.headers).length}}}),vr.prototype.toString=function(){return this.getUrlComponent(!0,!0)},vr.prototype.getUrlComponent=function(e,t){if(this.isDataUri)return this._url;var r=new Rt(this._url);e&&hr(r,this);var r=r.toString().replace(/%7B/g,"{").replace(/%7D/g,"}"),n=this._templateValues,r=r.replace(/{(.*?)}/g,function(e,t){t=n[t];return M.defined(t)?encodeURIComponent(t):e});return t&&M.defined(this.proxy)&&(r=this.proxy.getURL(r)),r},vr.prototype.setQueryParameters=function(e,t){this._queryParameters=t?Cr(this._queryParameters,e,!1):Cr(e,this._queryParameters,!1)},vr.prototype.appendQueryParameters=function(e){this._queryParameters=Cr(e,this._queryParameters,!0)},vr.prototype.setTemplateValues=function(e,t){this._templateValues=t?Ut(this._templateValues,e):Ut(e,this._templateValues)},vr.prototype.getDerivedResource=function(e){var t,r=this.clone();return r._retryCount=0,M.defined(e.url)&&(pr(t=new Rt(e.url),r,!0,M.defaultValue(e.preserveQueryParameters,!1)),t.fragment=void 0,r._url=t.resolve(new Rt(Nt(this._url))).toString()),M.defined(e.queryParameters)&&(r._queryParameters=Ut(e.queryParameters,r._queryParameters)),M.defined(e.templateValues)&&(r._templateValues=Ut(e.templateValues,r.templateValues)),M.defined(e.headers)&&(r.headers=Ut(e.headers,r.headers)),M.defined(e.proxy)&&(r.proxy=e.proxy),M.defined(e.request)&&(r.request=e.request),M.defined(e.retryCallback)&&(r.retryCallback=e.retryCallback),M.defined(e.retryAttempts)&&(r.retryAttempts=e.retryAttempts),r},vr.prototype.retryOnError=function(e){var t=this.retryCallback;if("function"!=typeof t||this._retryCount>=this.retryAttempts)return M.when(!1);var r=this;return M.when(t(this,e)).then(function(e){return++r._retryCount,e})},vr.prototype.clone=function(e){return M.defined(e)||(e=new vr({url:this._url})),e._url=this._url,e._queryParameters=Pt(this._queryParameters),e._templateValues=Pt(this._templateValues),e.headers=Pt(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e},vr.prototype.getBaseUri=function(e){return t=this.getUrlComponent(e),r=e,n="",-1!==(e=t.lastIndexOf("/"))&&(n=t.substring(0,e+1)),r&&(t=new Rt(t),M.defined(t.query)&&(n+="?"+t.query),M.defined(t.fragment)&&(n+="#"+t.fragment)),n;var t,r,n},vr.prototype.appendForwardSlash=function(){var e;this._url=(0!==(e=this._url).length&&"/"===e[e.length-1]||(e+="/"),e)},vr.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},vr.fetchArrayBuffer=function(e){return new vr(e).fetchArrayBuffer()},vr.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},vr.fetchBlob=function(e){return new vr(e).fetchBlob()},vr.prototype.fetchImage=function(e){e=M.defaultValue(e,M.defaultValue.EMPTY_OBJECT);var t=M.defaultValue(e.preferImageBitmap,!1),r=M.defaultValue(e.preferBlob,!1),n=M.defaultValue(e.flipY,!1);if(yr(this.request),!fr||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!r)return wr({resource:this,flipY:n,preferImageBitmap:t});var a,i,s,o=this.fetchBlob();return M.defined(o)?vr.supportsImageBitmapOptions().then(function(e){return a=e&&t,o}).then(function(e){if(M.defined(e)){if(s=e,a)return vr.createImageBitmapFromBlob(e,{flipY:n,premultiplyAlpha:!1});e=window.URL.createObjectURL(e);return wr({resource:i=new vr({url:e}),flipY:n,preferImageBitmap:!1})}}).then(function(e){if(M.defined(e))return e.blob=s,a||window.URL.revokeObjectURL(i.url),e}).otherwise(function(e){return M.defined(i)&&window.URL.revokeObjectURL(i.url),e.blob=s,M.when.reject(e)}):void 0},vr.fetchImage=function(e){return new vr(e).fetchImage({flipY:e.flipY,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap})},vr.prototype.fetchText=function(){return this.fetch({responseType:"text"})},vr.fetchText=function(e){return new vr(e).fetchText()},vr.prototype.fetchJson=function(){var e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(M.defined(e))return e.then(function(e){if(M.defined(e))return JSON.parse(e)})},vr.fetchJson=function(e){return new vr(e).fetchJson()},vr.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},vr.fetchXML=function(e){return new vr(e).fetchXML()},vr.prototype.fetchJsonp=function(e){var t;for(e=M.defaultValue(e,"callback"),yr(this.request);t="loadJsonp"+Math.random().toString().substring(2,8),M.defined(window[t]););return function r(n,a,i){var e={};e[a]=i;n.setQueryParameters(e);var s=n.request;s.url=n.url;s.requestFunction=function(){var t=M.when.defer();return window[i]=function(e){t.resolve(e);try{delete window[i]}catch(e){window[i]=void 0}},vr._Implementations.loadAndExecuteScript(n.url,i,t),t.promise};var e=nr.request(s);if(!M.defined(e))return;return e.otherwise(function(t){return s.state!==jt.FAILED?M.when.reject(t):n.retryOnError(t).then(function(e){return e?(s.state=jt.UNISSUED,s.deferred=void 0,r(n,a,i)):M.when.reject(t)})})}(this,e,t)},vr.fetchJsonp=function(e){return new vr(e).fetchJsonp(e.callbackParameterName)},vr.prototype._makeRequest=function(o){var u=this;yr(u.request);var l=u.request;l.url=u.url,l.requestFunction=function(){var e=o.responseType,t=Ut(o.headers,u.headers),r=o.overrideMimeType,n=o.method,a=o.data,i=M.when.defer(),s=vr._Implementations.loadWithXhr(u.url,e,n,a,t,i,r);return M.defined(s)&&M.defined(s.abort)&&(l.cancelFunction=function(){s.abort()}),i.promise};var e=nr.request(l);if(M.defined(e))return e.then(function(e){return l.cancelFunction=void 0,e}).otherwise(function(t){return l.cancelFunction=void 0,l.state!==jt.FAILED?M.when.reject(t):u.retryOnError(t).then(function(e){return e?(l.state=jt.UNISSUED,l.deferred=void 0,u.fetch(o)):M.when.reject(t)})})};var gr=/^data:(.*?)(;base64)?,(.*)$/;function xr(e,t){t=decodeURIComponent(t);return e?atob(t):t}function _r(e,t){for(var r=xr(e,t),t=new ArrayBuffer(r.length),n=new Uint8Array(t),a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return t}function Er(e,t){switch(t){case"text":return e.toString("utf8");case"json":return JSON.parse(e.toString("utf8"));default:return new Uint8Array(e).buffer}}vr.prototype.fetch=function(e){return(e=mr(e,{})).method="GET",this._makeRequest(e)},vr.fetch=function(e){return new vr(e).fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},vr.prototype.delete=function(e){return(e=mr(e,{})).method="DELETE",this._makeRequest(e)},vr.delete=function(e){return new vr(e).delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data})},vr.prototype.head=function(e){return(e=mr(e,{})).method="HEAD",this._makeRequest(e)},vr.head=function(e){return new vr(e).head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},vr.prototype.options=function(e){return(e=mr(e,{})).method="OPTIONS",this._makeRequest(e)},vr.options=function(e){return new vr(e).options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},vr.prototype.post=function(e,t){return r.Check.defined("data",e),(t=mr(t,{})).method="POST",t.data=e,this._makeRequest(t)},vr.post=function(e){return new vr(e).post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},vr.prototype.put=function(e,t){return r.Check.defined("data",e),(t=mr(t,{})).method="PUT",t.data=e,this._makeRequest(t)},vr.put=function(e){return new vr(e).put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},vr.prototype.patch=function(e,t){return r.Check.defined("data",e),(t=mr(t,{})).method="PATCH",t.data=e,this._makeRequest(t)},vr.patch=function(e){return new vr(e).patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},(vr._Implementations={}).createImage=function(i,s,o,u,l){var d=i.url;vr.supportsImageBitmapOptions().then(function(e){if(!e||!l)return n=d,e=s,t=o,(r=new Image).onload=function(){t.resolve(r)},r.onerror=function(e){t.reject(e)},e&&(lr.contains(n)?r.crossOrigin="use-credentials":r.crossOrigin=""),void(r.src=n);var t,r,n=M.when.defer(),a=vr._Implementations.loadWithXhr(d,"blob","GET",void 0,void 0,n,void 0,void 0,void 0);return M.defined(a)&&M.defined(a.abort)&&(i.cancelFunction=function(){a.abort()}),n.promise.then(function(e){return M.defined(e)?vr.createImageBitmapFromBlob(e,{flipY:u,premultiplyAlpha:!1}):void o.reject(new v.RuntimeError("Successfully retrieved "+d+" but it contained no content."))}).then(o.resolve)}).otherwise(o.reject)},vr.createImageBitmapFromBlob=function(e,t){return r.Check.defined("options",t),r.Check.typeOf.bool("options.flipY",t.flipY),r.Check.typeOf.bool("options.premultiplyAlpha",t.premultiplyAlpha),createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"none",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none"})};var Sr="undefined"==typeof XMLHttpRequest;function Or(e){var t,r;e=M.defaultValue(e,M.defaultValue.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=M.defaultValue(e.addNewLeapSeconds,!0),M.defined(e.data)?Rr(this,e.data):M.defined(e.url)?(t=vr.createIfNeeded(e.url),(r=this)._downloadPromise=t.fetchJson().then(function(e){Rr(r,e)}).otherwise(function(){r._dataError="An error occurred while retrieving the EOP data from the URL "+t.url+"."})):Rr(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function Ar(e,t){return Ot.compare(e.julianDate,t)}function Rr(e,t){if(M.defined(t.columnNames))if(M.defined(t.samples)){var r=t.columnNames.indexOf("modifiedJulianDateUtc"),n=t.columnNames.indexOf("xPoleWanderRadians"),a=t.columnNames.indexOf("yPoleWanderRadians"),i=t.columnNames.indexOf("ut1MinusUtcSeconds"),s=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),o=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),u=t.columnNames.indexOf("taiMinusUtcSeconds");if(r<0||n<0||a<0||i<0||s<0||o<0||u<0)e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else{var l,d=e._samples=t.samples,c=e._dates=[];e._dateColumn=r,e._xPoleWanderRadiansColumn=n,e._yPoleWanderRadiansColumn=a,e._ut1MinusUtcSecondsColumn=i,e._xCelestialPoleOffsetRadiansColumn=s,e._yCelestialPoleOffsetRadiansColumn=o,e._taiMinusUtcSecondsColumn=u,e._columnCount=t.columnNames.length,e._lastIndex=void 0;for(var f=e._addNewLeapSeconds,p=0,h=d.length;p<h;p+=e._columnCount){var m,y=d[p+r],C=d[p+u],v=new Ot(y+ot.MODIFIED_JULIAN_DATE_DIFFERENCE,C,ut.TAI);c.push(v),f&&(C===l||!M.defined(l)||(y=tt(m=Ot.leapSeconds,v,Ar))<0&&(v=new st(v,C),m.splice(~y,0,v)),l=C)}}}else e._dataError="Error in loaded EOP data: The samples property is required.";else e._dataError="Error in loaded EOP data: The columnNames property is required."}function Mr(e,t,r,n,a){n*=r;a.xPoleWander=t[n+e._xPoleWanderRadiansColumn],a.yPoleWander=t[n+e._yPoleWanderRadiansColumn],a.xPoleOffset=t[n+e._xCelestialPoleOffsetRadiansColumn],a.yPoleOffset=t[n+e._yCelestialPoleOffsetRadiansColumn],a.ut1MinusUtc=t[n+e._ut1MinusUtcSecondsColumn]}function br(e,t,r){return t+e*(r-t)}function Tr(e,t,r,n,a,i,s){var o=e._columnCount;if(i>t.length-1)return s.xPoleWander=0,s.yPoleWander=0,s.xPoleOffset=0,s.yPoleOffset=0,s.ut1MinusUtc=0,s;var u=t[a],l=t[i];if(u.equals(l)||n.equals(u))return Mr(e,r,a,o,s),s;if(n.equals(l))return Mr(e,r,i,o,s),s;var d=Ot.secondsDifference(n,u)/Ot.secondsDifference(l,u),c=a*o,t=i*o,u=r[c+e._ut1MinusUtcSecondsColumn],a=r[t+e._ut1MinusUtcSecondsColumn],i=a-u;return!(.5<i||i<-.5)||(o=r[c+e._taiMinusUtcSecondsColumn])!==(i=r[t+e._taiMinusUtcSecondsColumn])&&(l.equals(n)?u=a:a-=i-o),s.xPoleWander=br(d,r[c+e._xPoleWanderRadiansColumn],r[t+e._xPoleWanderRadiansColumn]),s.yPoleWander=br(d,r[c+e._yPoleWanderRadiansColumn],r[t+e._yPoleWanderRadiansColumn]),s.xPoleOffset=br(d,r[c+e._xCelestialPoleOffsetRadiansColumn],r[t+e._xCelestialPoleOffsetRadiansColumn]),s.yPoleOffset=br(d,r[c+e._yCelestialPoleOffsetRadiansColumn],r[t+e._yCelestialPoleOffsetRadiansColumn]),s.ut1MinusUtc=br(d,u,a),s}function qr(e,t,r){this.heading=M.defaultValue(e,0),this.pitch=M.defaultValue(t,0),this.roll=M.defaultValue(r,0)}vr._Implementations.loadWithXhr=function(e,a,i,t,r,s,n){var o=gr.exec(e);if(null===o){if(Sr)return u=e,l=a,d=i,c=r,f=s,p=require("url").parse(u),u="https:"===p.protocol?require("https"):require("http"),h=require("zlib"),c={protocol:p.protocol,hostname:p.hostname,port:p.port,path:p.path,query:p.query,method:d,headers:c},void u.request(c).on("response",function(t){var r;t.statusCode<200||300<=t.statusCode?f.reject(new Yt(t.statusCode,t,t.headers)):(r=[],t.on("data",function(e){r.push(e)}),t.on("end",function(){var e=Buffer.concat(r);"gzip"===t.headers["content-encoding"]?h.gunzip(e,function(e,t){e?f.reject(new v.RuntimeError("Error decompressing response.")):f.resolve(Er(t,l))}):f.resolve(Er(e,l))}))}).on("error",function(e){f.reject(new Yt)}).end();var u,l,d,c,f,p,h,m=new XMLHttpRequest;if(lr.contains(e)&&(m.withCredentials=!0),m.open(i,e,!0),M.defined(n)&&M.defined(m.overrideMimeType)&&m.overrideMimeType(n),M.defined(r))for(var y in r)r.hasOwnProperty(y)&&m.setRequestHeader(y,r[y]);M.defined(a)&&(m.responseType=a);var C=!1;return"string"==typeof e&&(C=0===e.indexOf("file://")||"undefined"!=typeof window&&"file://"===window.location.origin),m.onload=function(){if(!(m.status<200||300<=m.status)||C&&0===m.status){var e=m.response,t=m.responseType;if("HEAD"===i||"OPTIONS"===i){var r=m.getAllResponseHeaders().trim().split(/[\r\n]+/),n={};return r.forEach(function(e){var t=e.split(": "),e=t.shift();n[e]=t.join(": ")}),void s.resolve(n)}if(204===m.status)s.resolve();else if(!M.defined(e)||M.defined(a)&&t!==a)if("json"===a&&"string"==typeof e)try{s.resolve(JSON.parse(e))}catch(e){s.reject(e)}else(""===t||"document"===t)&&M.defined(m.responseXML)&&m.responseXML.hasChildNodes()?s.resolve(m.responseXML):""!==t&&"text"!==t||!M.defined(m.responseText)?s.reject(new v.RuntimeError("Invalid XMLHttpRequest response type.")):s.resolve(m.responseText);else s.resolve(e)}else s.reject(new Yt(m.status,m.response,m.getAllResponseHeaders()))},m.onerror=function(e){s.reject(new Yt)},m.send(t),m}s.resolve(function(e,t){t=M.defaultValue(t,"");var r=e[1],n=!!e[2],a=e[3];switch(t){case"":case"text":return xr(n,a);case"arraybuffer":return _r(n,a);case"blob":var i=_r(n,a);return new Blob([i],{type:r});case"document":return(new DOMParser).parseFromString(xr(n,a),r);case"json":return JSON.parse(xr(n,a))}}(o,a))},vr._Implementations.loadAndExecuteScript=function(e,t,r){return function(e){var t=M.when.defer(),r=document.createElement("script");r.async=!0,r.src=e;var n=document.getElementsByTagName("head")[0];return r.onload=function(){r.onload=void 0,n.removeChild(r),t.resolve()},r.onerror=function(e){t.reject(e)},n.appendChild(r),t.promise}(e).otherwise(r.reject)},(vr._DefaultImplementations={}).createImage=vr._Implementations.createImage,vr._DefaultImplementations.loadWithXhr=vr._Implementations.loadWithXhr,vr._DefaultImplementations.loadAndExecuteScript=vr._Implementations.loadAndExecuteScript,vr.DEFAULT=Object.freeze(new vr({url:"undefined"==typeof document?"":document.location.href.split("?")[0]})),Or.NONE=Object.freeze({getPromiseToLoad:function(){return M.when.resolve()},compute:function(e,t){return M.defined(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new rt(0,0,0,0,0),t}}),Or.prototype.getPromiseToLoad=function(){return M.when(this._downloadPromise)},Or.prototype.compute=function(e,t){if(M.defined(this._samples)){if(M.defined(t)||(t=new rt(0,0,0,0,0)),0===this._samples.length)return t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0,t;var r=this._dates,n=this._lastIndex,a=0,i=0;if(M.defined(n)){var s=r[n],o=r[n+1],u=Ot.lessThanOrEquals(s,e),l=!M.defined(o),s=l||Ot.greaterThanOrEquals(o,e);if(u&&s)return a=n,!l&&o.equals(e)&&++a,i=a+1,Tr(this,r,this._samples,e,a,i,t),t}o=tt(r,e,Ot.compare,this._dateColumn);return 0<=o?(o<r.length-1&&r[o+1].equals(e)&&++o,i=a=o):(a=(i=~o)-1)<0&&(a=0),this._lastIndex=a,Tr(this,r,this._samples,e,a,i,t),t}if(M.defined(this._dataError))throw new v.RuntimeError(this._dataError)},qr.fromQuaternion=function(e,t){M.defined(t)||(t=new qr);var r=2*(e.w*e.y-e.z*e.x),n=1-2*(e.x*e.x+e.y*e.y),a=2*(e.w*e.x+e.y*e.z),i=1-2*(e.y*e.y+e.z*e.z),e=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(e,i),t.roll=Math.atan2(a,n),t.pitch=-d.CesiumMath.asinClamped(r),t},qr.fromDegrees=function(e,t,r,n){return M.defined(n)||(n=new qr),n.heading=e*d.CesiumMath.RADIANS_PER_DEGREE,n.pitch=t*d.CesiumMath.RADIANS_PER_DEGREE,n.roll=r*d.CesiumMath.RADIANS_PER_DEGREE,n},qr.clone=function(e,t){if(M.defined(e))return M.defined(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new qr(e.heading,e.pitch,e.roll)},qr.equals=function(e,t){return e===t||M.defined(e)&&M.defined(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll},qr.equalsEpsilon=function(e,t,r,n){return e===t||M.defined(e)&&M.defined(t)&&d.CesiumMath.equalsEpsilon(e.heading,t.heading,r,n)&&d.CesiumMath.equalsEpsilon(e.pitch,t.pitch,r,n)&&d.CesiumMath.equalsEpsilon(e.roll,t.roll,r,n)},qr.prototype.clone=function(e){return qr.clone(this,e)},qr.prototype.equals=function(e){return qr.equals(this,e)},qr.prototype.equalsEpsilon=function(e,t,r){return qr.equalsEpsilon(this,e,t,r)},qr.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var Ir,Dr,Pr,Ur=/((?:.*\/)|^)Cesium\.js(?:\?|\#|$)/;function Nr(e){return"undefined"==typeof document?e:(M.defined(Ir)||(Ir=document.createElement("a")),Ir.href=e,Ir.href=Ir.href,Ir.href)}function Fr(){if(M.defined(Dr))return Dr;var e="undefined"!=typeof CESIUM_BASE_URL?CESIUM_BASE_URL:"object"==typeof define&&M.defined(define.amd)&&!define.amd.toUrlUndefined&&M.defined(require.toUrl)?Nt("..",Br("Core/buildModuleUrl.js")):function(){for(var e=document.getElementsByTagName("script"),t=0,r=e.length;t<r;++t){var n=e[t].getAttribute("src"),n=Ur.exec(n);if(null!==n)return n[1]}}();return(Dr=new vr({url:Nr(e)})).appendForwardSlash(),Dr}function zr(e){return Nr(require.toUrl("../"+e))}function Vr(e){return Fr().getDerivedResource({url:e}).url}function Br(e){return M.defined(Pr)||(Pr="object"==typeof define&&M.defined(define.amd)&&!define.amd.toUrlUndefined&&M.defined(require.toUrl)?zr:Vr),Pr(e)}function Lr(e,t,r){this.x=e,this.y=t,this.s=r}function jr(e){e=M.defaultValue(e,M.defaultValue.EMPTY_OBJECT),this._xysFileUrlTemplate=vr.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=M.defaultValue(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=M.defaultValue(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new Ot(this._sampleZeroJulianEphemerisDate,0,ut.TAI),this._stepSizeDays=M.defaultValue(e.stepSizeDays,1),this._samplesPerXysFile=M.defaultValue(e.samplesPerXysFile,1e3),this._totalSamples=M.defaultValue(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var t=this._interpolationOrder,r=this._denominators=new Array(t+1),n=this._xTable=new Array(t+1),a=Math.pow(this._stepSizeDays,t),i=0;i<=t;++i){r[i]=a,n[i]=i*this._stepSizeDays;for(var s=0;s<=t;++s)s!==i&&(r[i]*=i-s);r[i]=1/r[i]}this._work=new Array(t+1),this._coef=new Array(t+1)}Br._cesiumScriptRegex=Ur,Br._buildModuleUrlFromBaseUrl=Vr,Br._clearBaseResource=function(){Dr=void 0},Br.setBaseUrl=function(e){Dr=vr.DEFAULT.getDerivedResource({url:e})},Br.getCesiumBaseUrl=Fr;var Wr=new Ot(0,0,ut.TAI);function kr(e,t,r){var n=Wr;return n.dayNumber=t,n.secondsOfDay=r,Ot.daysDifference(n,e._sampleZeroDateTT)}function Yr(s,o){if(s._chunkDownloadsInProgress[o])return s._chunkDownloadsInProgress[o];var u=M.when.defer();s._chunkDownloadsInProgress[o]=u;var e=s._xysFileUrlTemplate,e=M.defined(e)?e.getDerivedResource({templateValues:{0:o}}):new vr({url:Br("Assets/IAU2006_XYS/IAU2006_XYS_"+o+".json")});return M.when(e.fetchJson(),function(e){s._chunkDownloadsInProgress[o]=!1;for(var t=s._samples,r=e.samples,n=o*s._samplesPerXysFile*3,a=0,i=r.length;a<i;++a)t[n+a]=r[a];u.resolve()}),u.promise}jr.prototype.preload=function(e,t,r,n){t=kr(this,e,t),n=kr(this,r,n),t=t/this._stepSizeDays-this._interpolationOrder/2|0;t<0&&(t=0);n=n/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;n>=this._totalSamples&&(n=this._totalSamples-1);for(var t=t/this._samplesPerXysFile|0,a=n/this._samplesPerXysFile|0,i=[],s=t;s<=a;++s)i.push(Yr(this,s));return M.when.all(i)},jr.prototype.computeXysRadians=function(e,t,r){var n=kr(this,e,t);if(!(n<0)){e=n/this._stepSizeDays|0;if(!(e>=this._totalSamples)){var a=this._interpolationOrder,i=e-(a/2|0);i<0&&(i=0);t=i+a;t>=this._totalSamples&&(i=(t=this._totalSamples-1)-a)<0&&(i=0);var e=!1,s=this._samples;if(M.defined(s[3*i])||(Yr(this,i/this._samplesPerXysFile|0),e=!0),M.defined(s[3*t])||(Yr(this,t/this._samplesPerXysFile|0),e=!0),!e){M.defined(r)?(r.x=0,r.y=0,r.s=0):r=new Lr(0,0,0);for(var o,u=n-i*this._stepSizeDays,l=this._work,d=this._denominators,c=this._coef,f=this._xTable,p=0;p<=a;++p)l[p]=u-f[p];for(p=0;p<=a;++p){for(c[p]=1,o=0;o<=a;++o)o!==p&&(c[p]*=l[o]);c[p]*=d[p];var h=3*(i+p);r.x+=c[p]*s[h++],r.y+=c[p]*s[h++],r.s+=c[p]*s[h]}return r}}}};var Hr={},Jr={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},Xr={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Gr={},Zr={east:new b.Cartesian3,north:new b.Cartesian3,up:new b.Cartesian3,west:new b.Cartesian3,south:new b.Cartesian3,down:new b.Cartesian3},Qr=new b.Cartesian3,Kr=new b.Cartesian3,$r=new b.Cartesian3;Hr.localFrameToFixedFrameGenerator=function(a,i){if(!Jr.hasOwnProperty(a)||!Jr[a].hasOwnProperty(i))throw new r.DeveloperError("firstAxis and secondAxis must be east, north, up, west, south or down.");var e,s=Jr[a][i],t=a+i;return M.defined(Gr[t])?e=Gr[t]:(e=function(e,t,r){var n;return M.defined(r)||(r=new c.Matrix4),b.Cartesian3.equalsEpsilon(e,b.Cartesian3.ZERO,d.CesiumMath.EPSILON14)?(b.Cartesian3.unpack(Xr[a],0,Qr),b.Cartesian3.unpack(Xr[i],0,Kr),b.Cartesian3.unpack(Xr[s],0,$r)):d.CesiumMath.equalsEpsilon(e.x,0,d.CesiumMath.EPSILON14)&&d.CesiumMath.equalsEpsilon(e.y,0,d.CesiumMath.EPSILON14)?(n=d.CesiumMath.sign(e.z),b.Cartesian3.unpack(Xr[a],0,Qr),"east"!==a&&"west"!==a&&b.Cartesian3.multiplyByScalar(Qr,n,Qr),b.Cartesian3.unpack(Xr[i],0,Kr),"east"!==i&&"west"!==i&&b.Cartesian3.multiplyByScalar(Kr,n,Kr),b.Cartesian3.unpack(Xr[s],0,$r),"east"!==s&&"west"!==s&&b.Cartesian3.multiplyByScalar($r,n,$r)):((t=M.defaultValue(t,o.Ellipsoid.WGS84)).geodeticSurfaceNormal(e,Zr.up),n=Zr.up,(t=Zr.east).x=-e.y,t.y=e.x,t.z=0,b.Cartesian3.normalize(t,Zr.east),b.Cartesian3.cross(n,t,Zr.north),b.Cartesian3.multiplyByScalar(Zr.up,-1,Zr.down),b.Cartesian3.multiplyByScalar(Zr.east,-1,Zr.west),b.Cartesian3.multiplyByScalar(Zr.north,-1,Zr.south),Qr=Zr[a],Kr=Zr[i],$r=Zr[s]),r[0]=Qr.x,r[1]=Qr.y,r[2]=Qr.z,r[3]=0,r[4]=Kr.x,r[5]=Kr.y,r[6]=Kr.z,r[7]=0,r[8]=$r.x,r[9]=$r.y,r[10]=$r.z,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,r},Gr[t]=e),e},Hr.eastNorthUpToFixedFrame=Hr.localFrameToFixedFrameGenerator("east","north"),Hr.northEastDownToFixedFrame=Hr.localFrameToFixedFrameGenerator("north","east"),Hr.northUpEastToFixedFrame=Hr.localFrameToFixedFrameGenerator("north","up"),Hr.northWestUpToFixedFrame=Hr.localFrameToFixedFrameGenerator("north","west");var en=new Ae,tn=new b.Cartesian3(1,1,1),rn=new c.Matrix4;Hr.headingPitchRollToFixedFrame=function(e,t,r,n,a){n=M.defaultValue(n,Hr.eastNorthUpToFixedFrame);t=Ae.fromHeadingPitchRoll(t,en),t=c.Matrix4.fromTranslationQuaternionRotationScale(b.Cartesian3.ZERO,t,tn,rn);return a=n(e,r,a),c.Matrix4.multiply(a,t,a)};var nn=new c.Matrix4,an=new c.Matrix3;Hr.headingPitchRollQuaternion=function(e,t,r,n,a){n=Hr.headingPitchRollToFixedFrame(e,t,r,n,nn),n=c.Matrix4.getMatrix3(n,an);return Ae.fromRotationMatrix(n,a)};var sn=new b.Cartesian3(1,1,1),on=new b.Cartesian3,un=new c.Matrix4,ln=new c.Matrix4,dn=new c.Matrix3,cn=new Ae;Hr.fixedFrameToHeadingPitchRoll=function(e,t,r,n){t=M.defaultValue(t,o.Ellipsoid.WGS84),r=M.defaultValue(r,Hr.eastNorthUpToFixedFrame),M.defined(n)||(n=new qr);var a=c.Matrix4.getTranslation(e,on);if(b.Cartesian3.equals(a,b.Cartesian3.ZERO))return n.heading=0,n.pitch=0,n.roll=0,n;t=c.Matrix4.inverseTransformation(r(a,t,un),un),e=c.Matrix4.setScale(e,sn,ln),e=c.Matrix4.setTranslation(e,b.Cartesian3.ZERO,e),t=c.Matrix4.multiply(t,e,t),t=Ae.fromRotationMatrix(c.Matrix4.getMatrix3(t,dn),cn),t=Ae.normalize(t,t);return qr.fromQuaternion(t,n)};var fn=d.CesiumMath.TWO_PI/86400,pn=new Ot;Hr.computeTemeToPseudoFixedMatrix=function(e,t){var r=(pn=Ot.addSeconds(e,-Ot.computeTaiMinusUtc(e),pn)).dayNumber,n=pn.secondsOfDay,e=r-2451545,e=43200<=n?(.5+e)/ot.DAYS_PER_JULIAN_CENTURY:(e-.5)/ot.DAYS_PER_JULIAN_CENTURY,r=(24110.54841+e*(8640184.812866+e*(.093104+-62e-7*e)))*fn%d.CesiumMath.TWO_PI+(72921158553e-15+11772758384668e-32*(r-2451545.5))*((n+.5*ot.SECONDS_PER_DAY)%ot.SECONDS_PER_DAY),n=Math.cos(r),r=Math.sin(r);return M.defined(t)?(t[0]=n,t[1]=-r,t[2]=0,t[3]=r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new c.Matrix3(n,r,0,-r,n,0,0,0,1)},Hr.iau2006XysData=new jr,Hr.earthOrientationParameters=Or.NONE;var hn=32.184;Hr.preloadIcrfFixed=function(e){var t=e.start.dayNumber,r=e.start.secondsOfDay+hn,n=e.stop.dayNumber,e=e.stop.secondsOfDay+hn,n=Hr.iau2006XysData.preload(t,r,n,e),e=Hr.earthOrientationParameters.getPromiseToLoad();return M.when.all([n,e])},Hr.computeIcrfToFixedMatrix=function(e,t){M.defined(t)||(t=new c.Matrix3);e=Hr.computeFixedToIcrfMatrix(e,t);if(M.defined(e))return c.Matrix3.transpose(e,t)};var mn=new Lr(0,0,0),yn=new rt(0,0,0,0,0),Cn=new c.Matrix3,vn=new c.Matrix3;Hr.computeFixedToIcrfMatrix=function(e,t){M.defined(t)||(t=new c.Matrix3);var r=Hr.earthOrientationParameters.compute(e,yn);if(M.defined(r)){var n=e.dayNumber,a=e.secondsOfDay+hn,i=Hr.iau2006XysData.computeXysRadians(n,a,mn);if(M.defined(i)){var s=i.x+r.xPoleOffset,o=i.y+r.yPoleOffset,u=1/(1+Math.sqrt(1-s*s-o*o)),l=Cn;l[0]=1-u*s*s,l[3]=-u*s*o,l[6]=s,l[1]=-u*s*o,l[4]=1-u*o*o,l[7]=o,l[2]=-s,l[5]=-o,l[8]=1-u*(s*s+o*o);s=c.Matrix3.fromRotationZ(-i.s,vn),o=c.Matrix3.multiply(l,s,Cn),i=e.dayNumber-2451545,l=(e.secondsOfDay-Ot.computeTaiMinusUtc(e)+r.ut1MinusUtc)/ot.SECONDS_PER_DAY,s=(s=.779057273264+l+.00273781191135448*(i+l))%1*d.CesiumMath.TWO_PI,e=c.Matrix3.fromRotationZ(s,vn),i=c.Matrix3.multiply(o,e,Cn),l=Math.cos(r.xPoleWander),s=Math.cos(r.yPoleWander),o=Math.sin(r.xPoleWander),e=Math.sin(r.yPoleWander),r=n-2451545+a/ot.SECONDS_PER_DAY,n=-47e-6*(r/=36525)*d.CesiumMath.RADIANS_PER_DEGREE/3600,a=Math.cos(n),r=Math.sin(n),n=vn;return n[0]=l*a,n[1]=l*r,n[2]=o,n[3]=-s*r+e*o*a,n[4]=s*a+e*o*r,n[5]=-e*l,n[6]=-e*r-s*o*a,n[7]=e*a-s*o*r,n[8]=s*l,c.Matrix3.multiply(i,n,t)}}};var wn=new c.Cartesian4;Hr.pointToWindowCoordinates=function(e,t,r,n){return(n=Hr.pointToGLWindowCoordinates(e,t,r,n)).y=2*t[5]-n.y,n},Hr.pointToGLWindowCoordinates=function(e,t,r,n){M.defined(n)||(n=new o.Cartesian2);var a=wn;return c.Matrix4.multiplyByVector(e,c.Cartesian4.fromElements(r.x,r.y,r.z,1,a),a),c.Cartesian4.multiplyByScalar(a,1/a.w,a),c.Matrix4.multiplyByVector(t,a,a),o.Cartesian2.fromCartesian4(a,n)};var gn=new b.Cartesian3,xn=new b.Cartesian3,_n=new b.Cartesian3;Hr.rotationMatrixFromPositionVelocity=function(e,t,r,n){r=M.defaultValue(r,o.Ellipsoid.WGS84).geodeticSurfaceNormal(e,gn),e=b.Cartesian3.cross(t,r,xn);b.Cartesian3.equalsEpsilon(e,b.Cartesian3.ZERO,d.CesiumMath.EPSILON6)&&(e=b.Cartesian3.clone(b.Cartesian3.UNIT_X,e));r=b.Cartesian3.cross(e,t,_n);return b.Cartesian3.normalize(r,r),b.Cartesian3.cross(t,r,e),b.Cartesian3.negate(e,e),b.Cartesian3.normalize(e,e),M.defined(n)||(n=new c.Matrix3),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=e.x,n[4]=e.y,n[5]=e.z,n[6]=r.x,n[7]=r.y,n[8]=r.z,n};var En=new c.Matrix4(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),Sn=new b.Cartographic,On=new b.Cartesian3,An=new b.Cartesian3,Rn=new c.Matrix3,Mn=new c.Matrix4,bn=new c.Matrix4;Hr.basisTo2D=function(e,t,r){var n=c.Matrix4.getTranslation(t,An),a=e.ellipsoid,i=a.cartesianToCartographic(n,Sn),i=e.project(i,On);b.Cartesian3.fromElements(i.z,i.x,i.y,i);a=Hr.eastNorthUpToFixedFrame(n,a,Mn),a=c.Matrix4.inverseTransformation(a,bn),t=c.Matrix4.getMatrix3(t,Rn),t=c.Matrix4.multiplyByMatrix3(a,t,r);return c.Matrix4.multiply(En,t,r),c.Matrix4.setTranslation(r,i,r),r},Hr.wgs84To2DModelMatrix=function(e,t,r){var n=e.ellipsoid,a=Hr.eastNorthUpToFixedFrame(t,n,Mn),a=c.Matrix4.inverseTransformation(a,bn),t=n.cartesianToCartographic(t,Sn),t=e.project(t,On);b.Cartesian3.fromElements(t.z,t.x,t.y,t);t=c.Matrix4.fromTranslation(t,Mn);return c.Matrix4.multiply(En,a,r),c.Matrix4.multiply(t,r,r),r},e.BoundingSphere=T,e.FeatureDetection=Oe,e.GeographicProjection=t,e.Intersect=a,e.Interval=i,e.Quaternion=Ae,e.Resource=vr,e.Transforms=Hr,e.buildModuleUrl=Br});
