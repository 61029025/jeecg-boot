define(["exports","./when-54c2dc71","./Math-fc8cecf5","./Cartographic-83b6e736","./arrayRemoveDuplicates-ebc732b0","./PolylinePipeline-7db07635"],function(e,f,A,C,w,P){"use strict";var i={};var b=new C.Cartographic,M=new C.Cartographic;function E(e,i,t,r){var a=(i=w.arrayRemoveDuplicates(i,C.Cartesian3.equalsEpsilon)).length;if(!(a<2)){var n=f.defined(r),o=f.defined(t),h=new Array(a),l=new Array(a),s=new Array(a),g=i[0];h[0]=g;var p=e.cartesianToCartographic(g,b);o&&(p.height=t[0]),l[0]=p.height,s[0]=n?r[0]:0;for(var c,u,d=l[0]===s[0],v=1,y=1;y<a;++y){var m=i[y],P=e.cartesianToCartographic(m,M);o&&(P.height=t[y]),d=d&&0===P.height,c=p,u=P,A.CesiumMath.equalsEpsilon(c.latitude,u.latitude,A.CesiumMath.EPSILON10)&&A.CesiumMath.equalsEpsilon(c.longitude,u.longitude,A.CesiumMath.EPSILON10)?p.height<P.height&&(l[v-1]=P.height):(h[v]=m,l[v]=P.height,s[v]=n?r[y]:0,d=d&&l[v]===s[v],C.Cartographic.clone(P,p),++v)}if(!(d||v<2))return h.length=v,l.length=v,s.length=v,{positions:h,topHeights:l,bottomHeights:s}}}var F=new Array(2),H=new Array(2),L={positions:void 0,height:void 0,granularity:void 0,ellipsoid:void 0};i.computePositions=function(e,i,t,r,a,n){var o=E(e,i,t,r);if(f.defined(o)){i=o.positions,t=o.topHeights,r=o.bottomHeights;var h,l,s=i.length,o=s-2,g=A.CesiumMath.chordLength(a,e.maximumRadius),p=L;if(p.minDistance=g,p.ellipsoid=e,n){for(var c=0,u=0;u<s-1;u++)c+=P.PolylinePipeline.numberOfPoints(i[u],i[u+1],g)+1;h=new Float64Array(3*c),l=new Float64Array(3*c);var d=F,v=H;p.positions=d,p.height=v;var y=0;for(u=0;u<s-1;u++){d[0]=i[u],d[1]=i[u+1],v[0]=t[u],v[1]=t[u+1];var m=P.PolylinePipeline.generateArc(p);h.set(m,y),v[0]=r[u],v[1]=r[u+1],l.set(P.PolylinePipeline.generateArc(p),y),y+=m.length}}else p.positions=i,p.height=t,h=new Float64Array(P.PolylinePipeline.generateArc(p)),p.height=r,l=new Float64Array(P.PolylinePipeline.generateArc(p));return{bottomPositions:l,topPositions:h,numCorners:o}}},e.WallGeometryLibrary=i});
