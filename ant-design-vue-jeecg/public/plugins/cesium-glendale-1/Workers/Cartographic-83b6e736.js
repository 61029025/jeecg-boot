define(["exports","./when-54c2dc71","./Check-6c0211bc","./Math-fc8cecf5"],function(e,S,i,b){"use strict";function A(e,n,t){this.x=S.defaultValue(e,0),this.y=S.defaultValue(n,0),this.z=S.defaultValue(t,0)}A.fromSpherical=function(e,n){S.defined(n)||(n=new A);var t=e.clock,r=e.cone,a=S.defaultValue(e.magnitude,1),e=a*Math.sin(r);return n.x=e*Math.cos(t),n.y=e*Math.sin(t),n.z=a*Math.cos(r),n},A.fromElements=function(e,n,t,r){return S.defined(r)?(r.x=e,r.y=n,r.z=t,r):new A(e,n,t)},A.fromCartesian4=A.clone=function(e,n){if(S.defined(e))return S.defined(n)?(n.x=e.x,n.y=e.y,n.z=e.z,n):new A(e.x,e.y,e.z)},A.packedLength=3,A.pack=function(e,n,t){return t=S.defaultValue(t,0),n[t++]=e.x,n[t++]=e.y,n[t]=e.z,n},A.unpack=function(e,n,t){return n=S.defaultValue(n,0),S.defined(t)||(t=new A),t.x=e[n++],t.y=e[n++],t.z=e[n],t},A.packArray=function(e,n){var t=e.length,r=3*t;if(S.defined(n)){if(!Array.isArray(n)&&n.length!==r)throw new i.DeveloperError("If result is a typed array, it must have exactly array.length * 3 elements");n.length!==r&&(n.length=r)}else n=new Array(r);for(var a=0;a<t;++a)A.pack(e[a],n,3*a);return n},A.unpackArray=function(e,n){var t=e.length;S.defined(n)?n.length=t/3:n=new Array(t/3);for(var r=0;r<t;r+=3){var a=r/3;n[a]=A.unpack(e,r,n[a])}return n},A.fromArray=A.unpack,A.maximumComponent=function(e){return Math.max(e.x,e.y,e.z)},A.minimumComponent=function(e){return Math.min(e.x,e.y,e.z)},A.minimumByComponent=function(e,n,t){return t.x=Math.min(e.x,n.x),t.y=Math.min(e.y,n.y),t.z=Math.min(e.z,n.z),t},A.maximumByComponent=function(e,n,t){return t.x=Math.max(e.x,n.x),t.y=Math.max(e.y,n.y),t.z=Math.max(e.z,n.z),t},A.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z},A.magnitude=function(e){return Math.sqrt(A.magnitudeSquared(e))};var t=new A;A.distance=function(e,n){return A.subtract(e,n,t),A.magnitude(t)},A.distanceSquared=function(e,n){return A.subtract(e,n,t),A.magnitudeSquared(t)},A.normalize=function(e,n){var t=A.magnitude(e);return 0===t?(n.x=e.x,n.y=e.y,n.z=e.z):(n.x=e.x/t,n.y=e.y/t,n.z=e.z/t),n},A.dot=function(e,n){return e.x*n.x+e.y*n.y+e.z*n.z},A.multiplyComponents=function(e,n,t){return t.x=e.x*n.x,t.y=e.y*n.y,t.z=e.z*n.z,t},A.divideComponents=function(e,n,t){return t.x=e.x/n.x,t.y=e.y/n.y,t.z=e.z/n.z,t},A.add=function(e,n,t){return t.x=e.x+n.x,t.y=e.y+n.y,t.z=e.z+n.z,t},A.subtract=function(e,n,t){return t.x=e.x-n.x,t.y=e.y-n.y,t.z=e.z-n.z,t},A.multiplyByScalar=function(e,n,t){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t},A.divideByScalar=function(e,n,t){return t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,t},A.negate=function(e,n){return n.x=-e.x,n.y=-e.y,n.z=-e.z,n},A.abs=function(e,n){return n.x=Math.abs(e.x),n.y=Math.abs(e.y),n.z=Math.abs(e.z),n};var a=new A;A.lerp=function(e,n,t,r){return A.multiplyByScalar(n,t,a),r=A.multiplyByScalar(e,1-t,r),A.add(a,r,r)};var r=new A,u=new A;A.angleBetween=function(e,n){A.normalize(e,r),A.normalize(n,u);e=A.dot(r,u),n=A.magnitude(A.cross(r,u,r));return Math.atan2(n,e)};var o=new A;A.mostOrthogonalAxis=function(e,n){e=A.normalize(e,o);return A.abs(e,e),n=e.x<=e.y?e.x<=e.z?A.clone(A.UNIT_X,n):A.clone(A.UNIT_Z,n):e.y<=e.z?A.clone(A.UNIT_Y,n):A.clone(A.UNIT_Z,n)},A.projectVector=function(e,n,t){e=A.dot(e,n)/A.dot(n,n);return A.multiplyByScalar(n,e,t)},A.equals=function(e,n){return e===n||S.defined(e)&&S.defined(n)&&e.x===n.x&&e.y===n.y&&e.z===n.z},A.equalsArray=function(e,n,t){return e.x===n[t]&&e.y===n[t+1]&&e.z===n[t+2]},A.equalsEpsilon=function(e,n,t,r){return e===n||S.defined(e)&&S.defined(n)&&b.CesiumMath.equalsEpsilon(e.x,n.x,t,r)&&b.CesiumMath.equalsEpsilon(e.y,n.y,t,r)&&b.CesiumMath.equalsEpsilon(e.z,n.z,t,r)},A.cross=function(e,n,t){var r=e.x,a=e.y,i=e.z,u=n.x,o=n.y,e=n.z,n=a*e-i*o,e=i*u-r*e,u=r*o-a*u;return t.x=n,t.y=e,t.z=u,t},A.midpoint=function(e,n,t){return t.x=.5*(e.x+n.x),t.y=.5*(e.y+n.y),t.z=.5*(e.z+n.z),t},A.fromDegrees=function(e,n,t,r,a){return e=b.CesiumMath.toRadians(e),n=b.CesiumMath.toRadians(n),A.fromRadians(e,n,t,r,a)};var d=new A,l=new A,f=new A(40680631590769,40680631590769,40408299984661.445);A.fromRadians=function(e,n,t,r,a){t=S.defaultValue(t,0);var i=S.defined(r)?r.radiiSquared:f,r=Math.cos(n);d.x=r*Math.cos(e),d.y=r*Math.sin(e),d.z=Math.sin(n),d=A.normalize(d,d),A.multiplyComponents(i,d,l);i=Math.sqrt(A.dot(d,l));return l=A.divideByScalar(l,i,l),d=A.multiplyByScalar(d,t,d),S.defined(a)||(a=new A),A.add(l,d,a)},A.fromDegreesArray=function(e,n,t){var r=e.length;S.defined(t)?t.length=r/2:t=new Array(r/2);for(var a=0;a<r;a+=2){var i=e[a],u=e[a+1],o=a/2;t[o]=A.fromDegrees(i,u,0,n,t[o])}return t},A.fromRadiansArray=function(e,n,t){var r=e.length;S.defined(t)?t.length=r/2:t=new Array(r/2);for(var a=0;a<r;a+=2){var i=e[a],u=e[a+1],o=a/2;t[o]=A.fromRadians(i,u,0,n,t[o])}return t},A.fromDegreesArrayHeights=function(e,n,t){var r=e.length;S.defined(t)?t.length=r/3:t=new Array(r/3);for(var a=0;a<r;a+=3){var i=e[a],u=e[a+1],o=e[a+2],d=a/3;t[d]=A.fromDegrees(i,u,o,n,t[d])}return t},A.fromRadiansArrayHeights=function(e,n,t){var r=e.length;S.defined(t)?t.length=r/3:t=new Array(r/3);for(var a=0;a<r;a+=3){var i=e[a],u=e[a+1],o=e[a+2],d=a/3;t[d]=A.fromRadians(i,u,o,n,t[d])}return t},A.ZERO=Object.freeze(new A(0,0,0)),A.UNIT_X=Object.freeze(new A(1,0,0)),A.UNIT_Y=Object.freeze(new A(0,1,0)),A.UNIT_Z=Object.freeze(new A(0,0,1)),A.prototype.clone=function(e){return A.clone(this,e)},A.prototype.equals=function(e){return A.equals(this,e)},A.prototype.equalsEpsilon=function(e,n,t){return A.equalsEpsilon(this,e,n,t)},A.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};var R=new A,E=new A;function s(e,n,t,r,a){var i=e.x,u=e.y,o=e.z,d=n.x,l=n.y,n=n.z,f=i*i*d*d,s=u*u*l*l,c=o*o*n*n,d=f+s+c,l=Math.sqrt(1/d),n=A.multiplyByScalar(e,l,R);if(d<r)return isFinite(l)?A.clone(n,a):void 0;var y=t.x,h=t.y,m=t.z,t=E;t.x=n.x*y*2,t.y=n.y*h*2,t.z=n.z*m*2;var z,x,g,p,v,w,M,q=(1-l)*A.magnitude(e)/(.5*A.magnitude(t)),C=0;do{C=(z=f*(v=(x=1/(1+(q-=C)*y))*x)+s*(w=(g=1/(1+q*h))*g)+c*(M=(p=1/(1+q*m))*p)-1)/(-2*(f*(v*x)*y+s*(w*g)*h+c*(M*p)*m))}while(Math.abs(z)>b.CesiumMath.EPSILON12);return S.defined(a)?(a.x=i*x,a.y=u*g,a.z=o*p,a):new A(i*x,u*g,o*p)}function c(e,n,t){this.longitude=S.defaultValue(e,0),this.latitude=S.defaultValue(n,0),this.height=S.defaultValue(t,0)}c.fromRadians=function(e,n,t,r){return t=S.defaultValue(t,0),S.defined(r)?(r.longitude=e,r.latitude=n,r.height=t,r):new c(e,n,t)},c.fromDegrees=function(e,n,t,r){return e=b.CesiumMath.toRadians(e),n=b.CesiumMath.toRadians(n),c.fromRadians(e,n,t,r)};var y=new A,h=new A,m=new A,z=new A(1/6378137,1/6378137,1/6356752.314245179),x=new A(1/40680631590769,1/40680631590769,1/40408299984661.445),g=b.CesiumMath.EPSILON1;c.fromCartesian=function(e,n,t){var r=S.defined(n)?n.oneOverRadii:z,a=S.defined(n)?n.oneOverRadiiSquared:x,r=s(e,r,a,S.defined(n)?n._centerToleranceSquared:g,h);if(S.defined(r)){n=A.multiplyComponents(r,a,y),n=A.normalize(n,n),a=A.subtract(e,r,m),r=Math.atan2(n.y,n.x),n=Math.asin(n.z),a=b.CesiumMath.sign(A.dot(a,e))*A.magnitude(a);return S.defined(t)?(t.longitude=r,t.latitude=n,t.height=a,t):new c(r,n,a)}},c.toCartesian=function(e,n,t){return A.fromRadians(e.longitude,e.latitude,e.height,n,t)},c.clone=function(e,n){if(S.defined(e))return S.defined(n)?(n.longitude=e.longitude,n.latitude=e.latitude,n.height=e.height,n):new c(e.longitude,e.latitude,e.height)},c.equals=function(e,n){return e===n||S.defined(e)&&S.defined(n)&&e.longitude===n.longitude&&e.latitude===n.latitude&&e.height===n.height},c.equalsEpsilon=function(e,n,t){return t=S.defaultValue(t,0),e===n||S.defined(e)&&S.defined(n)&&Math.abs(e.longitude-n.longitude)<=t&&Math.abs(e.latitude-n.latitude)<=t&&Math.abs(e.height-n.height)<=t},c.ZERO=Object.freeze(new c(0,0,0)),c.prototype.clone=function(e){return c.clone(this,e)},c.prototype.equals=function(e){return c.equals(this,e)},c.prototype.equalsEpsilon=function(e,n){return c.equalsEpsilon(this,e,n)},c.prototype.toString=function(){return"("+this.longitude+", "+this.latitude+", "+this.height+")"},e.Cartesian3=A,e.Cartographic=c,e.scaleToGeodeticSurface=s});
