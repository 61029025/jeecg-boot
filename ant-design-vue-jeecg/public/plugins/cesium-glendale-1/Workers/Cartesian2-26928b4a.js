define(["exports","./when-54c2dc71","./Check-6c0211bc","./Math-fc8cecf5","./Cartographic-83b6e736"],function(e,l,r,f,u){"use strict";function n(e,t,a,n){t=l.defaultValue(t,0),a=l.defaultValue(a,0),n=l.defaultValue(n,0),e._radii=new u.Cartesian3(t,a,n),e._radiiSquared=new u.Cartesian3(t*t,a*a,n*n),e._radiiToTheFourth=new u.Cartesian3(t*t*t*t,a*a*a*a,n*n*n*n),e._oneOverRadii=new u.Cartesian3(0===t?0:1/t,0===a?0:1/a,0===n?0:1/n),e._oneOverRadiiSquared=new u.Cartesian3(0===t?0:1/(t*t),0===a?0:1/(a*a),0===n?0:1/(n*n)),e._minimumRadius=Math.min(t,a,n),e._maximumRadius=Math.max(t,a,n),e._centerToleranceSquared=f.CesiumMath.EPSILON1,0!==e._radiiSquared.z&&(e._squaredXOverSquaredZ=e._radiiSquared.x/e._radiiSquared.z)}function m(e,t,a){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,n(this,e,t,a)}Object.defineProperties(m.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}}),m.clone=function(e,t){if(l.defined(e)){var a=e._radii;return l.defined(t)?(u.Cartesian3.clone(a,t._radii),u.Cartesian3.clone(e._radiiSquared,t._radiiSquared),u.Cartesian3.clone(e._radiiToTheFourth,t._radiiToTheFourth),u.Cartesian3.clone(e._oneOverRadii,t._oneOverRadii),u.Cartesian3.clone(e._oneOverRadiiSquared,t._oneOverRadiiSquared),t._minimumRadius=e._minimumRadius,t._maximumRadius=e._maximumRadius,t._centerToleranceSquared=e._centerToleranceSquared,t):new m(a.x,a.y,a.z)}},m.fromCartesian3=function(e,t){return l.defined(t)||(t=new m),l.defined(e)&&n(t,e.x,e.y,e.z),t},m.WGS84=Object.freeze(new m(6378137,6378137,6356752.314245179)),m.UNIT_SPHERE=Object.freeze(new m(1,1,1)),m.MOON=Object.freeze(new m(f.CesiumMath.LUNAR_RADIUS,f.CesiumMath.LUNAR_RADIUS,f.CesiumMath.LUNAR_RADIUS)),m.prototype.clone=function(e){return m.clone(this,e)},m.packedLength=u.Cartesian3.packedLength,m.pack=function(e,t,a){return a=l.defaultValue(a,0),u.Cartesian3.pack(e._radii,t,a),t},m.unpack=function(e,t,a){t=l.defaultValue(t,0);t=u.Cartesian3.unpack(e,t);return m.fromCartesian3(t,a)},m.prototype.geocentricSurfaceNormal=u.Cartesian3.normalize,m.prototype.geodeticSurfaceNormalCartographic=function(e,t){var a=e.longitude,n=e.latitude,i=Math.cos(n),e=i*Math.cos(a),a=i*Math.sin(a),n=Math.sin(n);return l.defined(t)||(t=new u.Cartesian3),t.x=e,t.y=a,t.z=n,u.Cartesian3.normalize(t,t)},m.prototype.geodeticSurfaceNormal=function(e,t){if(!u.Cartesian3.equalsEpsilon(e,u.Cartesian3.ZERO,f.CesiumMath.EPSILON14))return l.defined(t)||(t=new u.Cartesian3),t=u.Cartesian3.multiplyComponents(e,this._oneOverRadiiSquared,t),u.Cartesian3.normalize(t,t)};var o=new u.Cartesian3,s=new u.Cartesian3;m.prototype.cartographicToCartesian=function(e,t){var a=o,n=s;this.geodeticSurfaceNormalCartographic(e,a),u.Cartesian3.multiplyComponents(this._radiiSquared,a,n);var i=Math.sqrt(u.Cartesian3.dot(a,n));return u.Cartesian3.divideByScalar(n,i,n),u.Cartesian3.multiplyByScalar(a,e.height,a),l.defined(t)||(t=new u.Cartesian3),u.Cartesian3.add(n,a,t)},m.prototype.cartographicArrayToCartesianArray=function(e,t){var a=e.length;l.defined(t)?t.length=a:t=new Array(a);for(var n=0;n<a;n++)t[n]=this.cartographicToCartesian(e[n],t[n]);return t};var d=new u.Cartesian3,h=new u.Cartesian3,c=new u.Cartesian3;m.prototype.cartesianToCartographic=function(e,t){var a=this.scaleToGeodeticSurface(e,h);if(l.defined(a)){var n=this.geodeticSurfaceNormal(a,d),i=u.Cartesian3.subtract(e,a,c),a=Math.atan2(n.y,n.x),n=Math.asin(n.z),i=f.CesiumMath.sign(u.Cartesian3.dot(i,e))*u.Cartesian3.magnitude(i);return l.defined(t)?(t.longitude=a,t.latitude=n,t.height=i,t):new u.Cartographic(a,n,i)}},m.prototype.cartesianArrayToCartographicArray=function(e,t){var a=e.length;l.defined(t)?t.length=a:t=new Array(a);for(var n=0;n<a;++n)t[n]=this.cartesianToCartographic(e[n],t[n]);return t},m.prototype.scaleToGeodeticSurface=function(e,t){return u.scaleToGeodeticSurface(e,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,t)},m.prototype.scaleToGeocentricSurface=function(e,t){l.defined(t)||(t=new u.Cartesian3);var a=e.x,n=e.y,i=e.z,r=this._oneOverRadiiSquared,r=1/Math.sqrt(a*a*r.x+n*n*r.y+i*i*r.z);return u.Cartesian3.multiplyByScalar(e,r,t)},m.prototype.transformPositionToScaledSpace=function(e,t){return l.defined(t)||(t=new u.Cartesian3),u.Cartesian3.multiplyComponents(e,this._oneOverRadii,t)},m.prototype.transformPositionFromScaledSpace=function(e,t){return l.defined(t)||(t=new u.Cartesian3),u.Cartesian3.multiplyComponents(e,this._radii,t)},m.prototype.equals=function(e){return this===e||l.defined(e)&&u.Cartesian3.equals(this._radii,e._radii)},m.prototype.toString=function(){return this._radii.toString()},m.prototype.getSurfaceNormalIntersectionWithZAxis=function(e,t,a){t=l.defaultValue(t,0);var n=this._squaredXOverSquaredZ;if(l.defined(a)||(a=new u.Cartesian3),a.x=0,a.y=0,a.z=e.z*(1-n),!(Math.abs(a.z)>=this._radii.z-t))return a};var p=[.14887433898163,.43339539412925,.67940956829902,.86506336668898,.97390652851717,0],C=[.29552422471475,.26926671930999,.21908636251598,.14945134915058,.066671344308684,0];function M(e,t,a){for(var n=.5*(t+e),i=.5*(t-e),r=0,u=0;u<5;u++){var o=i*p[u];r+=C[u]*(a(n+o)+a(n-o))}return r*=i}function y(e,t,a,n){this.west=l.defaultValue(e,0),this.south=l.defaultValue(t,0),this.east=l.defaultValue(a,0),this.north=l.defaultValue(n,0)}m.prototype.surfaceArea=function(e){for(var t=e.west,i=e.east,a=e.south,n=e.north;i<t;)i+=f.CesiumMath.TWO_PI;var e=this._radiiSquared,r=e.x,u=e.y,o=e.z,s=r*u;return M(a,n,function(e){var a=Math.cos(e),n=Math.sin(e);return Math.cos(e)*M(t,i,function(e){var t=Math.cos(e),e=Math.sin(e);return Math.sqrt(s*n*n+o*(u*t*t+r*e*e)*a*a)})})},Object.defineProperties(y.prototype,{width:{get:function(){return y.computeWidth(this)}},height:{get:function(){return y.computeHeight(this)}}}),y.packedLength=4,y.pack=function(e,t,a){return a=l.defaultValue(a,0),t[a++]=e.west,t[a++]=e.south,t[a++]=e.east,t[a]=e.north,t},y.unpack=function(e,t,a){return t=l.defaultValue(t,0),l.defined(a)||(a=new y),a.west=e[t++],a.south=e[t++],a.east=e[t++],a.north=e[t],a},y.computeWidth=function(e){var t=e.east,e=e.west;return t<e&&(t+=f.CesiumMath.TWO_PI),t-e},y.computeHeight=function(e){return e.north-e.south},y.fromDegrees=function(e,t,a,n,i){return e=f.CesiumMath.toRadians(l.defaultValue(e,0)),t=f.CesiumMath.toRadians(l.defaultValue(t,0)),a=f.CesiumMath.toRadians(l.defaultValue(a,0)),n=f.CesiumMath.toRadians(l.defaultValue(n,0)),l.defined(i)?(i.west=e,i.south=t,i.east=a,i.north=n,i):new y(e,t,a,n)},y.fromRadians=function(e,t,a,n,i){return l.defined(i)?(i.west=l.defaultValue(e,0),i.south=l.defaultValue(t,0),i.east=l.defaultValue(a,0),i.north=l.defaultValue(n,0),i):new y(e,t,a,n)},y.fromCartographicArray=function(e,t){for(var a=Number.MAX_VALUE,n=-Number.MAX_VALUE,i=Number.MAX_VALUE,r=-Number.MAX_VALUE,u=Number.MAX_VALUE,o=-Number.MAX_VALUE,s=0,d=e.length;s<d;s++)var h=e[s],a=Math.min(a,h.longitude),n=Math.max(n,h.longitude),u=Math.min(u,h.latitude),o=Math.max(o,h.latitude),h=0<=h.longitude?h.longitude:h.longitude+f.CesiumMath.TWO_PI,i=Math.min(i,h),r=Math.max(r,h);return r-i<n-a&&(a=i,(n=r)>f.CesiumMath.PI&&(n-=f.CesiumMath.TWO_PI),a>f.CesiumMath.PI&&(a-=f.CesiumMath.TWO_PI)),l.defined(t)?(t.west=a,t.south=u,t.east=n,t.north=o,t):new y(a,u,n,o)},y.fromCartesianArray=function(e,t,a){t=l.defaultValue(t,m.WGS84);for(var n=Number.MAX_VALUE,i=-Number.MAX_VALUE,r=Number.MAX_VALUE,u=-Number.MAX_VALUE,o=Number.MAX_VALUE,s=-Number.MAX_VALUE,d=0,h=e.length;d<h;d++)var c=t.cartesianToCartographic(e[d]),n=Math.min(n,c.longitude),i=Math.max(i,c.longitude),o=Math.min(o,c.latitude),s=Math.max(s,c.latitude),c=0<=c.longitude?c.longitude:c.longitude+f.CesiumMath.TWO_PI,r=Math.min(r,c),u=Math.max(u,c);return u-r<i-n&&(n=r,(i=u)>f.CesiumMath.PI&&(i-=f.CesiumMath.TWO_PI),n>f.CesiumMath.PI&&(n-=f.CesiumMath.TWO_PI)),l.defined(a)?(a.west=n,a.south=o,a.east=i,a.north=s,a):new y(n,o,i,s)},y.clone=function(e,t){if(l.defined(e))return l.defined(t)?(t.west=e.west,t.south=e.south,t.east=e.east,t.north=e.north,t):new y(e.west,e.south,e.east,e.north)},y.equalsEpsilon=function(e,t,a){return a=l.defaultValue(a,0),e===t||l.defined(e)&&l.defined(t)&&Math.abs(e.west-t.west)<=a&&Math.abs(e.south-t.south)<=a&&Math.abs(e.east-t.east)<=a&&Math.abs(e.north-t.north)<=a},y.prototype.clone=function(e){return y.clone(this,e)},y.prototype.equals=function(e){return y.equals(this,e)},y.equals=function(e,t){return e===t||l.defined(e)&&l.defined(t)&&e.west===t.west&&e.south===t.south&&e.east===t.east&&e.north===t.north},y.prototype.equalsEpsilon=function(e,t){return y.equalsEpsilon(this,e,t)},y.validate=function(e){},y.southwest=function(e,t){return l.defined(t)?(t.longitude=e.west,t.latitude=e.south,t.height=0,t):new u.Cartographic(e.west,e.south)},y.northwest=function(e,t){return l.defined(t)?(t.longitude=e.west,t.latitude=e.north,t.height=0,t):new u.Cartographic(e.west,e.north)},y.northeast=function(e,t){return l.defined(t)?(t.longitude=e.east,t.latitude=e.north,t.height=0,t):new u.Cartographic(e.east,e.north)},y.southeast=function(e,t){return l.defined(t)?(t.longitude=e.east,t.latitude=e.south,t.height=0,t):new u.Cartographic(e.east,e.south)},y.center=function(e,t){var a=e.east,n=e.west;a<n&&(a+=f.CesiumMath.TWO_PI);a=f.CesiumMath.negativePiToPi(.5*(n+a)),e=.5*(e.south+e.north);return l.defined(t)?(t.longitude=a,t.latitude=e,t.height=0,t):new u.Cartographic(a,e)},y.intersection=function(e,t,a){var n=e.east,i=e.west,r=t.east,u=t.west;n<i&&0<r?n+=f.CesiumMath.TWO_PI:r<u&&0<n&&(r+=f.CesiumMath.TWO_PI),n<i&&u<0?u+=f.CesiumMath.TWO_PI:r<u&&i<0&&(i+=f.CesiumMath.TWO_PI);u=f.CesiumMath.negativePiToPi(Math.max(i,u)),n=f.CesiumMath.negativePiToPi(Math.min(n,r));if(!((e.west<e.east||t.west<t.east)&&n<=u)){r=Math.max(e.south,t.south),t=Math.min(e.north,t.north);if(!(t<=r))return l.defined(a)?(a.west=u,a.south=r,a.east=n,a.north=t,a):new y(u,r,n,t)}},y.simpleIntersection=function(e,t,a){var n=Math.max(e.west,t.west),i=Math.max(e.south,t.south),r=Math.min(e.east,t.east),t=Math.min(e.north,t.north);if(!(t<=i||r<=n))return l.defined(a)?(a.west=n,a.south=i,a.east=r,a.north=t,a):new y(n,i,r,t)},y.union=function(e,t,a){l.defined(a)||(a=new y);var n=e.east,i=e.west,r=t.east,u=t.west;n<i&&0<r?n+=f.CesiumMath.TWO_PI:r<u&&0<n&&(r+=f.CesiumMath.TWO_PI),n<i&&u<0?u+=f.CesiumMath.TWO_PI:r<u&&i<0&&(i+=f.CesiumMath.TWO_PI);u=f.CesiumMath.convertLongitudeRange(Math.min(i,u)),r=f.CesiumMath.convertLongitudeRange(Math.max(n,r));return a.west=u,a.south=Math.min(e.south,t.south),a.east=r,a.north=Math.max(e.north,t.north),a},y.expand=function(e,t,a){return l.defined(a)||(a=new y),a.west=Math.min(e.west,t.longitude),a.south=Math.min(e.south,t.latitude),a.east=Math.max(e.east,t.longitude),a.north=Math.max(e.north,t.latitude),a},y.contains=function(e,t){var a=t.longitude,n=t.latitude,i=e.west,t=e.east;return t<i&&(t+=f.CesiumMath.TWO_PI,a<0&&(a+=f.CesiumMath.TWO_PI)),(i<a||f.CesiumMath.equalsEpsilon(a,i,f.CesiumMath.EPSILON14))&&(a<t||f.CesiumMath.equalsEpsilon(a,t,f.CesiumMath.EPSILON14))&&n>=e.south&&n<=e.north};var g=new u.Cartographic;function _(e,t){this.x=l.defaultValue(e,0),this.y=l.defaultValue(t,0)}y.subsample=function(e,t,a,n){t=l.defaultValue(t,m.WGS84),a=l.defaultValue(a,0),l.defined(n)||(n=[]);var i=0,r=e.north,u=e.south,o=e.east,s=e.west,d=g;d.height=a,d.longitude=s,d.latitude=r,n[i]=t.cartographicToCartesian(d,n[i]),i++,d.longitude=o,n[i]=t.cartographicToCartesian(d,n[i]),i++,d.latitude=u,n[i]=t.cartographicToCartesian(d,n[i]),i++,d.longitude=s,n[i]=t.cartographicToCartesian(d,n[i]),i++,d.latitude=r<0?r:0<u?u:0;for(var h=1;h<8;++h)d.longitude=-Math.PI+h*f.CesiumMath.PI_OVER_TWO,y.contains(e,d)&&(n[i]=t.cartographicToCartesian(d,n[i]),i++);return 0===d.latitude&&(d.longitude=s,n[i]=t.cartographicToCartesian(d,n[i]),i++,d.longitude=o,n[i]=t.cartographicToCartesian(d,n[i]),i++),n.length=i,n},y.MAX_VALUE=Object.freeze(new y(-Math.PI,-f.CesiumMath.PI_OVER_TWO,Math.PI,f.CesiumMath.PI_OVER_TWO)),_.fromElements=function(e,t,a){return l.defined(a)?(a.x=e,a.y=t,a):new _(e,t)},_.fromCartesian3=_.clone=function(e,t){if(l.defined(e))return l.defined(t)?(t.x=e.x,t.y=e.y,t):new _(e.x,e.y)},_.fromCartesian4=_.clone,_.packedLength=2,_.pack=function(e,t,a){return a=l.defaultValue(a,0),t[a++]=e.x,t[a]=e.y,t},_.unpack=function(e,t,a){return t=l.defaultValue(t,0),l.defined(a)||(a=new _),a.x=e[t++],a.y=e[t],a},_.packArray=function(e,t){var a=e.length,n=2*a;if(l.defined(t)){if(!Array.isArray(t)&&t.length!==n)throw new r.DeveloperError("If result is a typed array, it must have exactly array.length * 2 elements");t.length!==n&&(t.length=n)}else t=new Array(n);for(var i=0;i<a;++i)_.pack(e[i],t,2*i);return t},_.unpackArray=function(e,t){var a=e.length;l.defined(t)?t.length=a/2:t=new Array(a/2);for(var n=0;n<a;n+=2){var i=n/2;t[i]=_.unpack(e,n,t[i])}return t},_.fromArray=_.unpack,_.maximumComponent=function(e){return Math.max(e.x,e.y)},_.minimumComponent=function(e){return Math.min(e.x,e.y)},_.minimumByComponent=function(e,t,a){return a.x=Math.min(e.x,t.x),a.y=Math.min(e.y,t.y),a},_.maximumByComponent=function(e,t,a){return a.x=Math.max(e.x,t.x),a.y=Math.max(e.y,t.y),a},_.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},_.magnitude=function(e){return Math.sqrt(_.magnitudeSquared(e))};var a=new _;_.distance=function(e,t){return _.subtract(e,t,a),_.magnitude(a)},_.distanceSquared=function(e,t){return _.subtract(e,t,a),_.magnitudeSquared(a)},_.normalize=function(e,t){var a=_.magnitude(e);return t.x=e.x/a,t.y=e.y/a,t},_.dot=function(e,t){return e.x*t.x+e.y*t.y},_.multiplyComponents=function(e,t,a){return a.x=e.x*t.x,a.y=e.y*t.y,a},_.divideComponents=function(e,t,a){return a.x=e.x/t.x,a.y=e.y/t.y,a},_.add=function(e,t,a){return a.x=e.x+t.x,a.y=e.y+t.y,a},_.subtract=function(e,t,a){return a.x=e.x-t.x,a.y=e.y-t.y,a},_.multiplyByScalar=function(e,t,a){return a.x=e.x*t,a.y=e.y*t,a},_.divideByScalar=function(e,t,a){return a.x=e.x/t,a.y=e.y/t,a},_.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t},_.abs=function(e,t){return t.x=Math.abs(e.x),t.y=Math.abs(e.y),t};var i=new _;_.lerp=function(e,t,a,n){return _.multiplyByScalar(t,a,i),n=_.multiplyByScalar(e,1-a,n),_.add(i,n,n)};var w=new _,x=new _;_.angleBetween=function(e,t){return _.normalize(e,w),_.normalize(t,x),f.CesiumMath.acosClamped(_.dot(w,x))};var v=new _;_.mostOrthogonalAxis=function(e,t){e=_.normalize(e,v);return _.abs(e,e),t=e.x<=e.y?_.clone(_.UNIT_X,t):_.clone(_.UNIT_Y,t)},_.equals=function(e,t){return e===t||l.defined(e)&&l.defined(t)&&e.x===t.x&&e.y===t.y},_.equalsArray=function(e,t,a){return e.x===t[a]&&e.y===t[a+1]},_.equalsEpsilon=function(e,t,a,n){return e===t||l.defined(e)&&l.defined(t)&&f.CesiumMath.equalsEpsilon(e.x,t.x,a,n)&&f.CesiumMath.equalsEpsilon(e.y,t.y,a,n)},_.ZERO=Object.freeze(new _(0,0)),_.UNIT_X=Object.freeze(new _(1,0)),_.UNIT_Y=Object.freeze(new _(0,1)),_.prototype.clone=function(e){return _.clone(this,e)},_.prototype.equals=function(e){return _.equals(this,e)},_.prototype.equalsEpsilon=function(e,t,a){return _.equalsEpsilon(this,e,t,a)},_.prototype.toString=function(){return"("+this.x+", "+this.y+")"},e.Cartesian2=_,e.Ellipsoid=m,e.Rectangle=y});
