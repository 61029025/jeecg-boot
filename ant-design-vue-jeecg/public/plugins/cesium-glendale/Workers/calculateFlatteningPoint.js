define(["./when-54c2dc71","./Check-6c0211bc","./Math-fc8cecf5","./Cartesian3-e5933291","./WebGLConstants-76bb35d1","./ComponentDatatype-6d99a1ee","./createTaskProcessorWorker"],function(U,a,t,T,e,F,n){"use strict";function O(a,t){for(var e,n,r,i,y=0,o=new T.Cartesian3,x=new T.Cartesian3,o=t[0],f=1;f<=4;f++){if(x=4!==f?t[f]:t[0],n=o,r=x,((i=a).x-n.x)*(r.y-n.y)==(r.x-n.x)*(i.y-n.y)&&Math.min(n.x,r.x)<=i.x&&i.x<=Math.max(n.x,r.x)&&Math.min(n.y,r.y)<=i.y&&i.y<=Math.max(n.y,r.y))return!0;a.y>Math.min(o.y,x.y)&&a.y<=Math.max(o.y,x.y)&&a.x<=Math.max(o.x,x.x)&&o.y!==x.y&&(e=(a.y-o.y)*(x.x-o.x)/(x.y-o.y)+o.x,(o.x===x.x||a.x<=e)&&y++),o=x}return y%2!=0}return n(function(a){var t=a.positionLen,e=a.pointLen,n=a.arrBuffer,r=a.sizeInBytes,i=a.flattenData,y=a.flattenHeight,o=a.primitiveId,x=U.defined(a.quantization)?a.quantization:{},f=!1,s=a.draco;if(0<i.length){var m={};if(s){for(var h=[],u=new Uint16Array(r/2),p=new T.Cartesian3(-1/0,-1/0,-1/0),z=new T.Cartesian3(1/0,1/0,1/0),M=n,c=x.range/(1<<x.quantizationBits),C=0;C<e;C++){for(var d=new T.Cartesian3(x.minValues[0]+M[C*t]*c,x.minValues[1]+M[C*t+1]*c,x.minValues[2]+M[C*t+2]*c),l=0;l<i.length;l++){if(O(d,i[l])){d.z=y[l],f=!0;break}}h.push(d),p.x=Math.max(p.x,d.x),p.y=Math.max(p.y,d.y),p.z=Math.max(p.z,d.z),z.x=Math.min(z.x,d.x),z.y=Math.min(z.y,d.y),z.z=Math.min(z.z,d.z)}var v=0;p.x-z.x>v&&(v=p.x-z.x),p.y-z.y>v&&(v=p.y-z.y),p.z-z.z>v&&(v=p.z-z.z);for(var w=1<<x.quantizationBits,b=w/v,g=0;g<h.length;g++){var A=h[g],B=Math.floor((A.x-z.x)*b+.5),D=Math.floor((A.y-z.y)*b+.5),k=Math.floor((A.z-z.z)*b+.5);u[3*g]=B,u[3*g+1]=D,u[3*g+2]=k}m.typedArray=u,m.minValues=z,m.normConstant=v/w,m.range=v,m.isUpdate=f,m.primitiveId=o}else{for(var I=F.ComponentDatatype.createArrayBufferView(F.ComponentDatatype.FLOAT,n.buffer,0,r/F.ComponentDatatype.getSizeInBytes(F.ComponentDatatype.FLOAT)),L=0;L<e;L++)for(var V=new T.Cartesian3(I[L*t],I[L*t+1],I[L*t+2]),q=0;q<i.length;q++){if(O(V,i[q])){I[L*t+2]=y[q],f=!0;break}}m.typedArray=new Uint8Array(I.buffer),m.isUpdate=f,m.primitiveId=o}return m}})});
