define(["./when-54c2dc71","./Check-6c0211bc","./Math-fc8cecf5","./Cartesian3-e5933291","./WebGLConstants-76bb35d1","./createTaskProcessorWorker","./Cartesian2-b1f4b655","./AttributeCompression-2d47cb6b","./IndexDatatype-53503fee"],function(a,e,G,W,r,n,B,z,H){"use strict";var O=32767,Y=new B.Cartographic,Z=new W.Cartesian3;var j=new B.Rectangle,q=new B.Ellipsoid,J=new W.Cartesian3,K={min:void 0,max:void 0};var Q=new W.Cartesian3,V=new W.Cartesian3,X=new W.Cartesian3,$=new W.Cartesian3,aa=new W.Cartesian3;return n(function(a,e){var r=new Uint16Array(a.positions),n=new Uint16Array(a.widths),t=new Uint32Array(a.counts),i=new Uint16Array(a.batchIds);!function(a){a=new Float64Array(a);var e=0;K.min=a[e++],K.max=a[e++],B.Rectangle.unpack(a,2,j),e+=B.Rectangle.packedLength,B.Ellipsoid.unpack(a,e,q),e+=B.Ellipsoid.packedLength,W.Cartesian3.unpack(a,e,J)}(a.packedBuffer);for(var s=J,c=function(a,e,r,n,t){var i=a.length/3,s=a.subarray(0,i),c=a.subarray(i,2*i),u=a.subarray(2*i,3*i);z.AttributeCompression.zigZagDeltaDecode(s,c,u);for(var o=new Float64Array(a.length),f=0;f<i;++f){var p=s[f],C=c[f],b=u[f],d=G.CesiumMath.lerp(e.west,e.east,p/O),w=G.CesiumMath.lerp(e.south,e.north,C/O),h=G.CesiumMath.lerp(r,n,b/O),l=B.Cartographic.fromRadians(d,w,h,Y),y=t.cartographicToCartesian(l,Z);W.Cartesian3.pack(y,o,3*f)}return o}(r,j,K.min,K.max,q),u=c.length/3,o=4*u-4,f=new Float32Array(3*o),p=new Float32Array(3*o),C=new Float32Array(3*o),b=new Float32Array(2*o),d=new Uint16Array(o),w=0,h=0,l=0,y=0,k=t.length,v=0;v<k;++v){for(var A,g,m,x=t[v],E=n[v],D=i[v],I=0;I<x;++I){0===I?(A=W.Cartesian3.unpack(c,3*y,Q),g=W.Cartesian3.unpack(c,3*(y+1),V),m=W.Cartesian3.subtract(A,g,X),W.Cartesian3.add(A,m,m)):m=W.Cartesian3.unpack(c,3*(y+I-1),X);var T,U,F,N=W.Cartesian3.unpack(c,3*(y+I),$);I===x-1?(T=W.Cartesian3.unpack(c,3*(y+x-1),Q),U=W.Cartesian3.unpack(c,3*(y+x-2),V),F=W.Cartesian3.subtract(T,U,aa),W.Cartesian3.add(T,F,F)):F=W.Cartesian3.unpack(c,3*(y+I+1),aa),W.Cartesian3.subtract(m,s,m),W.Cartesian3.subtract(N,s,N),W.Cartesian3.subtract(F,s,F);for(var R=I===x-1?2:4,M=0===I?2:0;M<R;++M){W.Cartesian3.pack(N,f,w),W.Cartesian3.pack(m,p,w),W.Cartesian3.pack(F,C,w),w+=3;var P=M-2<0?-1:1;b[h++]=M%2*2-1,b[h++]=P*E,d[l++]=D}}y+=x}var L=H.IndexDatatype.createTypedArray(o,6*u-6),S=0,_=0,k=u-1;for(v=0;v<k;++v)L[_++]=S,L[_++]=S+2,L[_++]=S+1,L[_++]=S+1,L[_++]=S+2,L[_++]=S+3,S+=4;return e.push(f.buffer,p.buffer,C.buffer),e.push(b.buffer,d.buffer,L.buffer),{indexDatatype:2===L.BYTES_PER_ELEMENT?H.IndexDatatype.UNSIGNED_SHORT:H.IndexDatatype.UNSIGNED_INT,currentPositions:f.buffer,previousPositions:p.buffer,nextPositions:C.buffer,expandAndWidth:b.buffer,batchIds:d.buffer,indices:L.buffer}})});
