define(["exports","./when-54c2dc71","./Check-6c0211bc","./Math-fc8cecf5","./Cartesian3-e5933291","./Matrix4-a018fd55","./RuntimeError-2109023a","./Cartesian2-b1f4b655"],function(e,D,r,A,P,R,g,c){"use strict";function t(e){this._ellipsoid=D.defaultValue(e,c.Ellipsoid.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Object.defineProperties(t.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),t.prototype.project=function(e,t){var r=this._semimajorAxis,n=e.longitude*r,a=e.latitude*r,i=e.height;return D.defined(t)?(t.x=n,t.y=a,t.z=i,t):new P.Cartesian3(n,a,i)},t.prototype.unproject=function(e,t){var r=this._oneOverSemimajorAxis,n=e.x*r,a=e.y*r,i=e.z;return D.defined(t)?(t.longitude=n,t.latitude=a,t.height=i,t):new c.Cartographic(n,a,i)};var s=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1});function o(e,t){this.start=D.defaultValue(e,0),this.stop=D.defaultValue(t,0)}function U(e,t){this.center=P.Cartesian3.clone(D.defaultValue(e,P.Cartesian3.ZERO)),this.radius=D.defaultValue(t,0)}var N=new P.Cartesian3,F=new P.Cartesian3,z=new P.Cartesian3,V=new P.Cartesian3,B=new P.Cartesian3,L=new P.Cartesian3,j=new P.Cartesian3,W=new P.Cartesian3,k=new P.Cartesian3,Y=new P.Cartesian3,H=new P.Cartesian3,J=new P.Cartesian3,n=4/3*A.CesiumMath.PI;U.fromPoints=function(e,t){if(D.defined(t)||(t=new U),!D.defined(e)||0===e.length)return t.center=P.Cartesian3.clone(P.Cartesian3.ZERO,t.center),t.radius=0,t;for(var r=P.Cartesian3.clone(e[0],j),n=P.Cartesian3.clone(r,N),a=P.Cartesian3.clone(r,F),i=P.Cartesian3.clone(r,z),s=P.Cartesian3.clone(r,V),o=P.Cartesian3.clone(r,B),u=P.Cartesian3.clone(r,L),l=e.length,d=1;d<l;d++){P.Cartesian3.clone(e[d],r);var c=r.x,f=r.y,p=r.z;c<n.x&&P.Cartesian3.clone(r,n),c>s.x&&P.Cartesian3.clone(r,s),f<a.y&&P.Cartesian3.clone(r,a),f>o.y&&P.Cartesian3.clone(r,o),p<i.z&&P.Cartesian3.clone(r,i),p>u.z&&P.Cartesian3.clone(r,u)}var h=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(s,n,W)),m=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(o,a,W)),y=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(u,i,W)),v=n,C=s,w=h;w<m&&(w=m,v=a,C=o),w<y&&(w=y,v=i,C=u);var g=k;g.x=.5*(v.x+C.x),g.y=.5*(v.y+C.y),g.z=.5*(v.z+C.z);var x=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(C,g,W)),_=Math.sqrt(x),E=Y;E.x=n.x,E.y=a.y,E.z=i.z;var S=H;S.x=s.x,S.y=o.y,S.z=u.z;var O=P.Cartesian3.midpoint(E,S,J),A=0;for(d=0;d<l;d++){P.Cartesian3.clone(e[d],r);var R=P.Cartesian3.magnitude(P.Cartesian3.subtract(r,O,W));A<R&&(A=R);var M,b,T=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(r,g,W));x<T&&(x=(_=.5*(_+(M=Math.sqrt(T))))*_,b=M-_,g.x=(_*g.x+b*r.x)/M,g.y=(_*g.y+b*r.y)/M,g.z=(_*g.z+b*r.z)/M)}return _<A?(P.Cartesian3.clone(g,t.center),t.radius=_):(P.Cartesian3.clone(O,t.center),t.radius=A),t};var f=new t,p=new P.Cartesian3,h=new P.Cartesian3,m=new c.Cartographic,y=new c.Cartographic;U.fromRectangle2D=function(e,t,r){return U.fromRectangleWithHeights2D(e,t,0,0,r)},U.fromRectangleWithHeights2D=function(e,t,r,n,a){if(D.defined(a)||(a=new U),!D.defined(e))return a.center=P.Cartesian3.clone(P.Cartesian3.ZERO,a.center),a.radius=0,a;t=D.defaultValue(t,f),c.Rectangle.southwest(e,m),m.height=r,c.Rectangle.northeast(e,y),y.height=n;var i=t.project(m,p),s=t.project(y,h),o=s.x-i.x,u=s.y-i.y,l=s.z-i.z;a.radius=.5*Math.sqrt(o*o+u*u+l*l);var d=a.center;return d.x=i.x+.5*o,d.y=i.y+.5*u,d.z=i.z+.5*l,a};var i=[];U.fromRectangle3D=function(e,t,r,n){if(t=D.defaultValue(t,c.Ellipsoid.WGS84),r=D.defaultValue(r,0),D.defined(n)||(n=new U),!D.defined(e))return n.center=P.Cartesian3.clone(P.Cartesian3.ZERO,n.center),n.radius=0,n;var a=c.Rectangle.subsample(e,t,r,i);return U.fromPoints(a,n)},U.fromVertices=function(e,t,r,n){if(D.defined(n)||(n=new U),!D.defined(e)||0===e.length)return n.center=P.Cartesian3.clone(P.Cartesian3.ZERO,n.center),n.radius=0,n;t=D.defaultValue(t,P.Cartesian3.ZERO),r=D.defaultValue(r,3);var a=j;a.x=e[0]+t.x,a.y=e[1]+t.y,a.z=e[2]+t.z;for(var i=P.Cartesian3.clone(a,N),s=P.Cartesian3.clone(a,F),o=P.Cartesian3.clone(a,z),u=P.Cartesian3.clone(a,V),l=P.Cartesian3.clone(a,B),d=P.Cartesian3.clone(a,L),c=e.length,f=0;f<c;f+=r){var p=e[f]+t.x,h=e[f+1]+t.y,m=e[f+2]+t.z;a.x=p,a.y=h,a.z=m,p<i.x&&P.Cartesian3.clone(a,i),p>u.x&&P.Cartesian3.clone(a,u),h<s.y&&P.Cartesian3.clone(a,s),h>l.y&&P.Cartesian3.clone(a,l),m<o.z&&P.Cartesian3.clone(a,o),m>d.z&&P.Cartesian3.clone(a,d)}var y=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(u,i,W)),v=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(l,s,W)),C=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(d,o,W)),w=i,g=u,x=y;x<v&&(x=v,w=s,g=l),x<C&&(x=C,w=o,g=d);var _=k;_.x=.5*(w.x+g.x),_.y=.5*(w.y+g.y),_.z=.5*(w.z+g.z);var E=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(g,_,W)),S=Math.sqrt(E),O=Y;O.x=i.x,O.y=s.y,O.z=o.z;var A=H;A.x=u.x,A.y=l.y,A.z=d.z;var R=P.Cartesian3.midpoint(O,A,J),M=0;for(f=0;f<c;f+=r){a.x=e[f]+t.x,a.y=e[f+1]+t.y,a.z=e[f+2]+t.z;var b=P.Cartesian3.magnitude(P.Cartesian3.subtract(a,R,W));M<b&&(M=b);var T,q,I=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(a,_,W));E<I&&(E=(S=.5*(S+(T=Math.sqrt(I))))*S,q=T-S,_.x=(S*_.x+q*a.x)/T,_.y=(S*_.y+q*a.y)/T,_.z=(S*_.z+q*a.z)/T)}return S<M?(P.Cartesian3.clone(_,n.center),n.radius=S):(P.Cartesian3.clone(R,n.center),n.radius=M),n},U.fromEncodedCartesianVertices=function(e,t,r){if(D.defined(r)||(r=new U),!D.defined(e)||!D.defined(t)||e.length!==t.length||0===e.length)return r.center=P.Cartesian3.clone(P.Cartesian3.ZERO,r.center),r.radius=0,r;var n=j;n.x=e[0]+t[0],n.y=e[1]+t[1],n.z=e[2]+t[2];for(var a=P.Cartesian3.clone(n,N),i=P.Cartesian3.clone(n,F),s=P.Cartesian3.clone(n,z),o=P.Cartesian3.clone(n,V),u=P.Cartesian3.clone(n,B),l=P.Cartesian3.clone(n,L),d=e.length,c=0;c<d;c+=3){var f=e[c]+t[c],p=e[c+1]+t[c+1],h=e[c+2]+t[c+2];n.x=f,n.y=p,n.z=h,f<a.x&&P.Cartesian3.clone(n,a),f>o.x&&P.Cartesian3.clone(n,o),p<i.y&&P.Cartesian3.clone(n,i),p>u.y&&P.Cartesian3.clone(n,u),h<s.z&&P.Cartesian3.clone(n,s),h>l.z&&P.Cartesian3.clone(n,l)}var m=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(o,a,W)),y=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(u,i,W)),v=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(l,s,W)),C=a,w=o,g=m;g<y&&(g=y,C=i,w=u),g<v&&(g=v,C=s,w=l);var x=k;x.x=.5*(C.x+w.x),x.y=.5*(C.y+w.y),x.z=.5*(C.z+w.z);var _=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(w,x,W)),E=Math.sqrt(_),S=Y;S.x=a.x,S.y=i.y,S.z=s.z;var O=H;O.x=o.x,O.y=u.y,O.z=l.z;var A=P.Cartesian3.midpoint(S,O,J),R=0;for(c=0;c<d;c+=3){n.x=e[c]+t[c],n.y=e[c+1]+t[c+1],n.z=e[c+2]+t[c+2];var M=P.Cartesian3.magnitude(P.Cartesian3.subtract(n,A,W));R<M&&(R=M);var b,T,q=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(n,x,W));_<q&&(_=(E=.5*(E+(b=Math.sqrt(q))))*E,T=b-E,x.x=(E*x.x+T*n.x)/b,x.y=(E*x.y+T*n.y)/b,x.z=(E*x.z+T*n.z)/b)}return E<R?(P.Cartesian3.clone(x,r.center),r.radius=E):(P.Cartesian3.clone(A,r.center),r.radius=R),r},U.fromCornerPoints=function(e,t,r){D.defined(r)||(r=new U);var n=P.Cartesian3.midpoint(e,t,r.center);return r.radius=P.Cartesian3.distance(n,t),r},U.fromEllipsoid=function(e,t){return D.defined(t)||(t=new U),P.Cartesian3.clone(P.Cartesian3.ZERO,t.center),t.radius=e.maximumRadius,t};var u=new P.Cartesian3;U.fromBoundingSpheres=function(e,t){if(D.defined(t)||(t=new U),!D.defined(e)||0===e.length)return t.center=P.Cartesian3.clone(P.Cartesian3.ZERO,t.center),t.radius=0,t;var r=e.length;if(1===r)return U.clone(e[0],t);if(2===r)return U.union(e[0],e[1],t);for(var n=[],a=0;a<r;a++)n.push(e[a].center);var i=(t=U.fromPoints(n,t)).center,s=t.radius;for(a=0;a<r;a++)var o=e[a],s=Math.max(s,P.Cartesian3.distance(i,o.center,u)+o.radius);return t.radius=s,t};var l=new P.Cartesian3,d=new P.Cartesian3,v=new P.Cartesian3;U.fromOrientedBoundingBox=function(e,t){D.defined(t)||(t=new U);var r=e.halfAxes,n=R.Matrix3.getColumn(r,0,l),a=R.Matrix3.getColumn(r,1,d),i=R.Matrix3.getColumn(r,2,v);return P.Cartesian3.add(n,a,n),P.Cartesian3.add(n,i,n),t.center=P.Cartesian3.clone(e.center,t.center),t.radius=P.Cartesian3.magnitude(n),t},U.clone=function(e,t){if(D.defined(e))return D.defined(t)?(t.center=P.Cartesian3.clone(e.center,t.center),t.radius=e.radius,t):new U(e.center,e.radius)},U.packedLength=4,U.pack=function(e,t,r){r=D.defaultValue(r,0);var n=e.center;return t[r++]=n.x,t[r++]=n.y,t[r++]=n.z,t[r]=e.radius,t},U.unpack=function(e,t,r){t=D.defaultValue(t,0),D.defined(r)||(r=new U);var n=r.center;return n.x=e[t++],n.y=e[t++],n.z=e[t++],r.radius=e[t],r};var C=new P.Cartesian3,w=new P.Cartesian3;U.union=function(e,t,r){D.defined(r)||(r=new U);var n=e.center,a=e.radius,i=t.center,s=t.radius,o=P.Cartesian3.subtract(i,n,C),u=P.Cartesian3.magnitude(o);if(u+s<=a)return e.clone(r),r;if(u+a<=s)return t.clone(r),r;var l=.5*(a+u+s),d=P.Cartesian3.multiplyByScalar(o,(l-a)/u,w);return P.Cartesian3.add(d,n,d),P.Cartesian3.clone(d,r.center),r.radius=l,r};var a=new P.Cartesian3;U.expand=function(e,t,r){r=U.clone(e,r);var n=P.Cartesian3.magnitude(P.Cartesian3.subtract(t,r.center,a));return n>r.radius&&(r.radius=n),r},U.intersectPlane=function(e,t){var r=e.center,n=e.radius,a=t.normal,i=P.Cartesian3.dot(a,r)+t.distance;return i<-n?s.OUTSIDE:i<n?s.INTERSECTING:s.INSIDE},U.transform=function(e,t,r){return D.defined(r)||(r=new U),r.center=R.Matrix4.multiplyByPoint(t,e.center,r.center),r.radius=R.Matrix4.getMaximumScale(t)*e.radius,r};var x=new P.Cartesian3;U.distanceSquaredTo=function(e,t){var r=P.Cartesian3.subtract(e.center,t,x);return P.Cartesian3.magnitudeSquared(r)-e.radius*e.radius},U.transformWithoutScale=function(e,t,r){return D.defined(r)||(r=new U),r.center=R.Matrix4.multiplyByPoint(t,e.center,r.center),r.radius=e.radius,r};var _=new P.Cartesian3;U.computePlaneDistances=function(e,t,r,n){D.defined(n)||(n=new o);var a=P.Cartesian3.subtract(e.center,t,_),i=P.Cartesian3.dot(r,a);return n.start=i-e.radius,n.stop=i+e.radius,n};for(var E=new P.Cartesian3,S=new P.Cartesian3,O=new P.Cartesian3,M=new P.Cartesian3,b=new P.Cartesian3,T=new c.Cartographic,q=new Array(8),I=0;I<8;++I)q[I]=new P.Cartesian3;var X,G=new t;U.projectTo2D=function(e,t,r){var n=(t=D.defaultValue(t,G)).ellipsoid,a=e.center,i=e.radius,s=P.Cartesian3.equals(a,P.Cartesian3.ZERO)?P.Cartesian3.clone(P.Cartesian3.UNIT_X,E):n.geodeticSurfaceNormal(a,E),o=P.Cartesian3.cross(P.Cartesian3.UNIT_Z,s,S);P.Cartesian3.normalize(o,o);var u=P.Cartesian3.cross(s,o,O);P.Cartesian3.normalize(u,u),P.Cartesian3.multiplyByScalar(s,i,s),P.Cartesian3.multiplyByScalar(u,i,u),P.Cartesian3.multiplyByScalar(o,i,o);var l=P.Cartesian3.negate(u,b),d=P.Cartesian3.negate(o,M),c=q,f=c[0];P.Cartesian3.add(s,u,f),P.Cartesian3.add(f,o,f),f=c[1],P.Cartesian3.add(s,u,f),P.Cartesian3.add(f,d,f),f=c[2],P.Cartesian3.add(s,l,f),P.Cartesian3.add(f,d,f),f=c[3],P.Cartesian3.add(s,l,f),P.Cartesian3.add(f,o,f),P.Cartesian3.negate(s,s),f=c[4],P.Cartesian3.add(s,u,f),P.Cartesian3.add(f,o,f),f=c[5],P.Cartesian3.add(s,u,f),P.Cartesian3.add(f,d,f),f=c[6],P.Cartesian3.add(s,l,f),P.Cartesian3.add(f,d,f),f=c[7],P.Cartesian3.add(s,l,f),P.Cartesian3.add(f,o,f);for(var p=c.length,h=0;h<p;++h){var m=c[h];P.Cartesian3.add(a,m,m);var y=n.cartesianToCartographic(m,T);t.project(y,m)}var v=(a=(r=U.fromPoints(c,r)).center).x,C=a.y,w=a.z;return a.x=w,a.y=v,a.z=C,r},U.isOccluded=function(e,t){return!t.isBoundingSphereVisible(e)},U.equals=function(e,t){return e===t||D.defined(e)&&D.defined(t)&&P.Cartesian3.equals(e.center,t.center)&&e.radius===t.radius},U.prototype.intersectPlane=function(e){return U.intersectPlane(this,e)},U.prototype.distanceSquaredTo=function(e){return U.distanceSquaredTo(this,e)},U.prototype.computePlaneDistances=function(e,t,r){return U.computePlaneDistances(this,e,t,r)},U.prototype.isOccluded=function(e){return U.isOccluded(this,e)},U.prototype.equals=function(e){return U.equals(this,e)},U.prototype.clone=function(e){return U.clone(this,e)},U.prototype.volume=function(){var e=this.radius;return n*e*e*e};var Z,Q,K,$,ee,te,re,ne,ae,ie,se,oe,ue,le,de,ce,fe,pe={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},he={};function me(e){for(var t=e.split("."),r=0,n=t.length;r<n;++r)t[r]=parseInt(t[r],10);return t}function ye(){var e;return D.defined(Q)||(Q=!1,ge()||null!==(e=/ Chrome\/([\.0-9]+)/.exec(Z.userAgent))&&(Q=!0,K=me(e[1]))),Q}function ve(){var e;return D.defined($)||($=!1,ye()||ge()||!/ Safari\/[\.0-9]+/.test(Z.userAgent)||null!==(e=/ Version\/([\.0-9]+)/.exec(Z.userAgent))&&($=!0,ee=me(e[1]))),$}function Ce(){var e;return D.defined(te)||(te=!1,null!==(e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(Z.userAgent))&&(te=!0,(re=me(e[1])).isNightly=!!e[2])),te}function we(){var e;return D.defined(ne)||(ne=!1,"Microsoft Internet Explorer"===Z.appName?null!==(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(Z.userAgent))&&(ne=!0,ae=me(e[1])):"Netscape"===Z.appName&&null!==(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(Z.userAgent))&&(ne=!0,ae=me(e[1]))),ne}function ge(){var e;return D.defined(ie)||(ie=!1,null!==(e=/ Edge\/([\.0-9]+)/.exec(Z.userAgent))&&(ie=!0,se=me(e[1]))),ie}function xe(){var e;return D.defined(oe)||(oe=!1,null!==(e=/Firefox\/([\.0-9]+)/.exec(Z.userAgent))&&(oe=!0,ue=me(e[1]))),oe}function _e(){var e,t;return D.defined(fe)||((e=document.createElement("canvas")).setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;"),t=e.style.imageRendering,(fe=D.defined(t)&&""!==t)&&(ce=t)),fe}function Ee(){return Ee._result}Object.defineProperties(he,{element:{get:function(){if(he.supportsFullscreen())return document[pe.fullscreenElement]}},changeEventName:{get:function(){if(he.supportsFullscreen())return pe.fullscreenchange}},errorEventName:{get:function(){if(he.supportsFullscreen())return pe.fullscreenerror}},enabled:{get:function(){if(he.supportsFullscreen())return document[pe.fullscreenEnabled]}},fullscreen:{get:function(){if(he.supportsFullscreen())return null!==he.element}}}),he.supportsFullscreen=function(){if(D.defined(X))return X;X=!1;var e=document.body;if("function"==typeof e.requestFullscreen)return pe.requestFullscreen="requestFullscreen",pe.exitFullscreen="exitFullscreen",pe.fullscreenEnabled="fullscreenEnabled",pe.fullscreenElement="fullscreenElement",pe.fullscreenchange="fullscreenchange",pe.fullscreenerror="fullscreenerror",X=!0;for(var t=["webkit","moz","o","ms","khtml"],r=0,n=t.length;r<n;++r){var a,i=t[r];"function"!=typeof e[a=i+"RequestFullscreen"]&&"function"!=typeof e[a=i+"RequestFullScreen"]||(pe.requestFullscreen=a,X=!0),a=i+"ExitFullscreen","function"==typeof document[a]?pe.exitFullscreen=a:(a=i+"CancelFullScreen","function"==typeof document[a]&&(pe.exitFullscreen=a)),a=i+"FullscreenEnabled",void 0!==document[a]?pe.fullscreenEnabled=a:(a=i+"FullScreenEnabled",void 0!==document[a]&&(pe.fullscreenEnabled=a)),a=i+"FullscreenElement",void 0!==document[a]?pe.fullscreenElement=a:(a=i+"FullScreenElement",void 0!==document[a]&&(pe.fullscreenElement=a)),a=i+"fullscreenchange",void 0!==document["on"+a]&&("ms"===i&&(a="MSFullscreenChange"),pe.fullscreenchange=a),a=i+"fullscreenerror",void 0!==document["on"+a]&&("ms"===i&&(a="MSFullscreenError"),pe.fullscreenerror=a)}return X},he.requestFullscreen=function(e,t){he.supportsFullscreen()&&e[pe.requestFullscreen]({vrDisplay:t})},he.exitFullscreen=function(){he.supportsFullscreen()&&document[pe.exitFullscreen]()},he._names=pe,Z="undefined"!=typeof navigator?navigator:{},Ee._promise=void 0,Ee._result=void 0,Ee.initialize=function(){if(D.defined(Ee._promise))return Ee._promise;var e=D.when.defer();if(Ee._promise=e.promise,ge())return Ee._result=!1,e.resolve(Ee._result),e.promise;var t=new Image;return t.onload=function(){Ee._result=0<t.width&&0<t.height,e.resolve(Ee._result)},t.onerror=function(){Ee._result=!1,e.resolve(Ee._result)},t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.promise},Object.defineProperties(Ee,{initialized:{get:function(){return D.defined(Ee._result)}}});var Se=[];"undefined"!=typeof ArrayBuffer&&(Se.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&Se.push(Uint8ClampedArray),"undefined"!=typeof Uint8ClampedArray&&Se.push(Uint8ClampedArray));var Oe={isChrome:ye,chromeVersion:function(){return ye()&&K},isSafari:ve,safariVersion:function(){return ve()&&ee},isWebkit:Ce,webkitVersion:function(){return Ce()&&re},isInternetExplorer:we,internetExplorerVersion:function(){return we()&&ae},isEdge:ge,edgeVersion:function(){return ge()&&se},isFirefox:xe,firefoxVersion:function(){return xe()&&ue},isWindows:function(){return D.defined(le)||(le=/Windows/i.test(Z.appVersion)),le},hardwareConcurrency:D.defaultValue(Z.hardwareConcurrency,3),supportsPointerEvents:function(){return D.defined(de)||(de=!xe()&&"undefined"!=typeof PointerEvent&&(!D.defined(Z.pointerEnabled)||Z.pointerEnabled)),de},supportsImageRenderingPixelated:_e,supportsWebP:Ee,imageRenderingValue:function(){return _e()?ce:void 0},typedArrayTypes:Se};function Ae(e,t,r,n){this.x=D.defaultValue(e,0),this.y=D.defaultValue(t,0),this.z=D.defaultValue(r,0),this.w=D.defaultValue(n,0)}Oe.supportsFullscreen=function(){return he.supportsFullscreen()},Oe.supportsTypedArrays=function(){return"undefined"!=typeof ArrayBuffer},Oe.supportsWebWorkers=function(){return"undefined"!=typeof Worker},Oe.supportsWebAssembly=function(){return"undefined"!=typeof WebAssembly&&!Oe.isEdge()};var Re=new P.Cartesian3;Ae.fromAxisAngle=function(e,t,r){var n=t/2,a=Math.sin(n),i=(Re=P.Cartesian3.normalize(e,Re)).x*a,s=Re.y*a,o=Re.z*a,u=Math.cos(n);return D.defined(r)?(r.x=i,r.y=s,r.z=o,r.w=u,r):new Ae(i,s,o,u)};var Me=[1,2,0],be=new Array(3);Ae.fromRotationMatrix=function(e,t){var r,n,a,i,s,o,u,l,d=e[R.Matrix3.COLUMN0ROW0],c=e[R.Matrix3.COLUMN1ROW1],f=e[R.Matrix3.COLUMN2ROW2],p=d+c+f,h=0<p?(a=.5*(u=Math.sqrt(p+1)),u=.5/u,r=(e[R.Matrix3.COLUMN1ROW2]-e[R.Matrix3.COLUMN2ROW1])*u,n=(e[R.Matrix3.COLUMN2ROW0]-e[R.Matrix3.COLUMN0ROW2])*u,(e[R.Matrix3.COLUMN0ROW1]-e[R.Matrix3.COLUMN1ROW0])*u):(o=Me[s=Me[i=d<f&&c<f?2:d<c?1:0]],u=Math.sqrt(e[R.Matrix3.getElementIndex(i,i)]-e[R.Matrix3.getElementIndex(s,s)]-e[R.Matrix3.getElementIndex(o,o)]+1),(l=be)[i]=.5*u,u=.5/u,a=(e[R.Matrix3.getElementIndex(o,s)]-e[R.Matrix3.getElementIndex(s,o)])*u,l[s]=(e[R.Matrix3.getElementIndex(s,i)]+e[R.Matrix3.getElementIndex(i,s)])*u,l[o]=(e[R.Matrix3.getElementIndex(o,i)]+e[R.Matrix3.getElementIndex(i,o)])*u,r=-l[0],n=-l[1],-l[2]);return D.defined(t)?(t.x=r,t.y=n,t.z=h,t.w=a,t):new Ae(r,n,h,a)};var Te=new Ae,qe=new Ae,Ie=new Ae,De=new Ae;Ae.fromHeadingPitchRoll=function(e,t){return De=Ae.fromAxisAngle(P.Cartesian3.UNIT_X,e.roll,Te),Ie=Ae.fromAxisAngle(P.Cartesian3.UNIT_Y,-e.pitch,t),t=Ae.multiply(Ie,De,Ie),qe=Ae.fromAxisAngle(P.Cartesian3.UNIT_Z,-e.heading,Te),Ae.multiply(qe,t,t)};var Pe=new P.Cartesian3,Ue=new P.Cartesian3,Ne=new Ae,Fe=new Ae,ze=new Ae;Ae.packedLength=4,Ae.pack=function(e,t,r){return r=D.defaultValue(r,0),t[r++]=e.x,t[r++]=e.y,t[r++]=e.z,t[r]=e.w,t},Ae.unpack=function(e,t,r){return t=D.defaultValue(t,0),D.defined(r)||(r=new Ae),r.x=e[t],r.y=e[t+1],r.z=e[t+2],r.w=e[t+3],r},Ae.packedInterpolationLength=3,Ae.convertPackedArrayForInterpolation=function(e,t,r,n){Ae.unpack(e,4*r,ze),Ae.conjugate(ze,ze);for(var a=0,i=r-t+1;a<i;a++){var s=3*a;Ae.unpack(e,4*(t+a),Ne),Ae.multiply(Ne,ze,Ne),Ne.w<0&&Ae.negate(Ne,Ne),Ae.computeAxis(Ne,Pe);var o=Ae.computeAngle(Ne);D.defined(n)||(n=[]),n[s]=Pe.x*o,n[1+s]=Pe.y*o,n[2+s]=Pe.z*o}},Ae.unpackInterpolationResult=function(e,t,r,n,a){D.defined(a)||(a=new Ae),P.Cartesian3.fromArray(e,0,Ue);var i=P.Cartesian3.magnitude(Ue);return Ae.unpack(t,4*n,Fe),0===i?Ae.clone(Ae.IDENTITY,Ne):Ae.fromAxisAngle(Ue,i,Ne),Ae.multiply(Ne,Fe,a)},Ae.clone=function(e,t){if(D.defined(e))return D.defined(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new Ae(e.x,e.y,e.z,e.w)},Ae.conjugate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},Ae.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},Ae.magnitude=function(e){return Math.sqrt(Ae.magnitudeSquared(e))},Ae.normalize=function(e,t){var r=1/Ae.magnitude(e),n=e.x*r,a=e.y*r,i=e.z*r,s=e.w*r;return t.x=n,t.y=a,t.z=i,t.w=s,t},Ae.inverse=function(e,t){var r=Ae.magnitudeSquared(e);return t=Ae.conjugate(e,t),Ae.multiplyByScalar(t,1/r,t)},Ae.add=function(e,t,r){return r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r},Ae.subtract=function(e,t,r){return r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r},Ae.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},Ae.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},Ae.multiply=function(e,t,r){var n=e.x,a=e.y,i=e.z,s=e.w,o=t.x,u=t.y,l=t.z,d=t.w,c=s*o+n*d+a*l-i*u,f=s*u-n*l+a*d+i*o,p=s*l+n*u-a*o+i*d,h=s*d-n*o-a*u-i*l;return r.x=c,r.y=f,r.z=p,r.w=h,r},Ae.multiplyByScalar=function(e,t,r){return r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r},Ae.divideByScalar=function(e,t,r){return r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r},Ae.computeAxis=function(e,t){var r=e.w;if(Math.abs(r-1)<A.CesiumMath.EPSILON6)return t.x=t.y=t.z=0,t;var n=1/Math.sqrt(1-r*r);return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t},Ae.computeAngle=function(e){return Math.abs(e.w-1)<A.CesiumMath.EPSILON6?0:2*Math.acos(e.w)};var Ve=new Ae;Ae.lerp=function(e,t,r,n){return Ve=Ae.multiplyByScalar(t,r,Ve),n=Ae.multiplyByScalar(e,1-r,n),Ae.add(Ve,n,n)};var Be=new Ae,Le=new Ae,je=new Ae;Ae.slerp=function(e,t,r,n){var a=Ae.dot(e,t),i=t;if(a<0&&(a=-a,i=Be=Ae.negate(t,Be)),1-a<A.CesiumMath.EPSILON6)return Ae.lerp(e,i,r,n);var s=Math.acos(a);return Le=Ae.multiplyByScalar(e,Math.sin((1-r)*s),Le),je=Ae.multiplyByScalar(i,Math.sin(r*s),je),n=Ae.add(Le,je,n),Ae.multiplyByScalar(n,1/Math.sin(s),n)},Ae.log=function(e,t){var r=A.CesiumMath.acosClamped(e.w),n=0;return 0!==r&&(n=r/Math.sin(r)),P.Cartesian3.multiplyByScalar(e,n,t)},Ae.exp=function(e,t){var r=P.Cartesian3.magnitude(e),n=0;return 0!==r&&(n=Math.sin(r)/r),t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=Math.cos(r),t};var We=new P.Cartesian3,ke=new P.Cartesian3,Ye=new Ae,He=new Ae;Ae.computeInnerQuadrangle=function(e,t,r,n){var a=Ae.conjugate(t,Ye);Ae.multiply(a,r,He);var i=Ae.log(He,We);Ae.multiply(a,e,He);var s=Ae.log(He,ke);return P.Cartesian3.add(i,s,i),P.Cartesian3.multiplyByScalar(i,.25,i),P.Cartesian3.negate(i,i),Ae.exp(i,Ye),Ae.multiply(t,Ye,n)},Ae.squad=function(e,t,r,n,a,i){var s=Ae.slerp(e,t,a,Ye),o=Ae.slerp(r,n,a,He);return Ae.slerp(s,o,2*a*(1-a),i)};for(var Je=new Ae,Xe=1.9011074535173003,Ge=Oe.supportsTypedArrays()?new Float32Array(8):[],Ze=Oe.supportsTypedArrays()?new Float32Array(8):[],Qe=Oe.supportsTypedArrays()?new Float32Array(8):[],Ke=Oe.supportsTypedArrays()?new Float32Array(8):[],$e=0;$e<7;++$e){var et=$e+1,tt=2*et+1;Ge[$e]=1/(et*tt),Ze[$e]=et/tt}function rt(e,t,r){for(var n,a,i=0,s=e.length-1;i<=s;)if((a=r(e[n=~~((i+s)/2)],t))<0)i=1+n;else{if(!(0<a))return n;s=n-1}return~(s+1)}function nt(e,t,r,n,a){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=r,this.yPoleOffset=n,this.ut1MinusUtc=a}function at(){function w(e,t,r,n){r=r||" ";var a=e.length>=t?"":Array(1+t-e.length>>>0).join(r);return n?e+a:a+e}function g(e,t,r,n,a,i){var s=n-e.length;return 0<s&&(e=r||!a?w(e,n,i,r):e.slice(0,t.length)+w("",s,"0",!0)+e.slice(t.length)),e}function x(e,t,r,n,a,i,s){var o=e>>>0;return e=(r=r&&o&&{2:"0b",8:"0",16:"0x"}[t]||"")+w(o.toString(t),i||0,"0",!1),g(e,r,n,a,s)}function _(e,t,r,n,a,i){return null!=n&&(e=e.slice(0,n)),g(e,"",t,r,a,i)}var E=arguments,S=0,e=E[S++];return e.replace(/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,function(e,t,r,n,a,i,s){var o,u,l,d,c;if("%%"==e)return"%";for(var f=!1,p="",h=!1,m=!1,y=" ",v=r.length,C=0;r&&C<v;C++)switch(r.charAt(C)){case" ":p=" ";break;case"+":p="+";break;case"-":f=!0;break;case"'":y=r.charAt(C+1);break;case"0":h=!0;break;case"#":m=!0}if((n=n?"*"==n?+E[S++]:"*"==n.charAt(0)?+E[n.slice(1,-1)]:+n:0)<0&&(n=-n,f=!0),!isFinite(n))throw new Error("sprintf: (minimum-)width must be finite");switch(i=i?"*"==i?+E[S++]:"*"==i.charAt(0)?+E[i.slice(1,-1)]:+i:-1<"fFeE".indexOf(s)?6:"d"==s?0:void 0,c=t?E[t.slice(0,-1)]:E[S++],s){case"s":return _(String(c),f,n,i,h,y);case"c":return _(String.fromCharCode(+c),f,n,i,h);case"b":return x(c,2,m,f,n,i,h);case"o":return x(c,8,m,f,n,i,h);case"x":return x(c,16,m,f,n,i,h);case"X":return x(c,16,m,f,n,i,h).toUpperCase();case"u":return x(c,10,m,f,n,i,h);case"i":case"d":return o=+c||0,c=(u=(o=Math.round(o-o%1))<0?"-":p)+w(String(Math.abs(o)),i,"0",!1),g(c,u,f,n,h);case"e":case"E":case"f":case"F":case"g":case"G":return u=(o=+c)<0?"-":p,l=["toExponential","toFixed","toPrecision"]["efg".indexOf(s.toLowerCase())],d=["toString","toUpperCase"]["eEfFgG".indexOf(s)%2],c=u+Math.abs(o)[l](i),g(c,u,f,n,h)[d]();default:return e}})}function it(e,t,r,n,a,i,s,o){this.year=e,this.month=t,this.day=r,this.hour=n,this.minute=a,this.second=i,this.millisecond=s,this.isLeapSecond=o}function st(e){return e%4==0&&e%100!=0||e%400==0}function ot(e,t){this.julianDate=e,this.offset=t}Ge[7]=Xe/136,Ze[7]=8*Xe/17,Ae.fastSlerp=function(e,t,r,n){var a,i=Ae.dot(e,t);0<=i?a=1:(a=-1,i=-i);for(var s=i-1,o=1-r,u=r*r,l=o*o,d=7;0<=d;--d)Qe[d]=(Ge[d]*u-Ze[d])*s,Ke[d]=(Ge[d]*l-Ze[d])*s;var c=a*r*(1+Qe[0]*(1+Qe[1]*(1+Qe[2]*(1+Qe[3]*(1+Qe[4]*(1+Qe[5]*(1+Qe[6]*(1+Qe[7])))))))),f=o*(1+Ke[0]*(1+Ke[1]*(1+Ke[2]*(1+Ke[3]*(1+Ke[4]*(1+Ke[5]*(1+Ke[6]*(1+Ke[7])))))))),p=Ae.multiplyByScalar(e,f,Je);return Ae.multiplyByScalar(t,c,n),Ae.add(p,n,n)},Ae.fastSquad=function(e,t,r,n,a,i){var s=Ae.fastSlerp(e,t,a,Ye),o=Ae.fastSlerp(r,n,a,He);return Ae.fastSlerp(s,o,2*a*(1-a),i)},Ae.equals=function(e,t){return e===t||D.defined(e)&&D.defined(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},Ae.equalsEpsilon=function(e,t,r){return r=D.defaultValue(r,0),e===t||D.defined(e)&&D.defined(t)&&Math.abs(e.x-t.x)<=r&&Math.abs(e.y-t.y)<=r&&Math.abs(e.z-t.z)<=r&&Math.abs(e.w-t.w)<=r},Ae.ZERO=Object.freeze(new Ae(0,0,0,0)),Ae.IDENTITY=Object.freeze(new Ae(0,0,0,1)),Ae.prototype.clone=function(e){return Ae.clone(this,e)},Ae.prototype.equals=function(e){return Ae.equals(this,e)},Ae.prototype.equalsEpsilon=function(e,t){return Ae.equalsEpsilon(this,e,t)},Ae.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var ut=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),lt=Object.freeze({UTC:0,TAI:1}),dt=new it,ct=[31,28,31,30,31,30,31,31,30,31,30,31];function ft(e,t){return Rt.compare(e.julianDate,t.julianDate)}var pt=new ot;function ht(e){pt.julianDate=e;var t=Rt.leapSeconds,r=rt(t,pt,ft);r<0&&(r=~r),r>=t.length&&(r=t.length-1);var n=t[r].offset;0<r&&n<Rt.secondsDifference(t[r].julianDate,e)&&(n=t[--r].offset),Rt.addSeconds(e,n,e)}function mt(e,t){pt.julianDate=e;var r=Rt.leapSeconds,n=rt(r,pt,ft);if(n<0&&(n=~n),0===n)return Rt.addSeconds(e,-r[0].offset,t);if(n>=r.length)return Rt.addSeconds(e,-r[n-1].offset,t);var a=Rt.secondsDifference(r[n].julianDate,e);return 0===a?Rt.addSeconds(e,-r[n].offset,t):a<=1?void 0:Rt.addSeconds(e,-r[--n].offset,t)}function yt(e,t,r){var n=t/ut.SECONDS_PER_DAY|0;return e+=n,(t-=ut.SECONDS_PER_DAY*n)<0&&(e--,t+=ut.SECONDS_PER_DAY),r.dayNumber=e,r.secondsOfDay=t,r}function vt(e,t,r,n,a,i,s){var o=(t-14)/12|0,u=e+4800+o,l=(1461*u/4|0)+(367*(t-2-12*o)/12|0)-(3*((u+100)/100|0)/4|0)+r-32075;(n-=12)<0&&(n+=24);var d=i+(n*ut.SECONDS_PER_HOUR+a*ut.SECONDS_PER_MINUTE+s*ut.SECONDS_PER_MILLISECOND);return 43200<=d&&--l,[l,d]}var Ct=/^(\d{4})$/,wt=/^(\d{4})-(\d{2})$/,gt=/^(\d{4})-?(\d{3})$/,xt=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,_t=/^(\d{4})-?(\d{2})-?(\d{2})$/,Et=/([Z+\-])?(\d{2})?:?(\d{2})?$/,St=/^(\d{2})(\.\d+)?/.source+Et.source,Ot=/^(\d{2}):?(\d{2})(\.\d+)?/.source+Et.source,At=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+Et.source;function Rt(e,t,r){this.dayNumber=void 0,this.secondsOfDay=void 0,e=D.defaultValue(e,0),t=D.defaultValue(t,0),r=D.defaultValue(r,lt.UTC);var n=0|e;yt(n,t+=(e-n)*ut.SECONDS_PER_DAY,this),r===lt.UTC&&ht(this)}Rt.fromGregorianDate=function(e,t){var r=vt(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return D.defined(t)?(yt(r[0],r[1],t),ht(t),t):new Rt(r[0],r[1],lt.UTC)},Rt.fromDate=function(e,t){var r=vt(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return D.defined(t)?(yt(r[0],r[1],t),ht(t),t):new Rt(r[0],r[1],lt.UTC)},Rt.fromIso8601=function(e,t){var r,n,a,i,s,o=(e=e.replace(",",".")).split("T"),u=1,l=1,d=0,c=0,f=0,p=0,h=o[0],m=o[1];if(null!==(o=h.match(_t))?(r=+o[1],u=+o[2],l=+o[3]):null!==(o=h.match(wt))?(r=+o[1],u=+o[2]):null!==(o=h.match(Ct))?r=+o[1]:(null!==(o=h.match(gt))?(r=+o[1],i=+o[2],a=st(r)):null!==(o=h.match(xt))&&(r=+o[1],i=7*+o[2]+(+o[3]||0)-new Date(Date.UTC(r,0,4)).getUTCDay()-3),(n=new Date(Date.UTC(r,0,1))).setUTCDate(i),u=n.getUTCMonth()+1,l=n.getUTCDate()),a=st(r),D.defined(m)){null!==(o=m.match(At))?(d=+o[1],c=+o[2],f=+o[3],p=1e3*(o[4]||0),s=5):null!==(o=m.match(Ot))?(d=+o[1],c=+o[2],f=60*(o[3]||0),s=4):null!==(o=m.match(St))&&(d=+o[1],c=60*(o[2]||0),s=3);var y=o[s],v=+o[s+1],C=+(o[s+2]||0);switch(y){case"+":d-=v,c-=C;break;case"-":d+=v,c+=C;break;case"Z":break;default:c+=new Date(Date.UTC(r,u-1,l,d,c)).getTimezoneOffset()}}var w=60===f;for(w&&f--;60<=c;)c-=60,d++;for(;24<=d;)d-=24,l++;for(n=a&&2===u?29:ct[u-1];n<l;)l-=n,12<++u&&(u-=12,r++),n=a&&2===u?29:ct[u-1];for(;c<0;)c+=60,d--;for(;d<0;)d+=24,l--;for(;l<1;)--u<1&&(u+=12,r--),l+=n=a&&2===u?29:ct[u-1];var g=vt(r,u,l,d,c,f,p);return D.defined(t)?(yt(g[0],g[1],t),ht(t)):t=new Rt(g[0],g[1],lt.UTC),w&&Rt.addSeconds(t,1,t),t},Rt.now=function(e){return Rt.fromDate(new Date,e)};var Mt=new Rt(0,0,lt.TAI);function bt(e){var t;e instanceof bt?(this.scheme=e.scheme,this.authority=e.authority,this.path=e.path,this.query=e.query,this.fragment=e.fragment):e&&(t=Tt.exec(e),this.scheme=t[1],this.authority=t[2],this.path=t[3],this.query=t[4],this.fragment=t[5])}Rt.toGregorianDate=function(e,t){var r=!1,n=mt(e,Mt);D.defined(n)||(Rt.addSeconds(e,-1,Mt),n=mt(Mt,Mt),r=!0);var a=n.dayNumber,i=n.secondsOfDay;43200<=i&&(a+=1);var s=a+68569|0,o=4*s/146097|0,u=4e3*(1+(s=s-((146097*o+3)/4|0)|0))/1461001|0,l=80*(s=s-(1461*u/4|0)+31|0)/2447|0,d=s-(2447*l/80|0)|0,c=2+l-12*(s=l/11|0)|0,f=100*(o-49)+u+s|0,p=i/ut.SECONDS_PER_HOUR|0,h=i-p*ut.SECONDS_PER_HOUR,m=h/ut.SECONDS_PER_MINUTE|0,y=0|(h-=m*ut.SECONDS_PER_MINUTE),v=(h-y)/ut.SECONDS_PER_MILLISECOND;return 23<(p+=12)&&(p-=24),r&&(y+=1),D.defined(t)?(t.year=f,t.month=c,t.day=d,t.hour=p,t.minute=m,t.second=y,t.millisecond=v,t.isLeapSecond=r,t):new it(f,c,d,p,m,y,v,r)},Rt.toDate=function(e){var t=Rt.toGregorianDate(e,dt),r=t.second;return t.isLeapSecond&&--r,new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,r,t.millisecond))},Rt.toIso8601=function(e,t){var r=Rt.toGregorianDate(e,dt),n=r.year,a=r.month,i=r.day,s=r.hour,o=r.minute,u=r.second,l=r.millisecond;return 1e4===n&&1===a&&1===i&&0===s&&0===o&&0===u&&0===l&&(n=9999,a=12,i=31,s=24),D.defined(t)||0===l?D.defined(t)&&0!==t?at("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",n,a,i,s,o,u,(.01*l).toFixed(t).replace(".","").slice(0,t)):at("%04d-%02d-%02dT%02d:%02d:%02dZ",n,a,i,s,o,u):at("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",n,a,i,s,o,u,(.01*l).toString().replace(".",""))},Rt.clone=function(e,t){if(D.defined(e))return D.defined(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new Rt(e.dayNumber,e.secondsOfDay,lt.TAI)},Rt.compare=function(e,t){var r=e.dayNumber-t.dayNumber;return 0!=r?r:e.secondsOfDay-t.secondsOfDay},Rt.equals=function(e,t){return e===t||D.defined(e)&&D.defined(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay},Rt.equalsEpsilon=function(e,t,r){return r=D.defaultValue(r,0),e===t||D.defined(e)&&D.defined(t)&&Math.abs(Rt.secondsDifference(e,t))<=r},Rt.totalDays=function(e){return e.dayNumber+e.secondsOfDay/ut.SECONDS_PER_DAY},Rt.secondsDifference=function(e,t){return(e.dayNumber-t.dayNumber)*ut.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)},Rt.daysDifference=function(e,t){return e.dayNumber-t.dayNumber+(e.secondsOfDay-t.secondsOfDay)/ut.SECONDS_PER_DAY},Rt.computeTaiMinusUtc=function(e){pt.julianDate=e;var t=Rt.leapSeconds,r=rt(t,pt,ft);return r<0&&(r=~r,--r<0&&(r=0)),t[r].offset},Rt.addSeconds=function(e,t,r){return yt(e.dayNumber,e.secondsOfDay+t,r)},Rt.addMinutes=function(e,t,r){var n=e.secondsOfDay+t*ut.SECONDS_PER_MINUTE;return yt(e.dayNumber,n,r)},Rt.addHours=function(e,t,r){var n=e.secondsOfDay+t*ut.SECONDS_PER_HOUR;return yt(e.dayNumber,n,r)},Rt.addDays=function(e,t,r){return yt(e.dayNumber+t,e.secondsOfDay,r)},Rt.lessThan=function(e,t){return Rt.compare(e,t)<0},Rt.lessThanOrEquals=function(e,t){return Rt.compare(e,t)<=0},Rt.greaterThan=function(e,t){return 0<Rt.compare(e,t)},Rt.greaterThanOrEquals=function(e,t){return 0<=Rt.compare(e,t)},Rt.prototype.clone=function(e){return Rt.clone(this,e)},Rt.prototype.equals=function(e){return Rt.equals(this,e)},Rt.prototype.equalsEpsilon=function(e,t){return Rt.equalsEpsilon(this,e,t)},Rt.prototype.toString=function(){return Rt.toIso8601(this)},Rt.leapSeconds=[new ot(new Rt(2441317,43210,lt.TAI),10),new ot(new Rt(2441499,43211,lt.TAI),11),new ot(new Rt(2441683,43212,lt.TAI),12),new ot(new Rt(2442048,43213,lt.TAI),13),new ot(new Rt(2442413,43214,lt.TAI),14),new ot(new Rt(2442778,43215,lt.TAI),15),new ot(new Rt(2443144,43216,lt.TAI),16),new ot(new Rt(2443509,43217,lt.TAI),17),new ot(new Rt(2443874,43218,lt.TAI),18),new ot(new Rt(2444239,43219,lt.TAI),19),new ot(new Rt(2444786,43220,lt.TAI),20),new ot(new Rt(2445151,43221,lt.TAI),21),new ot(new Rt(2445516,43222,lt.TAI),22),new ot(new Rt(2446247,43223,lt.TAI),23),new ot(new Rt(2447161,43224,lt.TAI),24),new ot(new Rt(2447892,43225,lt.TAI),25),new ot(new Rt(2448257,43226,lt.TAI),26),new ot(new Rt(2448804,43227,lt.TAI),27),new ot(new Rt(2449169,43228,lt.TAI),28),new ot(new Rt(2449534,43229,lt.TAI),29),new ot(new Rt(2450083,43230,lt.TAI),30),new ot(new Rt(2450630,43231,lt.TAI),31),new ot(new Rt(2451179,43232,lt.TAI),32),new ot(new Rt(2453736,43233,lt.TAI),33),new ot(new Rt(2454832,43234,lt.TAI),34),new ot(new Rt(2456109,43235,lt.TAI),35),new ot(new Rt(2457204,43236,lt.TAI),36),new ot(new Rt(2457754,43237,lt.TAI),37)],bt.prototype.scheme=null,bt.prototype.authority=null,bt.prototype.path="",bt.prototype.query=null,bt.prototype.fragment=null;var Tt=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$");bt.prototype.getScheme=function(){return this.scheme},bt.prototype.getAuthority=function(){return this.authority},bt.prototype.getPath=function(){return this.path},bt.prototype.getQuery=function(){return this.query},bt.prototype.getFragment=function(){return this.fragment},bt.prototype.isAbsolute=function(){return!!this.scheme&&!this.fragment},bt.prototype.isSameDocumentAs=function(e){return e.scheme==this.scheme&&e.authority==this.authority&&e.path==this.path&&e.query==this.query},bt.prototype.equals=function(e){return this.isSameDocumentAs(e)&&e.fragment==this.fragment},bt.prototype.normalize=function(){this.removeDotSegments(),this.scheme&&(this.scheme=this.scheme.toLowerCase()),this.authority&&(this.authority=this.authority.replace(Dt,Ut).replace(qt,Pt)),this.path&&(this.path=this.path.replace(qt,Pt)),this.query&&(this.query=this.query.replace(qt,Pt)),this.fragment&&(this.fragment=this.fragment.replace(qt,Pt))};var qt=/%[0-9a-z]{2}/gi,It=/[a-zA-Z0-9\-\._~]/,Dt=/(.*@)?([^@:]*)(:.*)?/;function Pt(e){var t=unescape(e);return It.test(t)?t:e.toUpperCase()}function Ut(e,t,r,n){return(t||"")+r.toLowerCase()+(n||"")}function Nt(e,t){if(null===e||"object"!=typeof e)return e;t=D.defaultValue(t,!1);var r,n,a=new e.constructor;for(r in e){e.hasOwnProperty(r)&&(n=e[r],t&&(n=Nt(n,t)),a[r]=n)}return a}function Ft(e,t,r){r=D.defaultValue(r,!1);var n,a,i,s={},o=D.defined(e),u=D.defined(t);if(o)for(n in e)e.hasOwnProperty(n)&&(a=e[n],u&&r&&"object"==typeof a&&t.hasOwnProperty(n)?(i=t[n],s[n]="object"==typeof i?Ft(a,i,r):a):s[n]=a);if(u)for(n in t)t.hasOwnProperty(n)&&!s.hasOwnProperty(n)&&(i=t[n],s[n]=i);return s}function zt(e,t){var r;return"undefined"!=typeof document&&(r=document),zt._implementation(e,t,r)}bt.prototype.resolve=function(e){var t=new bt;return this.scheme?(t.scheme=this.scheme,t.authority=this.authority,t.path=this.path,t.query=this.query):(t.scheme=e.scheme,this.authority?(t.authority=this.authority,t.path=this.path,t.query=this.query):(t.authority=e.authority,""==this.path?(t.path=e.path,t.query=this.query||e.query):("/"==this.path.charAt(0)?t.path=this.path:e.authority&&""==e.path?t.path="/"+this.path:t.path=e.path.substring(0,e.path.lastIndexOf("/")+1)+this.path,t.removeDotSegments(),t.query=this.query))),t.fragment=this.fragment,t},bt.prototype.removeDotSegments=function(){var e,t=this.path.split("/"),r=[],n=""==t[0];n&&t.shift();for(""==t[0]&&t.shift();t.length;)".."==(e=t.shift())?r.pop():"."!=e&&r.push(e);"."!=e&&".."!=e||r.push(""),n&&r.unshift(""),this.path=r.join("/")},bt.prototype.toString=function(){var e="";return this.scheme&&(e+=this.scheme+":"),this.authority&&(e+="//"+this.authority),e+=this.path,this.query&&(e+="?"+this.query),this.fragment&&(e+="#"+this.fragment),e},zt._implementation=function(e,t,r){if(!D.defined(t)){if(void 0===r)return e;t=D.defaultValue(r.baseURI,r.location.href)}var n=new bt(t);return new bt(e).resolve(n).toString()};var Vt,Bt=/^blob:/i;function Lt(e){return Bt.test(e)}var jt=/^data:/i;function Wt(e){return jt.test(e)}var kt=Object.freeze({UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5}),Yt=Object.freeze({TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3});function Ht(e){e=D.defaultValue(e,D.defaultValue.EMPTY_OBJECT);var t=D.defaultValue(e.throttleByServer,!1),r=D.defaultValue(e.throttle,!1);this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=D.defaultValue(e.priority,0),this.throttle=r,this.throttleByServer=t,this.type=D.defaultValue(e.type,Yt.OTHER),this.serverKey=void 0,this.state=kt.UNISSUED,this.deferred=void 0,this.cancelled=!1}function Jt(e,t,r){this.statusCode=e,this.response=t,this.responseHeaders=r,"string"==typeof this.responseHeaders&&(this.responseHeaders=function(e){var t={};if(!e)return t;for(var r=e.split("\r\n"),n=0;n<r.length;++n){var a,i,s=r[n],o=s.indexOf(": ");0<o&&(a=s.substring(0,o),i=s.substring(o+2),t[a]=i)}return t}(this.responseHeaders))}function Xt(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}function Gt(e,t){return t-e}function Zt(e){this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function Qt(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}Ht.prototype.cancel=function(){this.cancelled=!0},Ht.prototype.clone=function(e){return D.defined(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=this.RequestState.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new Ht(this)},Jt.prototype.toString=function(){var e="Request has failed.";return D.defined(this.statusCode)&&(e+=" Status Code: "+this.statusCode),e},Object.defineProperties(Xt.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}}),Xt.prototype.addEventListener=function(e,t){this._listeners.push(e),this._scopes.push(t);var r=this;return function(){r.removeEventListener(e,t)}},Xt.prototype.removeEventListener=function(e,t){for(var r=this._listeners,n=this._scopes,a=-1,i=0;i<r.length;i++)if(r[i]===e&&n[i]===t){a=i;break}return-1!==a&&(this._insideRaiseEvent?(this._toRemove.push(a),r[a]=void 0,n[a]=void 0):(r.splice(a,1),n.splice(a,1)),!0)},Xt.prototype.raiseEvent=function(){this._insideRaiseEvent=!0;for(var e=this._listeners,t=this._scopes,r=e.length,n=0;n<r;n++){var a=e[n];D.defined(a)&&e[n].apply(t[n],arguments)}var i=this._toRemove;if(0<(r=i.length)){for(i.sort(Gt),n=0;n<r;n++){var s=i[n];e.splice(s,1),t.splice(s,1)}i.length=0}this._insideRaiseEvent=!1},Object.defineProperties(Zt.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){var t=this._length;if(e<t){for(var r=this._array,n=e;n<t;++n)r[n]=void 0;this._length=e,r.length=e}this._maximumLength=e}},comparator:{get:function(){return this._comparator}}}),Zt.prototype.reserve=function(e){e=D.defaultValue(e,this._length),this._array.length=e},Zt.prototype.heapify=function(e){e=D.defaultValue(e,0);for(var t=this._length,r=this._comparator,n=this._array,a=-1,i=!0;i;){var s=2*(e+1),o=s-1,a=o<t&&r(n[o],n[e])<0?o:e;s<t&&r(n[s],n[a])<0&&(a=s),a!==e?(Qt(n,a,e),e=a):i=!1}},Zt.prototype.resort=function(){for(var e=this._length,t=Math.ceil(e/2);0<=t;--t)this.heapify(t)},Zt.prototype.insert=function(e){var t,r=this._array,n=this._comparator,a=this._maximumLength,i=this._length++;for(i<r.length?r[i]=e:r.push(e);0!==i;){var s=Math.floor((i-1)/2);if(!(n(r[i],r[s])<0))break;Qt(r,i,s),i=s}return D.defined(a)&&this._length>a&&(t=r[a],this._length=a),t},Zt.prototype.pop=function(e){if(e=D.defaultValue(e,0),0!==this._length){var t=this._array,r=t[e];return Qt(t,e,--this._length),this.heapify(e),t[this._length]=void 0,r}};var Kt={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0},$t=100,er=new Zt({comparator:function(e,t){return e.priority-t.priority}});er.maximumLength=$t,er.reserve($t);var tr=[],rr={},nr="undefined"!=typeof document?new bt(document.location.href):new bt,ar=new Xt;function ir(){}function sr(e){D.defined(e.priorityFunction)&&(e.priority=e.priorityFunction())}function or(e){var t=D.defaultValue(ir.requestsByServer[e],ir.maximumRequestsPerServer);return rr[e]<t}function ur(e){return e.state===kt.UNISSUED&&(e.state=kt.ISSUED,e.deferred=D.when.defer()),e.deferred.promise}function lr(e){var t,r,n=ur(e);return e.state=kt.ACTIVE,tr.push(e),++Kt.numberOfActiveRequests,++Kt.numberOfActiveRequestsEver,++rr[e.serverKey],e.requestFunction().then((r=e,function(e){var t;r.state!==kt.CANCELLED&&(t=r.deferred,--Kt.numberOfActiveRequests,--rr[r.serverKey],ar.raiseEvent(),r.state=kt.RECEIVED,r.deferred=void 0,t.resolve(e))})).otherwise((t=e,function(e){t.state!==kt.CANCELLED&&(++Kt.numberOfFailedRequests,--Kt.numberOfActiveRequests,--rr[t.serverKey],ar.raiseEvent(e),t.state=kt.FAILED,t.deferred.reject(e))})),n}function dr(e){var t,r=e.state===kt.ACTIVE;e.state=kt.CANCELLED,++Kt.numberOfCancelledRequests,D.defined(e.deferred)&&(t=e.deferred,e.deferred=void 0,t.reject()),r&&(--Kt.numberOfActiveRequests,--rr[e.serverKey],++Kt.numberOfCancelledActiveRequests),D.defined(e.cancelFunction)&&e.cancelFunction()}ir.maximumRequests=100,ir.maximumRequestsPerServer=100,ir.requestsByServer={"api.cesium.com:443":18,"assets.cesium.com:443":18},ir.throttleRequests=!0,ir.debugShowStatistics=!1,ir.requestCompletedEvent=ar,Object.defineProperties(ir,{statistics:{get:function(){return Kt}},priorityHeapLength:{get:function(){return $t},set:function(e){if(e<$t)for(;er.length>e;){dr(er.pop())}$t=e,er.maximumLength=e,er.reserve(e)}}}),ir.update=function(){for(var e,t=0,r=tr.length,n=0;n<r;++n)(e=tr[n]).cancelled&&dr(e),e.state===kt.ACTIVE?0<t&&(tr[n-t]=e):++t;tr.length-=t;var a=er.internalArray,i=er.length;for(n=0;n<i;++n)sr(a[n]);er.resort();for(var s=Math.max(ir.maximumRequests-tr.length,0),o=0;o<s&&0<er.length;)!(e=er.pop()).cancelled&&(!e.throttleByServer||or(e.serverKey))?(lr(e),++o):dr(e);!function(){if(!ir.debugShowStatistics)return;0===Kt.numberOfActiveRequests&&0<Kt.lastNumberOfActiveRequests&&(0<Kt.numberOfAttemptedRequests&&(console.log("Number of attempted requests: "+Kt.numberOfAttemptedRequests),Kt.numberOfAttemptedRequests=0),0<Kt.numberOfCancelledRequests&&(console.log("Number of cancelled requests: "+Kt.numberOfCancelledRequests),Kt.numberOfCancelledRequests=0),0<Kt.numberOfCancelledActiveRequests&&(console.log("Number of cancelled active requests: "+Kt.numberOfCancelledActiveRequests),Kt.numberOfCancelledActiveRequests=0),0<Kt.numberOfFailedRequests&&(console.log("Number of failed requests: "+Kt.numberOfFailedRequests),Kt.numberOfFailedRequests=0));Kt.lastNumberOfActiveRequests=Kt.numberOfActiveRequests}()},ir.getServerKey=function(e){var t=new bt(e).resolve(nr);t.normalize();var r=t.authority;/:/.test(r)||(r=r+":"+("https"===t.scheme?"443":"80"));var n=rr[r];return D.defined(n)||(rr[r]=0),r},ir.request=function(e){if(Wt(e.url)||Lt(e.url))return ar.raiseEvent(),e.state=kt.RECEIVED,e.requestFunction();if(++Kt.numberOfAttemptedRequests,D.defined(e.serverKey)||(e.serverKey=ir.getServerKey(e.url)),!ir.throttleRequests||!e.throttleByServer||or(e.serverKey)){if(!ir.throttleRequests||!e.throttle)return lr(e);if(!(tr.length>=ir.maximumRequests)){sr(e);var t=er.insert(e);if(D.defined(t)){if(t===e)return;dr(t)}return ur(e)}}},ir.clearForSpecs=function(){for(;0<er.length;){dr(er.pop())}for(var e=tr.length,t=0;t<e;++t)dr(tr[t]);tr.length=0,rr={},Kt.numberOfAttemptedRequests=0,Kt.numberOfActiveRequests=0,Kt.numberOfCancelledRequests=0,Kt.numberOfCancelledActiveRequests=0,Kt.numberOfFailedRequests=0,Kt.numberOfActiveRequestsEver=0,Kt.lastNumberOfActiveRequests=0},ir.numberOfActiveRequestsByServer=function(e){return rr[e]},ir.requestHeap=er;var cr={},fr={};cr.add=function(e,t){var r=e.toLowerCase()+":"+t;D.defined(fr[r])||(fr[r]=!0)},cr.remove=function(e,t){var r=e.toLowerCase()+":"+t;D.defined(fr[r])&&delete fr[r]},cr.contains=function(e){var t=function(e){var t=new bt(e);t.normalize();var r=t.getAuthority();if(D.defined(r)){if(-1!==r.indexOf("@")&&(r=r.split("@")[1]),-1===r.indexOf(":")){var n=t.getScheme();if(D.defined(n)||(n=(n=window.location.protocol).substring(0,n.length-1)),"http"===n)r+=":80";else{if("https"!==n)return;r+=":443"}}return r}}(e);return!(!D.defined(t)||!D.defined(fr[t]))},cr.clear=function(){fr={}};var pr,hr=function(){try{var e=new XMLHttpRequest;return e.open("GET","#",!0),(e.responseType="blob")===e.responseType}catch(e){return!1}}();function mr(e,t,r,n){var a,i,s=e.query;if(!D.defined(s)||0===s.length)return 1;a=-1===s.indexOf("=")?((i={})[s]=void 0,i):function(e){var t={};if(""===e)return t;for(var r=e.replace(/\+/g,"%20").split(/[&;]/),n=0,a=r.length;n<a;++n){var i=r[n].split("="),s=decodeURIComponent(i[0]),o=i[1],o=D.defined(o)?decodeURIComponent(o):"",u=t[s];"string"==typeof u?t[s]=[u,o]:Array.isArray(u)?u.push(o):t[s]=o}return t}(s),t._queryParameters=r?wr(a,t._queryParameters,n):a,e.query=void 0}function yr(e,t){var r=t._queryParameters,n=Object.keys(r);1!==n.length||D.defined(r[n[0]])?e.query=function(e){var t,r="";for(t in e)if(e.hasOwnProperty(t)){var n=e[t],a=encodeURIComponent(t)+"=";if(Array.isArray(n))for(var i=0,s=n.length;i<s;++i)r+=a+encodeURIComponent(n[i])+"&";else r+=a+encodeURIComponent(n)+"&"}return r=r.slice(0,-1)}(r):e.query=n[0]}function vr(e,t){return D.defined(e)?D.defined(e.clone)?e.clone():Nt(e):t}function Cr(e){if(e.state===kt.ISSUED||e.state===kt.ACTIVE)throw new g.RuntimeError("The Resource is already being fetched.");e.state=kt.UNISSUED,e.deferred=void 0}function wr(e,t,r){if(!r)return Ft(e,t);var n,a,i,s=Nt(e,!0);for(n in t){t.hasOwnProperty(n)&&(a=s[n],i=t[n],D.defined(a)?(Array.isArray(a)||(a=s[n]=[a]),s[n]=a.concat(i)):s[n]=Array.isArray(i)?i.slice():i)}return s}function gr(e){"string"==typeof(e=D.defaultValue(e,D.defaultValue.EMPTY_OBJECT))&&(e={url:e}),this._url=void 0,this._templateValues=vr(e.templateValues,{}),this._queryParameters=vr(e.queryParameters,{}),this.headers=vr(e.headers,{}),this.request=D.defaultValue(e.request,new Ht),this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=D.defaultValue(e.retryAttempts,0),this._retryCount=0;var t=new bt(e.url);mr(t,this,!0,!0),t.fragment=void 0,this._url=t.toString()}function xr(e){var r=e.resource,n=e.flipY,a=e.preferImageBitmap,i=r.request;i.url=r.url,i.requestFunction=function(){var e=!1;r.isDataUri||r.isBlobUri||(e=r.isCrossOriginUrl);var t=D.when.defer();return gr._Implementations.createImage(i,e,t,n,a),t.promise};var t=ir.request(i);if(D.defined(t))return t.otherwise(function(t){return i.state!==kt.FAILED?D.when.reject(t):r.retryOnError(t).then(function(e){return e?(i.state=kt.UNISSUED,i.deferred=void 0,xr({resource:r,flipY:n,preferImageBitmap:a})):D.when.reject(t)})})}gr.createIfNeeded=function(e){return e instanceof gr?e.getDerivedResource({request:e.request}):"string"!=typeof e?e:new gr({url:e})},gr.supportsImageBitmapOptions=function(){if(D.defined(pr))return pr;if("function"!=typeof createImageBitmap)return pr=D.when.resolve(!1);return pr=gr.fetchBlob({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWP4////fwAJ+wP9CNHoHgAAAABJRU5ErkJggg=="}).then(function(e){return createImageBitmap(e,{imageOrientation:"flipY",premultiplyAlpha:"none"})}).then(function(e){return!0}).otherwise(function(){return!1})},Object.defineProperties(gr,{isBlobSupported:{get:function(){return hr}}}),Object.defineProperties(gr.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){return this.getUrlComponent(!0,!0)},set:function(e){var t=new bt(e);mr(t,this,!1),t.fragment=void 0,this._url=t.toString()}},extension:{get:function(){return function(e){var t=new bt(e);t.normalize();var r=t.path,n=r.lastIndexOf("/");return-1!==n&&(r=r.substr(n+1)),r=-1===(n=r.lastIndexOf("."))?"":r.substr(n+1)}(this._url)}},isDataUri:{get:function(){return Wt(this._url)}},isBlobUri:{get:function(){return Lt(this._url)}},isCrossOriginUrl:{get:function(){return function(e){D.defined(Vt)||(Vt=document.createElement("a")),Vt.href=window.location.href;var t=Vt.host,r=Vt.protocol;return Vt.href=e,Vt.href=Vt.href,r!==Vt.protocol||t!==Vt.host}(this._url)}},hasHeaders:{get:function(){return 0<Object.keys(this.headers).length}}}),gr.prototype.toString=function(){return this.getUrlComponent(!0,!0)},gr.prototype.getUrlComponent=function(e,t){if(this.isDataUri)return this._url;var r=new bt(this._url);e&&yr(r,this);var n=r.toString().replace(/%7B/g,"{").replace(/%7D/g,"}"),a=this._templateValues,n=n.replace(/{(.*?)}/g,function(e,t){var r=a[t];return D.defined(r)?encodeURIComponent(r):e});return t&&D.defined(this.proxy)&&(n=this.proxy.getURL(n)),n},gr.prototype.setQueryParameters=function(e,t){this._queryParameters=t?wr(this._queryParameters,e,!1):wr(e,this._queryParameters,!1)},gr.prototype.appendQueryParameters=function(e){this._queryParameters=wr(e,this._queryParameters,!0)},gr.prototype.setTemplateValues=function(e,t){this._templateValues=t?Ft(this._templateValues,e):Ft(e,this._templateValues)},gr.prototype.getDerivedResource=function(e){var t,r=this.clone();return r._retryCount=0,D.defined(e.url)&&(mr(t=new bt(e.url),r,!0,D.defaultValue(e.preserveQueryParameters,!1)),t.fragment=void 0,r._url=t.resolve(new bt(zt(this._url))).toString()),D.defined(e.queryParameters)&&(r._queryParameters=Ft(e.queryParameters,r._queryParameters)),D.defined(e.templateValues)&&(r._templateValues=Ft(e.templateValues,r.templateValues)),D.defined(e.headers)&&(r.headers=Ft(e.headers,r.headers)),D.defined(e.proxy)&&(r.proxy=e.proxy),D.defined(e.request)&&(r.request=e.request),D.defined(e.retryCallback)&&(r.retryCallback=e.retryCallback),D.defined(e.retryAttempts)&&(r.retryAttempts=e.retryAttempts),r},gr.prototype.retryOnError=function(e){var t=this.retryCallback;if("function"!=typeof t||this._retryCount>=this.retryAttempts)return D.when(!1);var r=this;return D.when(t(this,e)).then(function(e){return++r._retryCount,e})},gr.prototype.clone=function(e){return D.defined(e)||(e=new gr({url:this._url})),e._url=this._url,e._queryParameters=Nt(this._queryParameters),e._templateValues=Nt(this._templateValues),e.headers=Nt(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e},gr.prototype.getBaseUri=function(e){return t=this.getUrlComponent(e),r=e,n="",-1!==(a=t.lastIndexOf("/"))&&(n=t.substring(0,a+1)),r&&(t=new bt(t),D.defined(t.query)&&(n+="?"+t.query),D.defined(t.fragment)&&(n+="#"+t.fragment)),n;var t,r,n,a},gr.prototype.appendForwardSlash=function(){var e;this._url=(0!==(e=this._url).length&&"/"===e[e.length-1]||(e+="/"),e)},gr.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},gr.fetchArrayBuffer=function(e){return new gr(e).fetchArrayBuffer()},gr.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},gr.fetchBlob=function(e){return new gr(e).fetchBlob()},gr.prototype.fetchImage=function(e){e=D.defaultValue(e,D.defaultValue.EMPTY_OBJECT);var t=D.defaultValue(e.preferImageBitmap,!1),r=D.defaultValue(e.preferBlob,!1),n=D.defaultValue(e.flipY,!1);if(Cr(this.request),!hr||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!r)return xr({resource:this,flipY:n,preferImageBitmap:t});var a,i,s,o=this.fetchBlob();return D.defined(o)?gr.supportsImageBitmapOptions().then(function(e){return a=e&&t,o}).then(function(e){if(D.defined(e)){if(s=e,a)return gr.createImageBitmapFromBlob(e,{flipY:n,premultiplyAlpha:!1});var t=window.URL.createObjectURL(e);return xr({resource:i=new gr({url:t}),flipY:n,preferImageBitmap:!1})}}).then(function(e){if(D.defined(e))return e.blob=s,a||window.URL.revokeObjectURL(i.url),e}).otherwise(function(e){return D.defined(i)&&window.URL.revokeObjectURL(i.url),e.blob=s,D.when.reject(e)}):void 0},gr.fetchImage=function(e){return new gr(e).fetchImage({flipY:e.flipY,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap})},gr.prototype.fetchText=function(){return this.fetch({responseType:"text"})},gr.fetchText=function(e){return new gr(e).fetchText()},gr.prototype.fetchJson=function(){var e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(D.defined(e))return e.then(function(e){if(D.defined(e))return JSON.parse(e)})},gr.fetchJson=function(e){return new gr(e).fetchJson()},gr.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},gr.fetchXML=function(e){return new gr(e).fetchXML()},gr.prototype.fetchJsonp=function(e){var t;for(e=D.defaultValue(e,"callback"),Cr(this.request);t="loadJsonp"+Math.random().toString().substring(2,8),D.defined(window[t]););return function r(n,a,i){var e={};e[a]=i;n.setQueryParameters(e);var s=n.request;s.url=n.url;s.requestFunction=function(){var t=D.when.defer();return window[i]=function(e){t.resolve(e);try{delete window[i]}catch(e){window[i]=void 0}},gr._Implementations.loadAndExecuteScript(n.url,i,t),t.promise};var t=ir.request(s);if(!D.defined(t))return;return t.otherwise(function(t){return s.state!==kt.FAILED?D.when.reject(t):n.retryOnError(t).then(function(e){return e?(s.state=kt.UNISSUED,s.deferred=void 0,r(n,a,i)):D.when.reject(t)})})}(this,e,t)},gr.fetchJsonp=function(e){return new gr(e).fetchJsonp(e.callbackParameterName)},gr.prototype._makeRequest=function(o){var u=this;Cr(u.request);var l=u.request;l.url=u.url,l.requestFunction=function(){var e=o.responseType,t=Ft(o.headers,u.headers),r=o.overrideMimeType,n=o.method,a=o.data,i=D.when.defer(),s=gr._Implementations.loadWithXhr(u.url,e,n,a,t,i,r);return D.defined(s)&&D.defined(s.abort)&&(l.cancelFunction=function(){s.abort()}),i.promise};var e=ir.request(l);if(D.defined(e))return e.then(function(e){return l.cancelFunction=void 0,e}).otherwise(function(t){return l.cancelFunction=void 0,l.state!==kt.FAILED?D.when.reject(t):u.retryOnError(t).then(function(e){return e?(l.state=kt.UNISSUED,l.deferred=void 0,u.fetch(o)):D.when.reject(t)})})};var _r=/^data:(.*?)(;base64)?,(.*)$/;function Er(e,t){var r=decodeURIComponent(t);return e?atob(r):r}function Sr(e,t){for(var r=Er(e,t),n=new ArrayBuffer(r.length),a=new Uint8Array(n),i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return n}function Or(e,t){switch(t){case"text":return e.toString("utf8");case"json":return JSON.parse(e.toString("utf8"));default:return new Uint8Array(e).buffer}}gr.prototype.fetch=function(e){return(e=vr(e,{})).method="GET",this._makeRequest(e)},gr.fetch=function(e){return new gr(e).fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},gr.prototype.delete=function(e){return(e=vr(e,{})).method="DELETE",this._makeRequest(e)},gr.delete=function(e){return new gr(e).delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data})},gr.prototype.head=function(e){return(e=vr(e,{})).method="HEAD",this._makeRequest(e)},gr.head=function(e){return new gr(e).head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},gr.prototype.options=function(e){return(e=vr(e,{})).method="OPTIONS",this._makeRequest(e)},gr.options=function(e){return new gr(e).options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},gr.prototype.post=function(e,t){return r.Check.defined("data",e),(t=vr(t,{})).method="POST",t.data=e,this._makeRequest(t)},gr.post=function(e){return new gr(e).post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},gr.prototype.put=function(e,t){return r.Check.defined("data",e),(t=vr(t,{})).method="PUT",t.data=e,this._makeRequest(t)},gr.put=function(e){return new gr(e).put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},gr.prototype.patch=function(e,t){return r.Check.defined("data",e),(t=vr(t,{})).method="PATCH",t.data=e,this._makeRequest(t)},gr.patch=function(e){return new gr(e).patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},(gr._Implementations={}).createImage=function(o,u,l,d,c){var f=o.url;gr.supportsImageBitmapOptions().then(function(e){if(!e||!c)return t=f,r=u,n=l,(a=new Image).onload=function(){n.resolve(a)},a.onerror=function(e){n.reject(e)},r&&(cr.contains(t)?a.crossOrigin="use-credentials":a.crossOrigin=""),void(a.src=t);var t,r,n,a,i=D.when.defer(),s=gr._Implementations.loadWithXhr(f,"blob","GET",void 0,void 0,i,void 0,void 0,void 0);return D.defined(s)&&D.defined(s.abort)&&(o.cancelFunction=function(){s.abort()}),i.promise.then(function(e){return D.defined(e)?gr.createImageBitmapFromBlob(e,{flipY:d,premultiplyAlpha:!1}):void l.reject(new g.RuntimeError("Successfully retrieved "+f+" but it contained no content."))}).then(l.resolve)}).otherwise(l.reject)},gr.createImageBitmapFromBlob=function(e,t){return r.Check.defined("options",t),r.Check.typeOf.bool("options.flipY",t.flipY),r.Check.typeOf.bool("options.premultiplyAlpha",t.premultiplyAlpha),createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"none",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none"})};var Ar="undefined"==typeof XMLHttpRequest;function Rr(e){var t,r;e=D.defaultValue(e,D.defaultValue.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=D.defaultValue(e.addNewLeapSeconds,!0),D.defined(e.data)?br(this,e.data):D.defined(e.url)?(t=gr.createIfNeeded(e.url),(r=this)._downloadPromise=t.fetchJson().then(function(e){br(r,e)}).otherwise(function(){r._dataError="An error occurred while retrieving the EOP data from the URL "+t.url+"."})):br(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function Mr(e,t){return Rt.compare(e.julianDate,t)}function br(e,t){if(D.defined(t.columnNames))if(D.defined(t.samples)){var r=t.columnNames.indexOf("modifiedJulianDateUtc"),n=t.columnNames.indexOf("xPoleWanderRadians"),a=t.columnNames.indexOf("yPoleWanderRadians"),i=t.columnNames.indexOf("ut1MinusUtcSeconds"),s=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),o=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),u=t.columnNames.indexOf("taiMinusUtcSeconds");if(r<0||n<0||a<0||i<0||s<0||o<0||u<0)e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else{var l,d=e._samples=t.samples,c=e._dates=[];e._dateColumn=r,e._xPoleWanderRadiansColumn=n,e._yPoleWanderRadiansColumn=a,e._ut1MinusUtcSecondsColumn=i,e._xCelestialPoleOffsetRadiansColumn=s,e._yCelestialPoleOffsetRadiansColumn=o,e._taiMinusUtcSecondsColumn=u,e._columnCount=t.columnNames.length,e._lastIndex=void 0;for(var f=e._addNewLeapSeconds,p=0,h=d.length;p<h;p+=e._columnCount){var m,y,v,C=d[p+r],w=d[p+u],g=new Rt(C+ut.MODIFIED_JULIAN_DATE_DIFFERENCE,w,lt.TAI);c.push(g),f&&(w===l||!D.defined(l)||(y=rt(m=Rt.leapSeconds,g,Mr))<0&&(v=new ot(g,w),m.splice(~y,0,v)),l=w)}}}else e._dataError="Error in loaded EOP data: The samples property is required.";else e._dataError="Error in loaded EOP data: The columnNames property is required."}function Tr(e,t,r,n,a){var i=r*n;a.xPoleWander=t[i+e._xPoleWanderRadiansColumn],a.yPoleWander=t[i+e._yPoleWanderRadiansColumn],a.xPoleOffset=t[i+e._xCelestialPoleOffsetRadiansColumn],a.yPoleOffset=t[i+e._yCelestialPoleOffsetRadiansColumn],a.ut1MinusUtc=t[i+e._ut1MinusUtcSecondsColumn]}function qr(e,t,r){return t+e*(r-t)}function Ir(e,t,r,n,a,i,s){var o=e._columnCount;if(i>t.length-1)return s.xPoleWander=0,s.yPoleWander=0,s.xPoleOffset=0,s.yPoleOffset=0,s.ut1MinusUtc=0,s;var u=t[a],l=t[i];if(u.equals(l)||n.equals(u))return Tr(e,r,a,o,s),s;if(n.equals(l))return Tr(e,r,i,o,s),s;var d,c,f=Rt.secondsDifference(n,u)/Rt.secondsDifference(l,u),p=a*o,h=i*o,m=r[p+e._ut1MinusUtcSecondsColumn],y=r[h+e._ut1MinusUtcSecondsColumn],v=y-m;return!(.5<v||v<-.5)||(d=r[p+e._taiMinusUtcSecondsColumn])!==(c=r[h+e._taiMinusUtcSecondsColumn])&&(l.equals(n)?m=y:y-=c-d),s.xPoleWander=qr(f,r[p+e._xPoleWanderRadiansColumn],r[h+e._xPoleWanderRadiansColumn]),s.yPoleWander=qr(f,r[p+e._yPoleWanderRadiansColumn],r[h+e._yPoleWanderRadiansColumn]),s.xPoleOffset=qr(f,r[p+e._xCelestialPoleOffsetRadiansColumn],r[h+e._xCelestialPoleOffsetRadiansColumn]),s.yPoleOffset=qr(f,r[p+e._yCelestialPoleOffsetRadiansColumn],r[h+e._yCelestialPoleOffsetRadiansColumn]),s.ut1MinusUtc=qr(f,m,y),s}function Dr(e,t,r){this.heading=D.defaultValue(e,0),this.pitch=D.defaultValue(t,0),this.roll=D.defaultValue(r,0)}gr._Implementations.loadWithXhr=function(e,a,i,t,r,s,n){var o=_r.exec(e);if(null===o){if(Ar)return u=e,l=a,d=i,c=r,f=s,p=require("url").parse(u),h="https:"===p.protocol?require("https"):require("http"),m=require("zlib"),y={protocol:p.protocol,hostname:p.hostname,port:p.port,path:p.path,query:p.query,method:d,headers:c},void h.request(y).on("response",function(t){var r;t.statusCode<200||300<=t.statusCode?f.reject(new Jt(t.statusCode,t,t.headers)):(r=[],t.on("data",function(e){r.push(e)}),t.on("end",function(){var e=Buffer.concat(r);"gzip"===t.headers["content-encoding"]?m.gunzip(e,function(e,t){e?f.reject(new g.RuntimeError("Error decompressing response.")):f.resolve(Or(t,l))}):f.resolve(Or(e,l))}))}).on("error",function(e){f.reject(new Jt)}).end();var u,l,d,c,f,p,h,m,y,v=new XMLHttpRequest;if(cr.contains(e)&&(v.withCredentials=!0),v.open(i,e,!0),D.defined(n)&&D.defined(v.overrideMimeType)&&v.overrideMimeType(n),D.defined(r))for(var C in r)r.hasOwnProperty(C)&&v.setRequestHeader(C,r[C]);D.defined(a)&&(v.responseType=a);var w=!1;return"string"==typeof e&&(w=0===e.indexOf("file://")||"undefined"!=typeof window&&"file://"===window.location.origin),v.onload=function(){if(!(v.status<200||300<=v.status)||w&&0===v.status){var e=v.response,t=v.responseType;if("HEAD"===i||"OPTIONS"===i){var r=v.getAllResponseHeaders().trim().split(/[\r\n]+/),n={};return r.forEach(function(e){var t=e.split(": "),r=t.shift();n[r]=t.join(": ")}),void s.resolve(n)}if(204===v.status)s.resolve();else if(!D.defined(e)||D.defined(a)&&t!==a)if("json"===a&&"string"==typeof e)try{s.resolve(JSON.parse(e))}catch(e){s.reject(e)}else(""===t||"document"===t)&&D.defined(v.responseXML)&&v.responseXML.hasChildNodes()?s.resolve(v.responseXML):""!==t&&"text"!==t||!D.defined(v.responseText)?s.reject(new g.RuntimeError("Invalid XMLHttpRequest response type.")):s.resolve(v.responseText);else s.resolve(e)}else s.reject(new Jt(v.status,v.response,v.getAllResponseHeaders()))},v.onerror=function(e){s.reject(new Jt)},v.send(t),v}s.resolve(function(e,t){t=D.defaultValue(t,"");var r=e[1],n=!!e[2],a=e[3];switch(t){case"":case"text":return Er(n,a);case"arraybuffer":return Sr(n,a);case"blob":var i=Sr(n,a);return new Blob([i],{type:r});case"document":return(new DOMParser).parseFromString(Er(n,a),r);case"json":return JSON.parse(Er(n,a))}}(o,a))},gr._Implementations.loadAndExecuteScript=function(e,t,r){return function(e){var t=D.when.defer(),r=document.createElement("script");r.async=!0,r.src=e;var n=document.getElementsByTagName("head")[0];return r.onload=function(){r.onload=void 0,n.removeChild(r),t.resolve()},r.onerror=function(e){t.reject(e)},n.appendChild(r),t.promise}(e).otherwise(r.reject)},(gr._DefaultImplementations={}).createImage=gr._Implementations.createImage,gr._DefaultImplementations.loadWithXhr=gr._Implementations.loadWithXhr,gr._DefaultImplementations.loadAndExecuteScript=gr._Implementations.loadAndExecuteScript,gr.DEFAULT=Object.freeze(new gr({url:"undefined"==typeof document?"":document.location.href.split("?")[0]})),Rr.NONE=Object.freeze({getPromiseToLoad:function(){return D.when.resolve()},compute:function(e,t){return D.defined(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new nt(0,0,0,0,0),t}}),Rr.prototype.getPromiseToLoad=function(){return D.when(this._downloadPromise)},Rr.prototype.compute=function(e,t){if(D.defined(this._samples)){if(D.defined(t)||(t=new nt(0,0,0,0,0)),0===this._samples.length)return t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0,t;var r=this._dates,n=this._lastIndex,a=0,i=0;if(D.defined(n)){var s=r[n],o=r[n+1],u=Rt.lessThanOrEquals(s,e),l=!D.defined(o),d=l||Rt.greaterThanOrEquals(o,e);if(u&&d)return a=n,!l&&o.equals(e)&&++a,i=a+1,Ir(this,r,this._samples,e,a,i,t),t}var c=rt(r,e,Rt.compare,this._dateColumn);return 0<=c?(c<r.length-1&&r[c+1].equals(e)&&++c,i=a=c):(a=(i=~c)-1)<0&&(a=0),this._lastIndex=a,Ir(this,r,this._samples,e,a,i,t),t}if(D.defined(this._dataError))throw new g.RuntimeError(this._dataError)},Dr.fromQuaternion=function(e,t){D.defined(t)||(t=new Dr);var r=2*(e.w*e.y-e.z*e.x),n=1-2*(e.x*e.x+e.y*e.y),a=2*(e.w*e.x+e.y*e.z),i=1-2*(e.y*e.y+e.z*e.z),s=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(s,i),t.roll=Math.atan2(a,n),t.pitch=-A.CesiumMath.asinClamped(r),t},Dr.fromDegrees=function(e,t,r,n){return D.defined(n)||(n=new Dr),n.heading=e*A.CesiumMath.RADIANS_PER_DEGREE,n.pitch=t*A.CesiumMath.RADIANS_PER_DEGREE,n.roll=r*A.CesiumMath.RADIANS_PER_DEGREE,n},Dr.clone=function(e,t){if(D.defined(e))return D.defined(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new Dr(e.heading,e.pitch,e.roll)},Dr.equals=function(e,t){return e===t||D.defined(e)&&D.defined(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll},Dr.equalsEpsilon=function(e,t,r,n){return e===t||D.defined(e)&&D.defined(t)&&A.CesiumMath.equalsEpsilon(e.heading,t.heading,r,n)&&A.CesiumMath.equalsEpsilon(e.pitch,t.pitch,r,n)&&A.CesiumMath.equalsEpsilon(e.roll,t.roll,r,n)},Dr.prototype.clone=function(e){return Dr.clone(this,e)},Dr.prototype.equals=function(e){return Dr.equals(this,e)},Dr.prototype.equalsEpsilon=function(e,t,r){return Dr.equalsEpsilon(this,e,t,r)},Dr.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var Pr,Ur,Nr,Fr=/((?:.*\/)|^)Cesium\.js(?:\?|\#|$)/;function zr(e){return"undefined"==typeof document?e:(D.defined(Pr)||(Pr=document.createElement("a")),Pr.href=e,Pr.href=Pr.href,Pr.href)}function Vr(){if(D.defined(Ur))return Ur;var e="undefined"!=typeof CESIUM_BASE_URL?CESIUM_BASE_URL:"object"==typeof define&&D.defined(define.amd)&&!define.amd.toUrlUndefined&&D.defined(require.toUrl)?zt("..",jr("Core/buildModuleUrl.js")):function(){for(var e=document.getElementsByTagName("script"),t=0,r=e.length;t<r;++t){var n=e[t].getAttribute("src"),a=Fr.exec(n);if(null!==a)return a[1]}}();return(Ur=new gr({url:zr(e)})).appendForwardSlash(),Ur}function Br(e){return zr(require.toUrl("../"+e))}function Lr(e){return Vr().getDerivedResource({url:e}).url}function jr(e){return D.defined(Nr)||(Nr="object"==typeof define&&D.defined(define.amd)&&!define.amd.toUrlUndefined&&D.defined(require.toUrl)?Br:Lr),Nr(e)}function Wr(e,t,r){this.x=e,this.y=t,this.s=r}function kr(e){e=D.defaultValue(e,D.defaultValue.EMPTY_OBJECT),this._xysFileUrlTemplate=gr.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=D.defaultValue(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=D.defaultValue(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new Rt(this._sampleZeroJulianEphemerisDate,0,lt.TAI),this._stepSizeDays=D.defaultValue(e.stepSizeDays,1),this._samplesPerXysFile=D.defaultValue(e.samplesPerXysFile,1e3),this._totalSamples=D.defaultValue(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var t=this._interpolationOrder,r=this._denominators=new Array(t+1),n=this._xTable=new Array(t+1),a=Math.pow(this._stepSizeDays,t),i=0;i<=t;++i){r[i]=a,n[i]=i*this._stepSizeDays;for(var s=0;s<=t;++s)s!==i&&(r[i]*=i-s);r[i]=1/r[i]}this._work=new Array(t+1),this._coef=new Array(t+1)}jr._cesiumScriptRegex=Fr,jr._buildModuleUrlFromBaseUrl=Lr,jr._clearBaseResource=function(){Ur=void 0},jr.setBaseUrl=function(e){Ur=gr.DEFAULT.getDerivedResource({url:e})},jr.getCesiumBaseUrl=Vr;var Yr=new Rt(0,0,lt.TAI);function Hr(e,t,r){var n=Yr;return n.dayNumber=t,n.secondsOfDay=r,Rt.daysDifference(n,e._sampleZeroDateTT)}function Jr(s,o){if(s._chunkDownloadsInProgress[o])return s._chunkDownloadsInProgress[o];var u=D.when.defer();s._chunkDownloadsInProgress[o]=u;var e=s._xysFileUrlTemplate,t=D.defined(e)?e.getDerivedResource({templateValues:{0:o}}):new gr({url:jr("Assets/IAU2006_XYS/IAU2006_XYS_"+o+".json")});return D.when(t.fetchJson(),function(e){s._chunkDownloadsInProgress[o]=!1;for(var t=s._samples,r=e.samples,n=o*s._samplesPerXysFile*3,a=0,i=r.length;a<i;++a)t[n+a]=r[a];u.resolve()}),u.promise}kr.prototype.preload=function(e,t,r,n){var a=Hr(this,e,t),i=Hr(this,r,n),s=a/this._stepSizeDays-this._interpolationOrder/2|0;s<0&&(s=0);var o=i/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;o>=this._totalSamples&&(o=this._totalSamples-1);for(var u=s/this._samplesPerXysFile|0,l=o/this._samplesPerXysFile|0,d=[],c=u;c<=l;++c)d.push(Jr(this,c));return D.when.all(d)},kr.prototype.computeXysRadians=function(e,t,r){var n=Hr(this,e,t);if(!(n<0)){var a=n/this._stepSizeDays|0;if(!(a>=this._totalSamples)){var i=this._interpolationOrder,s=a-(i/2|0);s<0&&(s=0);var o=s+i;o>=this._totalSamples&&(s=(o=this._totalSamples-1)-i)<0&&(s=0);var u=!1,l=this._samples;if(D.defined(l[3*s])||(Jr(this,s/this._samplesPerXysFile|0),u=!0),D.defined(l[3*o])||(Jr(this,o/this._samplesPerXysFile|0),u=!0),!u){D.defined(r)?(r.x=0,r.y=0,r.s=0):r=new Wr(0,0,0);for(var d,c=n-s*this._stepSizeDays,f=this._work,p=this._denominators,h=this._coef,m=this._xTable,y=0;y<=i;++y)f[y]=c-m[y];for(y=0;y<=i;++y){for(h[y]=1,d=0;d<=i;++d)d!==y&&(h[y]*=f[d]);h[y]*=p[y];var v=3*(s+y);r.x+=h[y]*l[v++],r.y+=h[y]*l[v++],r.s+=h[y]*l[v]}return r}}}};var Xr={},Gr={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},Zr={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Qr={},Kr={east:new P.Cartesian3,north:new P.Cartesian3,up:new P.Cartesian3,west:new P.Cartesian3,south:new P.Cartesian3,down:new P.Cartesian3},$r=new P.Cartesian3,en=new P.Cartesian3,tn=new P.Cartesian3;Xr.localFrameToFixedFrameGenerator=function(s,o){if(!Gr.hasOwnProperty(s)||!Gr[s].hasOwnProperty(o))throw new r.DeveloperError("firstAxis and secondAxis must be east, north, up, west, south or down.");var e,u=Gr[s][o],t=s+o;return D.defined(Qr[t])?e=Qr[t]:(e=function(e,t,r){var n,a,i;return D.defined(r)||(r=new R.Matrix4),P.Cartesian3.equalsEpsilon(e,P.Cartesian3.ZERO,A.CesiumMath.EPSILON14)?(P.Cartesian3.unpack(Zr[s],0,$r),P.Cartesian3.unpack(Zr[o],0,en),P.Cartesian3.unpack(Zr[u],0,tn)):A.CesiumMath.equalsEpsilon(e.x,0,A.CesiumMath.EPSILON14)&&A.CesiumMath.equalsEpsilon(e.y,0,A.CesiumMath.EPSILON14)?(n=A.CesiumMath.sign(e.z),P.Cartesian3.unpack(Zr[s],0,$r),"east"!==s&&"west"!==s&&P.Cartesian3.multiplyByScalar($r,n,$r),P.Cartesian3.unpack(Zr[o],0,en),"east"!==o&&"west"!==o&&P.Cartesian3.multiplyByScalar(en,n,en),P.Cartesian3.unpack(Zr[u],0,tn),"east"!==u&&"west"!==u&&P.Cartesian3.multiplyByScalar(tn,n,tn)):((t=D.defaultValue(t,c.Ellipsoid.WGS84)).geodeticSurfaceNormal(e,Kr.up),a=Kr.up,(i=Kr.east).x=-e.y,i.y=e.x,i.z=0,P.Cartesian3.normalize(i,Kr.east),P.Cartesian3.cross(a,i,Kr.north),P.Cartesian3.multiplyByScalar(Kr.up,-1,Kr.down),P.Cartesian3.multiplyByScalar(Kr.east,-1,Kr.west),P.Cartesian3.multiplyByScalar(Kr.north,-1,Kr.south),$r=Kr[s],en=Kr[o],tn=Kr[u]),r[0]=$r.x,r[1]=$r.y,r[2]=$r.z,r[3]=0,r[4]=en.x,r[5]=en.y,r[6]=en.z,r[7]=0,r[8]=tn.x,r[9]=tn.y,r[10]=tn.z,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,r},Qr[t]=e),e},Xr.eastNorthUpToFixedFrame=Xr.localFrameToFixedFrameGenerator("east","north"),Xr.northEastDownToFixedFrame=Xr.localFrameToFixedFrameGenerator("north","east"),Xr.northUpEastToFixedFrame=Xr.localFrameToFixedFrameGenerator("north","up"),Xr.northWestUpToFixedFrame=Xr.localFrameToFixedFrameGenerator("north","west");var rn=new Ae,nn=new P.Cartesian3(1,1,1),an=new R.Matrix4;Xr.headingPitchRollToFixedFrame=function(e,t,r,n,a){n=D.defaultValue(n,Xr.eastNorthUpToFixedFrame);var i=Ae.fromHeadingPitchRoll(t,rn),s=R.Matrix4.fromTranslationQuaternionRotationScale(P.Cartesian3.ZERO,i,nn,an);return a=n(e,r,a),R.Matrix4.multiply(a,s,a)};var sn=new R.Matrix4,on=new R.Matrix3;Xr.headingPitchRollQuaternion=function(e,t,r,n,a){var i=Xr.headingPitchRollToFixedFrame(e,t,r,n,sn),s=R.Matrix4.getMatrix3(i,on);return Ae.fromRotationMatrix(s,a)};var un=new P.Cartesian3(1,1,1),ln=new P.Cartesian3,dn=new R.Matrix4,cn=new R.Matrix4,fn=new R.Matrix3,pn=new Ae;Xr.fixedFrameToHeadingPitchRoll=function(e,t,r,n){t=D.defaultValue(t,c.Ellipsoid.WGS84),r=D.defaultValue(r,Xr.eastNorthUpToFixedFrame),D.defined(n)||(n=new Dr);var a=R.Matrix4.getTranslation(e,ln);if(P.Cartesian3.equals(a,P.Cartesian3.ZERO))return n.heading=0,n.pitch=0,n.roll=0,n;var i=R.Matrix4.inverseTransformation(r(a,t,dn),dn),s=R.Matrix4.setScale(e,un,cn),s=R.Matrix4.setTranslation(s,P.Cartesian3.ZERO,s),i=R.Matrix4.multiply(i,s,i),o=Ae.fromRotationMatrix(R.Matrix4.getMatrix3(i,fn),pn),o=Ae.normalize(o,o);return Dr.fromQuaternion(o,n)};var hn=A.CesiumMath.TWO_PI/86400,mn=new Rt;Xr.computeTemeToPseudoFixedMatrix=function(e,t){var r=(mn=Rt.addSeconds(e,-Rt.computeTaiMinusUtc(e),mn)).dayNumber,n=mn.secondsOfDay,a=r-2451545,i=43200<=n?(.5+a)/ut.DAYS_PER_JULIAN_CENTURY:(a-.5)/ut.DAYS_PER_JULIAN_CENTURY,s=(24110.54841+i*(8640184.812866+i*(.093104+-62e-7*i)))*hn%A.CesiumMath.TWO_PI+(72921158553e-15+11772758384668e-32*(r-2451545.5))*((n+.5*ut.SECONDS_PER_DAY)%ut.SECONDS_PER_DAY),o=Math.cos(s),u=Math.sin(s);return D.defined(t)?(t[0]=o,t[1]=-u,t[2]=0,t[3]=u,t[4]=o,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new R.Matrix3(o,u,0,-u,o,0,0,0,1)},Xr.iau2006XysData=new kr,Xr.earthOrientationParameters=Rr.NONE;var yn=32.184;Xr.preloadIcrfFixed=function(e){var t=e.start.dayNumber,r=e.start.secondsOfDay+yn,n=e.stop.dayNumber,a=e.stop.secondsOfDay+yn,i=Xr.iau2006XysData.preload(t,r,n,a),s=Xr.earthOrientationParameters.getPromiseToLoad();return D.when.all([i,s])},Xr.computeIcrfToFixedMatrix=function(e,t){D.defined(t)||(t=new R.Matrix3);var r=Xr.computeFixedToIcrfMatrix(e,t);if(D.defined(r))return R.Matrix3.transpose(r,t)};var vn=new Wr(0,0,0),Cn=new nt(0,0,0,0,0),wn=new R.Matrix3,gn=new R.Matrix3;Xr.computeFixedToIcrfMatrix=function(e,t){D.defined(t)||(t=new R.Matrix3);var r=Xr.earthOrientationParameters.compute(e,Cn);if(D.defined(r)){var n=e.dayNumber,a=e.secondsOfDay+yn,i=Xr.iau2006XysData.computeXysRadians(n,a,vn);if(D.defined(i)){var s=i.x+r.xPoleOffset,o=i.y+r.yPoleOffset,u=1/(1+Math.sqrt(1-s*s-o*o)),l=wn;l[0]=1-u*s*s,l[3]=-u*s*o,l[6]=s,l[1]=-u*s*o,l[4]=1-u*o*o,l[7]=o,l[2]=-s,l[5]=-o,l[8]=1-u*(s*s+o*o);var d=R.Matrix3.fromRotationZ(-i.s,gn),c=R.Matrix3.multiply(l,d,wn),f=e.dayNumber-2451545,p=(e.secondsOfDay-Rt.computeTaiMinusUtc(e)+r.ut1MinusUtc)/ut.SECONDS_PER_DAY,h=(h=.779057273264+p+.00273781191135448*(f+p))%1*A.CesiumMath.TWO_PI,m=R.Matrix3.fromRotationZ(h,gn),y=R.Matrix3.multiply(c,m,wn),v=Math.cos(r.xPoleWander),C=Math.cos(r.yPoleWander),w=Math.sin(r.xPoleWander),g=Math.sin(r.yPoleWander),x=n-2451545+a/ut.SECONDS_PER_DAY,_=-47e-6*(x/=36525)*A.CesiumMath.RADIANS_PER_DEGREE/3600,E=Math.cos(_),S=Math.sin(_),O=gn;return O[0]=v*E,O[1]=v*S,O[2]=w,O[3]=-C*S+g*w*E,O[4]=C*E+g*w*S,O[5]=-g*v,O[6]=-g*S-C*w*E,O[7]=g*E-C*w*S,O[8]=C*v,R.Matrix3.multiply(y,O,t)}}};var xn=new R.Cartesian4;Xr.pointToWindowCoordinates=function(e,t,r,n){return(n=Xr.pointToGLWindowCoordinates(e,t,r,n)).y=2*t[5]-n.y,n},Xr.pointToGLWindowCoordinates=function(e,t,r,n){D.defined(n)||(n=new c.Cartesian2);var a=xn;return R.Matrix4.multiplyByVector(e,R.Cartesian4.fromElements(r.x,r.y,r.z,1,a),a),R.Cartesian4.multiplyByScalar(a,1/a.w,a),R.Matrix4.multiplyByVector(t,a,a),c.Cartesian2.fromCartesian4(a,n)};var _n=new P.Cartesian3,En=new P.Cartesian3,Sn=new P.Cartesian3;Xr.rotationMatrixFromPositionVelocity=function(e,t,r,n){var a=D.defaultValue(r,c.Ellipsoid.WGS84).geodeticSurfaceNormal(e,_n),i=P.Cartesian3.cross(t,a,En);P.Cartesian3.equalsEpsilon(i,P.Cartesian3.ZERO,A.CesiumMath.EPSILON6)&&(i=P.Cartesian3.clone(P.Cartesian3.UNIT_X,i));var s=P.Cartesian3.cross(i,t,Sn);return P.Cartesian3.normalize(s,s),P.Cartesian3.cross(t,s,i),P.Cartesian3.negate(i,i),P.Cartesian3.normalize(i,i),D.defined(n)||(n=new R.Matrix3),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=i.x,n[4]=i.y,n[5]=i.z,n[6]=s.x,n[7]=s.y,n[8]=s.z,n};var On=new R.Matrix4(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),An=new c.Cartographic,Rn=new P.Cartesian3,Mn=new P.Cartesian3,bn=new R.Matrix3,Tn=new R.Matrix4,qn=new R.Matrix4;Xr.basisTo2D=function(e,t,r){var n=R.Matrix4.getTranslation(t,Mn),a=e.ellipsoid,i=a.cartesianToCartographic(n,An),s=e.project(i,Rn);P.Cartesian3.fromElements(s.z,s.x,s.y,s);var o=Xr.eastNorthUpToFixedFrame(n,a,Tn),u=R.Matrix4.inverseTransformation(o,qn),l=R.Matrix4.getMatrix3(t,bn),d=R.Matrix4.multiplyByMatrix3(u,l,r);return R.Matrix4.multiply(On,d,r),R.Matrix4.setTranslation(r,s,r),r},Xr.wgs84To2DModelMatrix=function(e,t,r){var n=e.ellipsoid,a=Xr.eastNorthUpToFixedFrame(t,n,Tn),i=R.Matrix4.inverseTransformation(a,qn),s=n.cartesianToCartographic(t,An),o=e.project(s,Rn);P.Cartesian3.fromElements(o.z,o.x,o.y,o);var u=R.Matrix4.fromTranslation(o,Tn);return R.Matrix4.multiply(On,i,r),R.Matrix4.multiply(u,r,r),r},e.BoundingSphere=U,e.FeatureDetection=Oe,e.GeographicProjection=t,e.Intersect=s,e.Interval=o,e.Quaternion=Ae,e.Resource=gr,e.Transforms=Xr,e.buildModuleUrl=jr});
